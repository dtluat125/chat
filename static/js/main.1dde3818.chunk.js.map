{"version":3,"sources":["firebase.js","features/appSlice.js","components/Login/SignIn.jsx","components/Login/Register.jsx","components/Login/Login.jsx","components/Header/DropdownItem.jsx","components/Header/DropdownSearchMenu.jsx","components/Header/DropdownMove.jsx","components/Header/Header.jsx","components/SideBar/SidebarOption.jsx","components/SideBar/SidebarCollapse.jsx","components/SideBar/SidebarHeader.jsx","components/SmallLoader.jsx","components/SideBar/SideBar.jsx","components/Chat/ChatInput.jsx","components/Chat/ProfileModal.jsx","components/Chat/Message.jsx","components/Chat/DayBlockMessages.jsx","components/Chat/Chat.jsx","components/Loading.jsx","components/Edit Profile/InputSection.jsx","components/Edit Profile/EditProfile.jsx","components/Reiszer.jsx","components/SecondaryView.jsx","components/Edit Chat/InputField.jsx","components/Edit Chat/AboutTab.jsx","components/Edit Chat/Member.jsx","components/Edit Chat/MembersTab.jsx","components/Edit Chat/RemoveAlertModal.jsx","components/Edit Chat/SettingTab.jsx","components/Edit Chat/EditChat.jsx","components/Edit Chat/CreateChannel.jsx","components/InitAccount/InitAccount.jsx","App.js","reportWebVitals.js","app/store.js","index.js"],"names":["firebaseApp","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","storage","db","firestore","auth","provider","GoogleAuthProvider","appSlice","createSlice","name","initialState","roomId","user","docUserId","dataUpdated","userUid","directMessageUid","isShowingSecondaryWorkspace","directMessageRoomId","selectedUser","messageSend","localTime","roomDetails","directUser","isModalOpen","moves","reducers","enterRoom","state","action","payload","saveUserInfo","reset","initState","getDataState","enterDirectMessage","setUserProfileUid","showSecondaryWorkspace","setSelectedUser","sendMessage","setTime","setRoomDetails","setDirectUser","setIsModalOpen","setMoves","actions","selectRoomId","app","selectUser","selectDocId","selectDataState","selectUserDirect","selectUserProfileUid","selectSecondaryWorkspaceStatus","selectDirectMessageRoom","selectChosenUser","selectLocalTime","selectRoomDetails","selectDirectUser","selectMoves","SignIn","props","className","method","type","onChange","onEmailChange","value","email","required","onPassWordChange","password","onClick","signInEmail","Register","e","confirm","onConfirmChange","register","LogIn","useState","isSignIn","setIsSignIn","setPassword","setConfirm","setEmail","dispatch","useDispatch","useCollection","collection","users","usersLoading","target","useAuthState","signIn","preventDefault","signInWithPopup","then","console","log","data","catch","error","alert","message","signInWithEmailAndPassword","a","userCred","userInf","displayName","emailVerified","uid","photoURL","isOnline","userDb","docs","find","elem","id","err","createUserWithEmailAndPassword","add","doc","DropdownItem","icon","filterText","useSelector","directRooms","loading","directRoom","uids","includes","filterName","slice","indexOf","style","backgroundImage","DropdownSearchMenu","channels","onChannels","setOnChannels","onUsers","setOnUsers","setFilterTex","useEffect","isChannel","test","isUser","disabled","padding","role","map","isPrivate","members","DropdownMove","directDetails","details","filter","undefined","Header","logOut","signOut","update","Dropdown","Toggle","variant","Menu","fontSize","SidebarOption","title","usersHaveReadRoom","setToggle","usersHaveRead","addNewDirect","newMoves","unshift","addMoves","tabIndex","concat","src","alt","class","SidebarCollapse","isShowing","addIcon","options","option","SidebarHeader","height","SmallLoader","SideBar","width","channelList","push","windowWidth","chatWidth","usersList","isSecondaryWorkspaceOpen","chatContainer","document","querySelector","sidebarContainer","sidebarToggler","reportWindowSize","window","innerWidth","offsetWidth","classList","remove","addEventListener","sidebarCollapse","secondaryWorkspace","closeSidebar","isDropdown","ChatInput","channelName","channelId","chatRef","isDirect","input","setInput","current","scrollIntoView","behavior","placeholder","timestamp","FieldValue","serverTimestamp","userImage","ProfileModal","openSecondView","updateTime","currentTime","Date","hours","getHours","minutes","getMinutes","setInterval","Message","userName","description","onHover","setOnHover","time","toDate","getDate","getMonth","sendUserUid","whatIDo","doNothing","onMouseOver","onMouseOut","DayBlockMessages","messages","date","month","year","Chat","useRef","roomLoading","orderBy","roomMessages","roomDirectId","roomDirectMessages","directLoading","directTitle","directImg","directStatus","blocksMessage","getFullYear","config","blocksMessageArr","Object","entries","join","setJoin","membersArr","roomOwner","des","randomUid","ref","Loading","isAnimate","setIsAnimate","animate","setTimeout","InputSection","inputElement","inputInit","imgUrl","setImgUrl","handleImgChange","file","files","storageRef","fileRef","child","put","getDownloadURL","selectedDoc","saveChange","toggle","htmlFor","label","click","EditProfile","notification","setNotification","userData","saveUserToRedux","Reiszer","onMouseDown","SecondaryView","resize","isOpen","InputField","fieldLabel","hyphenized","AboutTab","roomName","roomDes","roomMembers","setName","setDes","changed","setChanged","setAlert","leave","setLeave","index","splice","userDirect","hyphenizedContent","replace","content","Member","addUser","dropdownItem","loginUser","status","toLowerCase","MembersTab","membersList","setIsAdded","searchMemberInput","setSearchMemberInput","searchAddInput","setSearchAddInput","maxHeight","maxWidth","marginLeft","RemoveAlertModal","successLoaded","setSuccessLoaded","SettingTab","isChange","setIsChange","isDelete","setIsDelete","setNoti","defaultRoomId","delete","EditChat","userDirectId","roomOwnerName","CreateChannel","channelLoading","checked","setChecked","added","setAdded","isExist","setIsExist","addChannel","InitAccount","job","setJob","imgURL","setImgURL","setLoading","onSave","setOnSave","notif","setNotif","WhatIDo","inputRef","accept","App","userLoading","setRisze","setStatusToOnline","sideBarWidth","setSideBarWidth","profileWidth","setProfileWidth","handleToggle","$","on","zIndex","length","this","css","not","addClass","onresize","prevX","clientX","mousemove","mouseup","removeEventListener","body","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","persistConfig","key","stateReconciler","autoMergeLevel1","persistedAppReducer","persistReducer","appReducer","configureStore","reducer","persistor","persistStore","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.1dde3818.chunk.js","sourcesContent":["// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nimport firebase from \"firebase\";\r\nimport 'firebase/storage'\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyCmzK2LdP7LkJNXNnQBJxSTX9EOvnIsV-k\",\r\n    authDomain: \"chat-app-ba041.firebaseapp.com\",\r\n    projectId: \"chat-app-ba041\",\r\n    storageBucket: \"chat-app-ba041.appspot.com\",\r\n    messagingSenderId: \"410871016552\",\r\n    appId: \"1:410871016552:web:1ef1149c5824861da5dfdd\",\r\n    measurementId: \"G-BCB1RKDQ3Q\"\r\n  };\r\n\r\n  const firebaseApp = firebase.initializeApp(firebaseConfig);\r\n  const storage = firebaseApp.storage();\r\n  const db = firebaseApp.firestore();\r\n  const auth = firebase.auth()\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n  export {auth, provider, db, storage}","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const appSlice = createSlice({\r\n    name: \"app\",\r\n    initialState:{\r\n        roomId: null,\r\n        user: null,\r\n        docUserId: null,\r\n        dataUpdated: null,\r\n        userUid: null,\r\n        directMessageUid: null,\r\n        isShowingSecondaryWorkspace: null,\r\n        directMessageRoomId: null,\r\n        selectedUser: null,\r\n        messageSend: false,\r\n        localTime: null,\r\n        roomDetails: null,\r\n        directUser: null,\r\n        isModalOpen: null,\r\n        moves: []\r\n    },\r\n    reducers: {\r\n        enterRoom: (state, action) =>{\r\n            state.roomId = action.payload.roomId;\r\n        },\r\n\r\n        saveUserInfo: (state, action) => {\r\n            state.user = action.payload.user;\r\n        },\r\n\r\n        docUserId: (state, action) => {\r\n            state.docUserId = action.payload.docUserId\r\n        },\r\n\r\n        reset: (state, action) => {\r\n            state.roomId = action.payload.initState;\r\n            state.user = action.payload.initState;\r\n            state.dataUpdated = action.payload.initState;\r\n            state.userUid = action.payload.initState;\r\n            state.directMessageUid= action.payload.initState;\r\n            state.isShowingSecondaryWorkspace = action.payload.initState;\r\n            state.docUserId = action.payload.initState;\r\n            state.directMessageRoomId = action.payload.initState;\r\n            state.selectedUser = null;\r\n            state.localTime = null;\r\n            state.roomDetails = null;\r\n            state.directUser = null;\r\n            state.isModalOpen = null;\r\n            state.moves = [];\r\n\r\n        },\r\n        getDataState: (state, action) => {\r\n            state.dataUpdated = action.payload.dataUpdated;\r\n        },\r\n        enterDirectMessage: (state, action) => {\r\n            state.directMessageUid = action.payload.directMessageUid;\r\n            state.directMessageRoomId = action.payload.directMessageRoomId;\r\n        },\r\n        setUserProfileUid:(state, action) => {\r\n            state.userUid = action.payload.userUid;\r\n        },\r\n        showSecondaryWorkspace:(state, action) => {\r\n            state.isShowingSecondaryWorkspace = action.payload.isShowingSecondaryWorkspace;\r\n        },\r\n        setSelectedUser: (state, action) => {\r\n            state.selectedUser = action.payload.selectedUser\r\n        },\r\n        sendMessage :(state, action) => {\r\n            state.messageSend = action.payload.messageSend;\r\n        },\r\n        setTime: (state, action) => {\r\n            state.localTime = action.payload.localTime;\r\n        },\r\n        setRoomDetails: (state, action) => {\r\n            state.roomDetails = action.payload.roomDetails;\r\n        },\r\n        setDirectUser: (state, action) => {\r\n            state.directUser = action.payload.directUser\r\n        },\r\n        setIsModalOpen: (state, action) => {\r\n            state.isModalOpen = action.payload.isModalOpen\r\n        },\r\n        setMoves: (state, action) => {\r\n            state.moves = action.payload.moves\r\n        }\r\n     }\r\n});\r\n\r\nexport const {setMoves, setIsModalOpen, setDirectUser, setRoomDetails, setTime, sendMessage, setSelectedUser, showSecondaryWorkspace,enterRoom, saveUserInfo, docUserId, reset, getDataState, enterDirectMessage, setUserProfileUid} = appSlice.actions;\r\n\r\nexport const selectRoomId = state => state.app.roomId;\r\n\r\nexport const selectUser = state => state.app.user;\r\n\r\nexport const selectDocId = state => state.app.docUserId;\r\n\r\nexport const selectDataState = state => state.app.dataUpdated;\r\n\r\nexport const selectUserDirect = state => state.app.directMessageUid;\r\n\r\nexport const selectUserProfileUid = state => state.app.userUid; \r\n\r\nexport const selectSecondaryWorkspaceStatus = state => state.app.isShowingSecondaryWorkspace;\r\n\r\nexport const selectDirectMessageRoom = state => state.app.directMessageRoomId\r\n\r\nexport const selectChosenUser = state => state.app.selectedUser\r\n\r\nexport const selectMessageSend = state => state.app.messageSend\r\n\r\nexport const selectLocalTime = state => state.app.localTime\r\n\r\nexport const selectRoomDetails = state => state.app.roomDetails\r\n\r\nexport const selectDirectUser = state => state.app.directUser\r\n\r\nexport const selectModalState = state => state.app.isModalOpen\r\n\r\nexport const selectMoves = state => state.app.moves\r\nexport default appSlice.reducer;","import React from 'react'\r\n\r\nfunction SignIn(props){\r\n\r\n\r\n\r\n    return(\r\n        <div className=\"login\">\r\n            <div className=\"col-md-6 img-bg-container\">\r\n\r\n            </div>\r\n\r\n            <div className=\"col-md-6 form-container\">\r\n            \r\n                <span className=\"form__title\">\r\n                    Login to continue\r\n                </span>\r\n                <form method=\"post\">\r\n                    <div className=\"form__input\">\r\n                        \r\n                            \r\n                            <input name=\"form__email\" type=\"text\" className=\"input-area\" onChange={props.onEmailChange} value={props.email} required/>\r\n                            <span className=\"label-span\">Email</span>\r\n                    \r\n                    </div>\r\n                    <div className=\"form__input\">\r\n                       \r\n                            \r\n                            <input name=\"form__password\" type=\"password\" className=\"input-area\" onChange={props.onPassWordChange} value={props.password}  required/>\r\n                            <span className='label-span'>Password</span>\r\n                      \r\n                    </div>\r\n\r\n                    <button onClick={props.signInEmail} type=\"submit\" className=\"form__button\">Sign in</button>\r\n                </form>\r\n                <div className=\"change-form\">\r\n                    \r\n                    <p><span onClick={props.onClick}>REGISTER</span> if you don't have any account</p>\r\n\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignIn\r\n\r\n","import React from 'react'\r\n\r\nfunction Register(props){\r\n    return(\r\n        <div className=\"login\">\r\n            <div className=\"col-md-6 img-bg-container\">\r\n\r\n            </div>\r\n\r\n            <div className=\"col-md-6 form-container\">\r\n            \r\n                <span className=\"form__title\">\r\n                    Register\r\n                </span>\r\n                <form method=\"post\">\r\n                    <div className=\"form__input\">\r\n                        \r\n                            \r\n                            <input name=\"form__email\" type=\"text\" className=\"input-area\" value = {props.email} onChange={(e) => props.onEmailChange(e)} required/>\r\n                            <span className=\"label-span\">Email</span>\r\n                    \r\n                    </div>\r\n                    <div className=\"form__input\">\r\n                       \r\n                            \r\n                            <input name=\"form__password\" type=\"password\" className=\"input-area\" value = {props.password}  onChange={(e) => props.onPassWordChange(e)} required/>\r\n                            <span className='label-span'>Password</span>\r\n                      \r\n                    </div>\r\n\r\n                    <div className=\"form__input\">\r\n                       \r\n                            \r\n                            <input name=\"form__password\" type=\"password\" className=\"input-area\" value = {props.confirm} onChange={(e) => props.onConfirmChange(e)} required/>\r\n                            <span className='label-span'>Confirm Password</span>\r\n                      \r\n                    </div>\r\n\r\n                    <button type=\"submit\" onClick = {props.register}  className=\"form__button\">Sign in</button>\r\n                </form>\r\n\r\n                <div className=\"change-form\">\r\n                    <p><span onClick={props.onClick}>Login</span> if you already have an account</p>\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React, { useState } from 'react'\r\n\r\nimport { auth, db, provider } from '../../firebase';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useCollection } from 'react-firebase-hooks/firestore';\r\nimport { docUserId, saveUserInfo, setUserProfileUid } from '../../features/appSlice';\r\nimport SignIn from './SignIn';\r\nimport Register from './Register';\r\nfunction LogIn(props){\r\n    \r\n    const [isSignIn, setIsSignIn] = useState(true);\r\n    const [password, setPassword] = useState('');\r\n    const [confirm, setConfirm] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const dispatch = useDispatch();\r\n    const [users, usersLoading] = useCollection(db.collection('users'));\r\n    const user = useAuthState(auth);\r\n\r\n    \r\n    function onSignIn(){\r\n        setIsSignIn(false)\r\n    }\r\n\r\n    function onRegister(){\r\n        setIsSignIn(true)\r\n    }\r\n\r\n    function onPassWordChange(e){\r\n        setPassword(e.target.value)\r\n    }\r\n\r\n    function onConfirmChange(e){\r\n        setConfirm(e.target.value)\r\n    }\r\n\r\n    const signIn = (e) => {\r\n        e.preventDefault();\r\n        auth.signInWithPopup(provider).then(user => console.log(user.data())).catch((error) => \r\n        alert(error.message));\r\n    }\r\n    const handleRegister = (e) => {\r\n        e.preventDefault();\r\n        password !== confirm ? alert(\"You type different confirm password!\"):\r\n        auth.createUserWithEmailAndPassword(email, password).then(\r\n            (userCred) => {\r\n                console.log(userCred.user)\r\n                const userInf={\r\n                    displayName: userCred.user.displayName,\r\n                    email: userCred.user.email,\r\n                    emailVerified: userCred.user.emailVerified,\r\n                    uid: userCred.user.uid,\r\n                    photoURL: userCred.user.photoURL,\r\n                    isOnline: true\r\n                }\r\n    \r\n                dispatch(saveUserInfo({user: userInf}));\r\n                db.collection('users').add(userInf).then(doc => dispatch(docUserId({\r\n                    docUserId: doc.id\r\n                })))\r\n            }\r\n                \r\n        )\r\n        .catch(err => alert(err.message))\r\n    }\r\n\r\n    const handleSignIn = (e) => {\r\n        e.preventDefault();\r\n        auth.signInWithEmailAndPassword(email, password)\r\n        .then( async (userCred) => {\r\n            const userInf={\r\n                displayName: userCred.user.displayName,\r\n                email: userCred.user.email,\r\n                emailVerified: userCred.user.emailVerified,\r\n                uid: userCred.user.uid,\r\n                photoURL: userCred.user.photoURL,\r\n                isOnline: true\r\n            }\r\n\r\n            let userDb ;\r\n            if(!usersLoading&&users){\r\n            userDb = users?.docs.find(elem => elem.data().uid === userInf.uid);\r\n            dispatch(saveUserInfo({user: userDb?.data()}));\r\n            dispatch(docUserId({\r\n                docUserId: userDb?.id\r\n            }))\r\n            }\r\n            \r\n        }\r\n        )\r\n        .catch(err => alert(err.message))\r\n    }\r\n\r\n    const onEmailChange = (e) =>{\r\n        setEmail(e.target.value)\r\n    }\r\n\r\n\r\n\r\n\r\n    if(isSignIn) return <SignIn\r\n    onClick = {onSignIn} signIn = {signIn}\r\n    password = {password}\r\n    email = {email}\r\n    onPassWordChange = {onPassWordChange}\r\n    onEmailChange = {onEmailChange}\r\n    signInEmail = {handleSignIn}\r\n\r\n    />\r\n\r\n    else return <Register onClick = {onRegister}\r\n        password = {password}\r\n        confirm ={confirm}\r\n        email = {email}\r\n        onPassWordChange = {onPassWordChange}\r\n        onConfirmChange = {onConfirmChange}\r\n        onEmailChange = {onEmailChange}\r\n        register = {handleRegister}\r\n\r\n\r\n    />\r\n\r\n}\r\n\r\nexport default LogIn;\r\n\r\n\r\n\r\n","import React from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  enterDirectMessage,\r\n  enterRoom,\r\n  selectUser,\r\n  setSelectedUser,\r\n} from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\n\r\nfunction DropdownItem({ icon, name, photoURL, id, uid, filterText }) {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector(selectUser);\r\n  const [directRooms, loading] = useCollection(db.collection(\"directRooms\"));\r\n  const userUid = user?.uid;\r\n  const directRoom = directRooms?.docs.find((doc) => {\r\n    if (uid === userUid)\r\n      return (\r\n        doc.data().uids[0] === doc.data().uids[1] &&\r\n        doc.data().uids.includes(userUid)\r\n      );\r\n    return doc.data().uids.includes(userUid) && doc.data().uids.includes(uid);\r\n  });\r\n\r\n  const selectChannel = () => {\r\n    if (id) {\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageUid: null,\r\n        })\r\n      );\r\n      dispatch(\r\n        enterRoom({\r\n          roomId: id,\r\n        })\r\n      );\r\n    }\r\n  };\r\n\r\n  const enterDirect = () => {\r\n    dispatch(\r\n      enterRoom({\r\n        roomId: null,\r\n      })\r\n    );\r\n\r\n    if (!directRoom && loading==false) {\r\n      db.collection(\"directRooms\").add({\r\n        uids: [userUid, uid],\r\n      });\r\n      console.log(\"added!\");\r\n    }\r\n\r\n    if (directRoom?.id) {\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageUid: uid,\r\n          directMessageRoomId: directRoom?.id,\r\n        })\r\n      );\r\n      dispatch(setSelectedUser({ selectedUser: null }));\r\n    }\r\n  };\r\n//   filter handle\r\n  const filterName = !photoURL?filterText.slice(9):filterText.slice(6);\r\n  if(name?.indexOf(filterName)!=-1)\r\n  return (\r\n    <div\r\n      className=\"dropdown-item list-item\"\r\n      onClick={!photoURL ? selectChannel : enterDirect}\r\n    >\r\n      <div\r\n        style={photoURL ? { backgroundImage: `url(${photoURL})` } : {}}\r\n        className=\"list-item__icon\"\r\n      >\r\n        {icon ? icon : \"\"}\r\n      </div>\r\n      <div className=\"list-item__name\">{name}</div>\r\n    </div>\r\n  );\r\n  else return(\"\");\r\n}\r\n\r\nexport default DropdownItem;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport DropdownItem from \"./DropdownItem\";\r\nimport LockIcon from '@material-ui/icons/Lock';\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"../../features/appSlice\";\r\n\r\nfunction DropdownSearchMenu() {\r\n  const [channels, loading, error] = useCollection(db.collection(\"room\"));\r\n  const [users] = useCollection(db.collection(\"users\"));\r\n  const [onChannels, setOnChannels] = useState(false);\r\n  const [onUsers, setOnUsers] = useState(false);\r\n  const [filterText, setFilterTex] = useState(\"\");\r\n  const filterTextChangeHanler = (e) => {\r\n    setFilterTex(e.target.value);\r\n  };\r\n  const findChannel = () => {\r\n    setFilterTex(\"Channel: \");\r\n  };\r\n\r\n  const findUser = () => {\r\n    setFilterTex(\"User: \");\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isChannel = /^Channel:/.test(filterText);\r\n    let isUser = /^User:/.test(filterText);\r\n    if (isChannel) {\r\n      setOnChannels(true);\r\n    }\r\n    if (isUser) {\r\n      setOnUsers(true);\r\n    }\r\n    return () => {\r\n      setOnUsers(false);\r\n      setOnChannels(false);\r\n    }\r\n  }, [filterText]);\r\n  const user = useSelector(selectUser);\r\n  const uid = user?.uid;\r\n\r\n  return (\r\n    <div className=\"dropdown-menu\"  aria-labelledby=\"dropdownMenuSearchHeader\">\r\n      <div\r\n        className=\"dropdown-item search-bar\"\r\n        disabled\r\n        style={{ padding: \"4px 0px 4px 0px\" }}\r\n      >\r\n        <div className=\"form-group\">\r\n          <SearchIcon className=\"search-icon\" />\r\n          <input\r\n            value={filterText}\r\n            onChange={filterTextChangeHanler}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n          />\r\n        </div>\r\n        <div className=\"badges-group\">\r\n          <div role=\"button\" onClick={findChannel} className=\"badge bg-primary\">\r\n            Channel\r\n          </div>\r\n          <div role=\"button\" onClick={findUser} className=\"badge bg-primary\">\r\n            User\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {onChannels && (\r\n        <>\r\n          {channels?.docs.map((doc) => {\r\n            let isPrivate = doc.data().isPrivate;\r\n            let members = doc.data().members;\r\n            if((members?.includes(uid)&&isPrivate)||!isPrivate)\r\n            return <DropdownItem \r\n            name = {doc.data().name}\r\n            icon = {isPrivate?<LockIcon/>:\"#\"}\r\n            id = {doc.id}\r\n            filterText = {filterText}\r\n            />;\r\n          })}\r\n        </>\r\n      )}\r\n      {\r\n        onUsers&& (\r\n          <>\r\n            {\r\n              users?.docs.map((doc) => {\r\n                return(\r\n                  <DropdownItem\r\n                  name = {doc.data().displayName?doc.data().displayName:doc.data().email}\r\n                  photoURL = {doc.data().photoURL?doc.data().photoURL:\"default-avatar.jpg\"}\r\n                  uid = {doc.data().uid}\r\n                  filterText = {filterText}\r\n                  />\r\n                )\r\n              })\r\n            }\r\n          </>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DropdownSearchMenu;\r\n","import React from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  enterDirectMessage,\r\n  enterRoom,\r\n  selectUser,\r\n} from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\n\r\nfunction DropdownMove({ id }) {\r\n  console.log(id)\r\n  const [roomDetails] = useCollection(id&&db.collection(\"room\").doc(id));\r\n  const [directDetails] = useCollection(id&&db.collection(\"directRooms\").doc(id));\r\n  const details = roomDetails ? roomDetails : directDetails;\r\n  const name = details?.data()?.name;\r\n  const userInf = useSelector(selectUser);\r\n  let uids = directDetails?.data()?.uids;\r\n  let uid = uids?.filter((uid) => {\r\n    return uid !== userInf.uid;\r\n  });\r\n  const directUser = directDetails?.data()?.users\r\n    ? directDetails?.data()?.users[1]\r\n    : undefined;\r\n  const photoURL = directUser?.photoURL\r\n    ? directUser?.photoURL\r\n    : \"default-avatar.jpg\";\r\n  //   Enter room\r\n  const dispatch = useDispatch();\r\n  const enterRoomHandle = () => {\r\n    if (!uid) {\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageUid: null,\r\n          directMessageRoomId: null,\r\n        })\r\n      );\r\n      dispatch(\r\n        enterRoom({\r\n          roomId: id,\r\n        })\r\n      );\r\n    } else if(directDetails) {\r\n      dispatch(\r\n        enterRoom({\r\n          roomId: null,\r\n        })\r\n      );\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageRoomId: id,\r\n          directMessageUid: uids[1],\r\n        })\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"dropdown-item moves-item\" role=\"button\" onClick={enterRoomHandle}>\r\n      <div\r\n        className=\"move__symbol\"\r\n        style={uid ? { backgroundImage: `url(${photoURL})` } : {}}\r\n      >\r\n        {uid ? \"\" : \"#\"}\r\n      </div>\r\n      <span className=\"move__name\">{uid ? directUser?.displayName : name}</span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DropdownMove;\r\n","import React, { useEffect } from \"react\";\r\nimport \"../../css/header.css\";\r\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\nimport { Dropdown } from \"react-bootstrap\";\r\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\r\nimport { auth, db } from \"../../firebase\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  reset,\r\n  saveUserInfo,\r\n  selectDocId,\r\n  selectMoves,\r\n  selectUser,\r\n  setUserProfileUid,\r\n  showSecondaryWorkspace,\r\n} from \"../../features/appSlice\";\r\nimport DropdownSearchMenu from \"./DropdownSearchMenu\";\r\nimport DropdownMove from \"./DropdownMove\";\r\n\r\nfunction Header() {\r\n  const userInf = useSelector(selectUser);\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  const user = users?.docs.find((elem) => elem.data().uid === userInf?.uid);\r\n\r\n  const dispatch = useDispatch();\r\n  const logOut = async () => {\r\n    await auth\r\n      .signOut()\r\n      .then(() => {\r\n        db.collection(\"users\").doc(user?.id).update({\r\n          isOnline: false,\r\n        });\r\n      })\r\n      .catch((error) => alert(error.message));\r\n    dispatch(\r\n      reset({\r\n        initState: null,\r\n      })\r\n    );\r\n  };\r\n\r\n  const email = user?.data().email;\r\n  const displayName = user?.data().displayName;\r\n  const photoURL = user?.data().photoURL;\r\n  // Open profile\r\n  const openProfile = () => {\r\n    dispatch(\r\n      setUserProfileUid({\r\n        userUid: userInf?.uid,\r\n      })\r\n    );\r\n    dispatch(\r\n      showSecondaryWorkspace({\r\n        isShowingSecondaryWorkspace: true,\r\n      })\r\n    );\r\n  };\r\n  // Get Moves\r\n  const moves = useSelector(selectMoves);\r\n  return (\r\n    <div className=\"header-container\">\r\n      {/* Header Left */}\r\n      <div className=\"header__left\">\r\n        <Dropdown className=\"history-dropdown dropdown\">\r\n          <Dropdown.Toggle\r\n            className=\"c-button-unstyled dropdown-toggle\"\r\n            id=\"historyDropdown\"\r\n            variant=\"success\"\r\n          >\r\n            <AccessTimeIcon className=\"access-time-icon\" />\r\n          </Dropdown.Toggle>\r\n          <Dropdown.Menu\r\n            className=\"dropdown-menu\"\r\n            aria-labelledby=\"historyDropdown\"\r\n          >\r\n            <div aria-hidden=\"true\" className=\"c-menu_item__header\">\r\n              Recent\r\n            </div>\r\n            {moves?.map((id) => {\r\n              return (\r\n                <DropdownMove id = {id}/>\r\n              )\r\n            })}\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n      </div>\r\n      {/* Header Search */}\r\n     \r\n        <div className=\"dropdown header__search\">\r\n\r\n          <div\r\n            className=\"header__search--inner\"\r\n            id=\"dropdownMenuSearchHeader\"\r\n            role=\"button\"\r\n            data-bs-toggle=\"dropdown\"\r\n            aria-expanded=\"false\"\r\n            data-bs-auto-close = \"outside\"\r\n          >\r\n            \r\n            <SearchIcon />\r\n          </div>\r\n\r\n          <DropdownSearchMenu />\r\n        </div>\r\n    \r\n\r\n      {/* Header Right */}\r\n      <div className=\"header__right\">\r\n        <Dropdown className=\"history-dropdown dropdown\">\r\n          <Dropdown.Toggle\r\n            className=\"c-button-unstyled dropdown-toggle\"\r\n            id=\"historyDropdown\"\r\n            variant=\"success\"\r\n          >\r\n            <HelpOutlineIcon />\r\n          </Dropdown.Toggle>\r\n          <Dropdown.Menu\r\n            className=\"dropdown-menu\"\r\n            aria-labelledby=\"historyDropdown\"\r\n          >\r\n            <div aria-hidden=\"true\" className=\"c-menu_item__header\">\r\n              This functionality is currently unavailable\r\n            </div>\r\n          </Dropdown.Menu>\r\n        </Dropdown>\r\n        <div className=\"header__avatar\">\r\n          <Dropdown className=\"user-dropdown dropdown\">\r\n            <Dropdown.Toggle\r\n              className=\"c-button-unstyled dropdown-toggle\"\r\n              id=\"historyDropdown\"\r\n              variant=\"success\"\r\n            >\r\n              <div\r\n                className=\"user-avatar\"\r\n                style={{\r\n                  backgroundImage: `url(${\r\n                    photoURL ? photoURL : \"default-avatar.jpg\"\r\n                  })`,\r\n                }}\r\n              ></div>\r\n            </Dropdown.Toggle>\r\n            <Dropdown.Menu\r\n              className=\"dropdown-menu\"\r\n              aria-labelledby=\"historyDropdown\"\r\n            >\r\n              <div className=\"dropdown-item main-menu__user\">\r\n                <div\r\n                  className=\"main-menu__user__avatar\"\r\n                  style={{\r\n                    backgroundImage: `url(${\r\n                      photoURL ? photoURL : \"default-avatar.jpg\"\r\n                    })`,\r\n                  }}\r\n                ></div>\r\n                <div className=\"main-menu__user__details\">\r\n                  <div className=\"main-menu__user__name\">\r\n                    {displayName ? displayName : email}\r\n                  </div>\r\n                  <span className=\"main-menu__user__status\">\r\n                    <FiberManualRecordIcon style={{ fontSize: \"small\" }} />\r\n                    Active\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div className=\"dropdown-item\" onClick={logOut}>\r\n                Sign Out\r\n              </div>\r\n              <div\r\n                className=\"dropdown-item\"\r\n                data-bs-toggle=\"modal\"\r\n                data-bs-target=\"#editProfile\"\r\n              >\r\n                Edit profile\r\n              </div>\r\n              <div className=\"dropdown-item\" onClick={openProfile}>\r\n                View profile\r\n              </div>\r\n            </Dropdown.Menu>\r\n          </Dropdown>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  enterDirectMessage,\r\n  enterRoom,\r\n  selectDirectMessageRoom,\r\n  selectMoves,\r\n  selectRoomId,\r\n  selectUser,\r\n  selectUserDirect,\r\n  setMoves,\r\n  setSelectedUser,\r\n} from \"../../features/appSlice\";\r\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport firebase from \"firebase\";\r\n\r\nfunction SidebarOption({\r\n  icon,\r\n  title,\r\n  photoURL,\r\n  uid,\r\n  id,\r\n  email,\r\n  isOnline,\r\n  isUser,\r\n  usersHaveReadRoom,\r\n  isPrivate,\r\n  members,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const seeAllDm = () => {};\r\n  const directMessageUid = useSelector(selectUserDirect);\r\n  const directMessageRoomId = useSelector(selectDirectMessageRoom);\r\n  const user = useSelector(selectUser);\r\n  const userUid = user?.uid;\r\n  const [directRooms, loading] = useCollection(db.collection(\"directRooms\"));\r\n  const [users] = useCollection(db.collection(\"users\"));\r\n  const [toggle, setToggle] = useState(false);\r\n  const directRoom = directRooms?.docs.find((doc) => {\r\n    if (uid === userUid)\r\n      return (\r\n        doc.data().uids[0] === doc.data().uids[1] &&\r\n        doc.data().uids.includes(userUid)\r\n      );\r\n    return doc.data().uids.includes(userUid) && doc.data().uids.includes(uid);\r\n  });\r\n\r\n  const usersHaveRead = directRoom?.data().usersHaveRead;\r\n  const addNewDirect = async () => {\r\n    if (!directRoom && uid && !loading) {\r\n      await db\r\n        .collection(\"directRooms\")\r\n        .add({\r\n          uids: [userUid, uid],\r\n        })\r\n        .then((doc) => {\r\n          db.collection(\"directRooms\")\r\n            .doc(doc.id)\r\n            .update({\r\n              users: [\r\n                users?.docs.find((doc) => doc.data().uid === userUid)?.data(),\r\n                users?.docs.find((doc) => doc.data().uid === uid)?.data(),\r\n              ],\r\n            });\r\n        });\r\n      console.log(\"added!\");\r\n    }\r\n  };\r\n  const selectChannel = () => {\r\n    if (id) {\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageUid: null,\r\n        })\r\n      );\r\n      dispatch(\r\n        enterRoom({\r\n          roomId: id,\r\n        })\r\n      );\r\n      db.collection(\"room\")\r\n        .doc(id)\r\n        .update({\r\n          usersHaveRead: usersHaveReadRoom\r\n            ? usersHaveReadRoom.concat(user.uid)\r\n            : [userUid],\r\n        });\r\n    }\r\n  };\r\n  const selectPerson = () => {\r\n    setToggle(true);\r\n    dispatch(\r\n      enterRoom({\r\n        roomId: null,\r\n      })\r\n    );\r\n\r\n    if (directRoom?.id) {\r\n      dispatch(\r\n        enterDirectMessage({\r\n          directMessageUid: uid,\r\n          directMessageRoomId: directRoom?.id,\r\n        })\r\n      );\r\n  \r\n      db.collection(\"directRooms\")\r\n        .doc(directRoom.id)\r\n        .update({\r\n          usersHaveRead: usersHaveRead\r\n            ? usersHaveRead.concat(user.uid)\r\n            : [userUid],\r\n        });\r\n    }\r\n  };\r\n  // Handle send message button\r\n\r\n  useEffect(() => {\r\n    addNewDirect();\r\n    return () => {\r\n      setToggle(false);\r\n    };\r\n  }, [directMessageUid, directMessageRoomId, loading]);\r\n\r\n  const defaultRoomId = \"CcfrQCURBPLWpn6lj0k8\";\r\n\r\n  const roomId = useSelector(selectRoomId);\r\n  // Save moves\r\n  let moves = useSelector(selectMoves);\r\n  const addMoves = (id) => {\r\n    let newMoves = moves?.filter((a) => {\r\n      return a != id;\r\n    });\r\n    newMoves.unshift(id);\r\n    dispatch(\r\n      setMoves({\r\n        moves: newMoves,\r\n      })\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    addMoves(roomId ? roomId : directMessageRoomId);\r\n  }, [roomId, directMessageUid]);\r\n\r\n  //\r\n  if (members?.includes(user.uid) || isUser || id === defaultRoomId)\r\n    return (\r\n      <div\r\n        className={\r\n          roomId === id || directMessageUid === uid\r\n            ? \"sidebar__option-container active\"\r\n            : \"sidebar__option-container\"\r\n        }\r\n        tabIndex=\"1\"\r\n        role=\"button\"\r\n        onClick={\r\n          id && !isUser ? selectChannel : isUser ? selectPerson : seeAllDm\r\n        }\r\n      >\r\n        {icon && <div className=\"sidebar__icon\">{icon}</div>}\r\n        {icon ? (\r\n          <div className=\"sidebar__option__title\">{title}</div>\r\n        ) : (\r\n          <div className=\"sidebar__option__channel\">\r\n            {!isUser ? (\r\n              !isPrivate ? (\r\n                <span>#</span>\r\n              ) : (\r\n                <LockIcon />\r\n              )\r\n            ) : photoURL ? (\r\n              <img src={photoURL} alt=\"avatar\" />\r\n            ) : (\r\n              <img src=\"default-avatar.jpg\" alt=\"avatar\" />\r\n            )}\r\n            <FiberManualRecordIcon\r\n              className={\r\n                isUser\r\n                  ? isOnline\r\n                    ? \"status online\"\r\n                    : \"status offline\"\r\n                  : \"no-status\"\r\n              }\r\n            />\r\n            {title ? title : email}\r\n          </div>\r\n        )}\r\n        {!(\r\n          usersHaveRead?.includes(userUid) ||\r\n          usersHaveReadRoom?.includes(userUid)\r\n        ) &&\r\n          !icon && (\r\n            <span class=\"position-absolute  translate-middle p-1 bg-danger border border-light rounded-circle unread-notification\">\r\n              <span class=\"visually-hidden\">New alerts</span>\r\n            </span>\r\n          )}\r\n      </div>\r\n    );\r\n  else return <div />;\r\n}\r\n\r\nexport default SidebarOption;\r\n","import React from 'react'\r\nimport { db } from '../../firebase';\r\n\r\nfunction SidebarCollapse(props){\r\n    let isShowing = false;\r\n    \r\n    const showHandler = () => {\r\n        isShowing = !isShowing\r\n    }\r\n    return(\r\n        <div className=\"collapse-container\">\r\n            <div className=\"sidebar__option-container\"\r\n            type=\"button\" data-bs-toggle=\"collapse\" data-bs-target={`#${props.id}`} aria-expanded=\"true\" aria-controls={`${props.id}`}\r\n            onClick={showHandler}\r\n            >\r\n                <div className={isShowing? props.title===\"Channels\"?\"item-icon arrow-rotate\":\"item-icon\":\"item-icon\"}>\r\n                    {props.icon}\r\n                </div>\r\n                <div className=\"item-title\">\r\n                    {props.title}\r\n                </div>\r\n                \r\n            </div>\r\n            {\r\n            props.addIcon && <div className= \"add-channel-button\" role=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#createChannel\">\r\n                {props.addIcon}\r\n            </div>        \r\n            }\r\n        \r\n            <div className=\"collapse\" id={`${props.id}`}>\r\n                {props.options && props.options.map((option) =>{return option})}\r\n            </div>\r\n        \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SidebarCollapse\r\n","import React from \"react\";\r\nimport KeyboardArrowDownIcon from \"@material-ui/icons/KeyboardArrowDown\";\r\nimport SendRoundedIcon from \"@material-ui/icons/SendRounded\";\r\nfunction SidebarHeader() {\r\n  return (\r\n    <div>\r\n      <div className=\"dropdown general-dropdown\">\r\n        <div className=\"side-bar__header \">\r\n          <div\r\n            className=\"side-bar__header__button dropdown-toggle\"\r\n            id=\"fetchGeneralInfo\"\r\n            data-bs-toggle=\"dropdown\"\r\n            aria-expanded=\"false\"\r\n          >\r\n            <div className=\"side-bar__header__info \">\r\n              <button className=\"side-bar__header__team-name c-button-unstyled\">\r\n                <span>Fetch</span>\r\n                <KeyboardArrowDownIcon />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <button className=\"c-button-unstyled send-button\">\r\n            <SendRoundedIcon style={{ height: 16 }} />\r\n          </button>\r\n          <ul className=\"dropdown-menu\" aria-labelledby=\"fetchGeneralInfo\">\r\n            <div aria-hidden=\"true\" className=\"c-menu_item__header\">\r\n              <div className=\"server-logo\">\r\n                <big>\r\n                  <strong>F</strong>\r\n                </big>\r\n              </div>\r\n              <span>Fetch</span>\r\n            </div>\r\n            <div\r\n              className=\"dropdown-item\"\r\n              role=\"button\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#createChannel\"\r\n            >\r\n              Create channel\r\n            </div>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SidebarHeader;\r\n","import React from 'react'\r\nimport \"../css/loading.css\"\r\nfunction SmallLoader() {\r\n    return (\r\n        <div className=\"loader\"></div>\r\n    )\r\n}\r\n\r\nexport default SmallLoader\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"../../css/sidebar.css\";\r\nimport SidebarOption from \"./SidebarOption\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\nimport ForumIcon from \"@material-ui/icons/Forum\";\r\nimport AlternateEmailIcon from \"@material-ui/icons/AlternateEmail\";\r\nimport ArrowRightIcon from \"@material-ui/icons/ArrowRight\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport { db } from \"../../firebase\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport SidebarCollapse from \"./SidebarCollapse\";\r\nimport SidebarHeader from \"./SidebarHeader\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  selectDirectMessageRoom,\r\n  selectSecondaryWorkspaceStatus,\r\n  selectUser,\r\n} from \"../../features/appSlice\";\r\nimport SmallLoader from \"../SmallLoader\";\r\nfunction SideBar({ width }) {\r\n  const [channels, loading, error] = useCollection(db.collection(\"room\"));\r\n  const user = useSelector(selectUser);\r\n  const [users, usersLoading, usersError] = useCollection(\r\n    db.collection(\"users\")\r\n  );\r\n  const [directRooms] = useCollection(db.collection(\"directRooms\"));\r\n  const channelList = [];\r\n\r\n  channels?.docs.map((doc) =>\r\n    channelList.push(\r\n      <SidebarOption\r\n        title={doc.data().name}\r\n        key={doc.id}\r\n        id={doc.id}\r\n        isPrivate={doc.data().isPrivate}\r\n        usersHaveReadRoom={doc.data().usersHaveRead}\r\n        members={doc.data().members}\r\n      />\r\n    )\r\n  );\r\n  const usersList = [];\r\n  users?.docs.map((doc) =>\r\n    usersList.push(\r\n      <SidebarOption\r\n        title={doc.data().displayName}\r\n        email={doc.data().email}\r\n        key={doc.id}\r\n        uid={doc.data().uid}\r\n        photoURL={doc.data().photoURL}\r\n        isOnline={doc.data().isOnline}\r\n        isUser={true}\r\n      />\r\n    )\r\n  );\r\n  // Collapse sidebar handle\r\n  let windowWidth;\r\n  let chatWidth;\r\n  const isSecondaryWorkspaceOpen = useSelector(selectSecondaryWorkspaceStatus);\r\n  useEffect(() => {\r\n    const chatContainer = document.querySelector(\".chat-container\");\r\n    const sidebarContainer = document.querySelector(\".side-bar-container\");\r\n    const sidebarToggler = document.querySelector(\r\n      \".sidebar-toggle-button.c-button-unstyled\"\r\n    );\r\n\r\n    const reportWindowSize = () => {\r\n      windowWidth = window.innerWidth;\r\n      chatWidth = chatContainer.offsetWidth;\r\n      if ((windowWidth < 706&&windowWidth>=576)) {\r\n        sidebarContainer?.classList.add(\"sidebar-collapse\");\r\n        sidebarToggler?.classList.remove(\"collapse\");\r\n        console.log(\"first condition\");\r\n        chatContainer?.classList.remove(\"collapse\");\r\n      } \r\n      else if(windowWidth < 576&&isSecondaryWorkspaceOpen){\r\n        chatContainer?.classList.add(\"collapse\")\r\n      }\r\n      else if(windowWidth < 576|| chatWidth < 400){\r\n        sidebarContainer?.classList.add(\"sidebar-collapse\");\r\n        sidebarToggler?.classList.remove(\"collapse\");\r\n        chatContainer?.classList.remove(\"collapse\")\r\n      }\r\n      else {\r\n        chatContainer?.classList.remove(\"collapse\")\r\n        sidebarToggler?.classList.add(\"collapse\");\r\n        sidebarContainer?.classList.remove(\"sidebar-collapse\");\r\n        sidebarContainer?.classList.remove(\"sidebar-float\");\r\n      }\r\n    };\r\n    reportWindowSize();\r\n    window.addEventListener(\"resize\", reportWindowSize);\r\n  },);\r\n\r\n  useEffect(() => {\r\n    const sidebarCollapse = document.querySelector(\".sidebar-collapse\");\r\n    const chatContainer = document.querySelector(\".chat-container\");\r\n    const secondaryWorkspace = document.querySelector(\r\n      \".secondary-view-container\"\r\n    );\r\n    const closeSidebar = () => {\r\n      sidebarCollapse?.classList.remove(\"sidebar-float\");\r\n    };\r\n\r\n    chatContainer?.addEventListener(\"click\", closeSidebar);\r\n    secondaryWorkspace?.addEventListener(\"click\", closeSidebar);\r\n  });\r\n\r\n  return (\r\n    <div className=\"side-bar-container\" style={{ width: width }}>\r\n      {loading && usersLoading ? (\r\n        <SmallLoader />\r\n      ) : (\r\n        <>\r\n          <SidebarHeader />\r\n          <SidebarCollapse\r\n            options={[\r\n              <SidebarOption\r\n                title=\"All Unreads\"\r\n                icon={<ForumIcon />}\r\n                isDropdown={true}\r\n              />,\r\n              <SidebarOption\r\n                title=\"Mentions & reactions\"\r\n                icon={<AlternateEmailIcon />}\r\n                isDropdown={true}\r\n              />,\r\n            ]}\r\n            id={\"browseslack\"}\r\n            title=\"Browse Slack\"\r\n            icon={<MoreVertIcon />}\r\n          />\r\n\r\n          <SidebarCollapse\r\n            title=\"Channels\"\r\n            icon={<ArrowRightIcon />}\r\n            id={\"channels\"}\r\n            addIcon={<AddIcon />}\r\n            options={channelList}\r\n          />\r\n\r\n          <SidebarCollapse\r\n            title=\"Direct Message\"\r\n            icon={<ArrowRightIcon />}\r\n            id=\"directmessage\"\r\n            options={usersList}\r\n          />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SideBar;\r\n","import React, { useState } from 'react'\r\nimport { db } from '../../firebase';\r\nimport firebase from 'firebase';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from '../../features/appSlice';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nfunction ChatInput({channelName, channelId, chatRef, isDirect}) {\r\n    const user = useSelector(selectUser);\r\n    const [input, setInput] = useState(\"\");\r\n    const sendMessage = (e) => {\r\n        e.preventDefault();\r\n        if(input!=\"\"){\r\n       \r\n        if(!channelId) return false;\r\n        if(!isDirect){\r\n        db.collection(\"room\").doc(channelId).collection(\"messages\").add({\r\n            message: input,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            user: user.displayName,\r\n            userImage: user.photoURL,\r\n            uid: user.uid\r\n        });\r\n        db.collection(\"room\").doc(channelId).update({\r\n            usersHaveRead: [user.uid]\r\n        })\r\n        }\r\n        else {db.collection(\"directRooms\").doc(channelId).collection(\"messages\").add({\r\n            message: input,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            user: user.displayName,\r\n            userImage: user.photoURL,\r\n            uid: user.uid\r\n            });\r\n            db.collection(\"directRooms\").doc(channelId).update({\r\n                usersHaveRead: [user.uid]\r\n            })\r\n        }\r\n        setInput(\"\")}\r\n    }\r\n    chatRef?.current?.scrollIntoView({\r\n        behavior:\"smooth\"\r\n    });\r\n\r\n    const inputChangeHandler = (e) => {\r\n        setInput(e.target.value)\r\n    }\r\n    return (\r\n        <div className=\"chat-input-container\">\r\n            <form >\r\n                <input value={input} type=\"text\" onChange={inputChangeHandler} placeholder={`Message #${channelName}`} />\r\n                <button onClick={(e) => sendMessage(e)} type=\"submit\" className=\"c-button-unstyled send-button\"><SendIcon/></button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatInput\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { enterDirectMessage, selectChosenUser, selectLocalTime, selectMessageSend, selectUser, sendMessage, setTime, showSecondaryWorkspace } from '../../features/appSlice'\r\nimport SmallLoader from '../SmallLoader'\r\nimport FiberManualRecordIcon from '@material-ui/icons/FiberManualRecord';\r\n\r\nfunction ProfileModal({loading}) {\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(selectUser);\r\n    const selectedUser = useSelector(selectChosenUser);\r\n    const photoURL = selectedUser?.photoURL;\r\n    const displayName  = selectedUser?.displayName;\r\n    const uid = selectedUser?.uid;\r\n    const email = selectedUser?.email;\r\n    const isOnline = selectedUser?.isOnline\r\n    const openSecondView = () => {\r\n        dispatch(showSecondaryWorkspace({\r\n            isShowingSecondaryWorkspace: true\r\n        }))\r\n    }\r\n    // Handle sending message\r\n    const sendMessage = () => {\r\n        console.log(\"?\")\r\n        dispatch(enterDirectMessage({\r\n            directMessageUid: uid\r\n        }))\r\n        \r\n        \r\n       \r\n    }\r\n\r\n    // Set up local time\r\n    const localTime = useSelector(selectLocalTime);\r\n    const updateTime = () => {\r\n        var currentTime = new Date()\r\n        var hours = currentTime.getHours()\r\n        var minutes = currentTime.getMinutes()\r\n        if (minutes < 10){\r\n        minutes = \"0\" + minutes\r\n        }\r\n        var localTime = hours + \":\" + minutes + \" \";\r\n       \r\n        dispatch(setTime({\r\n            localTime: localTime\r\n        }))\r\n    }\r\n\r\n    useEffect(() => {\r\n        setInterval(updateTime, 1000)\r\n       \r\n    }, [localTime])\r\n    return (\r\n        <div id = \"profileModal\"  className=\"modal\"  aria-hidden=\"true\" tabIndex=\"-1\" aria-labelledby=\"profileModal\">\r\n            <div className=\"modal-dialog modal-dialog-centered\">\r\n            \r\n                <div className=\"modal-content profile-card\">\r\n                {loading?<SmallLoader/>:\r\n                <>\r\n                    <div className=\"profile-card__header\">\r\n                        <div role=\"button\" data-bs-dismiss=\"modal\" onClick={openSecondView} className=\"profile-card__picture\" style = {{backgroundImage: `url(${photoURL})`}}>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"profile-card__name\">\r\n                        <div className=\"profile-card__name__title\" role=\"button\" onClick={openSecondView} data-bs-dismiss=\"modal\">\r\n                            {displayName}\r\n                        </div>\r\n                        <div className={isOnline?\"profile-card__name__status online\": \"profile-card__name__status\"}>\r\n                            <FiberManualRecordIcon className=\"status\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"profile-card__link\" role=\"button\" onClick={openSecondView} data-bs-dismiss=\"modal\" data-bs-target=\".editChat\">\r\n                        View full profile\r\n                    </div>\r\n\r\n                    <div className=\"profile-card__time-field\">\r\n                        <div className=\"profile-card__time-field__label\">\r\n                        Local time\r\n                        </div>\r\n                        <div className=\"profile-card__time-field__value\">\r\n                            {localTime}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"profile-card__buttons\">\r\n                        <button className=\"c-button--medium c-button\" onClick={sendMessage} data-bs-dismiss=\"modal\">Message</button>\r\n                        {user?.uid === uid&&<button className=\"c-button--medium c-button\" data-bs-toggle=\"modal\" data-bs-dismiss=\"modal\" data-bs-target=\"#editProfile\">Edit Profile</button>}\r\n                    </div>\r\n\r\n\r\n                </>\r\n                }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileModal\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  enterDirectMessage,\r\n  selectRoomId,\r\n  selectUser,\r\n  selectUserProfileUid,\r\n  setSelectedUser,\r\n  setUserProfileUid,\r\n  showSecondaryWorkspace,\r\n} from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\nimport ProfileModal from \"./ProfileModal\";\r\n\r\nfunction Message({ userName, userImage, message, timestamp, uid, description }) {\r\n  const userInf = useSelector(selectUser);\r\n  const displayName = userInf?.uid === uid ? \"You\" : userName;\r\n  const [onHover, setOnHover] = useState(false);\r\n  const roomId = useSelector(selectRoomId)\r\n\r\n  // Save selected user Info\r\n\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  const userUid = useSelector(selectUserProfileUid);\r\n  const user = users?.docs.find((elem) => elem.data().uid === userUid);\r\n  const photoURL = user?.data().photoURL\r\n    ? user.data().photoURL\r\n    : \"default-avatar.jpg\";\r\n  const isOnline = user?.data().isOnline;\r\n  const time = new Date(timestamp?.toDate());\r\n  var date = time.getDate();\r\n  var month = time.getMonth();\r\n  var hours = time.getHours();\r\n  var minutes = time.getMinutes();\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n  var localTime = hours + \":\" + minutes + \" \";\r\n  //\r\n\r\n  const hoverHandler = () => {\r\n    setOnHover(true);\r\n  };\r\n  const notHoverHandler = () => {\r\n    setOnHover(false);\r\n  };\r\n  const dispatch = useDispatch();\r\n  const sendUserUid = () => {\r\n    if (!loading) {\r\n      dispatch(\r\n        setUserProfileUid({\r\n          userUid: uid,\r\n        })\r\n      );\r\n      // Save selected User Inf\r\n\r\n      console.log(\"dispatched\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(\r\n      setSelectedUser({\r\n        selectedUser: {\r\n          displayName: user?.data().displayName,\r\n          email: user?.data().email,\r\n          uid: userUid,\r\n          photoURL: photoURL,\r\n          isOnline: isOnline,\r\n          whatIDo: user?.data().whatIDo,\r\n        },\r\n      })\r\n    );\r\n  }, [loading, userUid, userInf]);\r\n  const doNothing = () => {}\r\n  return (\r\n    <div\r\n      className={onHover ? \"message-container active\" : \"message-container\"}\r\n      onMouseOver={hoverHandler}\r\n      onMouseOut={notHoverHandler}\r\n    >\r\n      {(timestamp||(description)) && (\r\n        <>\r\n          <div\r\n            style={{ backgroundImage: `url(${userImage})` }}\r\n            alt=\"\"\r\n            role=\"button\"\r\n            onClick={uid?sendUserUid:doNothing}\r\n            data-bs-toggle={uid?\"modal\":\"false\"}\r\n            data-bs-target=\"#profileModal\"\r\n            className=\"message__avatar\"\r\n          />\r\n\r\n          <div className=\"message__info\">\r\n            <div className=\"status\">\r\n              <a\r\n                role=\"button\"\r\n                onClick={uid?sendUserUid:doNothing}\r\n                data-bs-toggle={uid?\"modal\":\"false\"}\r\n                data-bs-target=\"#profileModal\"\r\n              >\r\n                {description?userName:displayName}\r\n              </a>{\" \"}\r\n              <span>{description?\"\":localTime}</span>\r\n            </div>\r\n            <p className=\"message\">{message}</p>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\n\r\nfunction DayBlockMessages({ time, messages, uid, timestamp }) {\r\n\r\n  return (\r\n    <div className=\"day-block-messages__container\">\r\n\r\n          {(timestamp||!uid)&&(\r\n            <div className=\"day-block-messages__divider\">\r\n              <div className=\"day-block-messages__divider-line\"></div>\r\n              <div className=\"day-block-messages__label\">\r\n                {time.date + \"/\" + time.month + \"/\" + time.year}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {messages?.map((doc) => doc)}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DayBlockMessages;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"../../css/chat.css\";\r\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\r\nimport {\r\n  enterDirectMessage,\r\n  enterRoom,\r\n  selectChosenUser,\r\n  selectDirectMessageRoom,\r\n  selectRoomId,\r\n  selectUser,\r\n  selectUserDirect,\r\n  setDirectUser,\r\n  setRoomDetails,\r\n  setUserProfileUid,\r\n  showSecondaryWorkspace,\r\n} from \"../../features/appSlice\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport ChatInput from \"./ChatInput\";\r\nimport Message from \"./Message\";\r\nimport SmallLoader from \"../SmallLoader\";\r\nimport DayBlockMessages from \"./DayBlockMessages\";\r\nimport firebase from \"firebase\";\r\nimport DehazeIcon from \"@material-ui/icons/Dehaze\";\r\n\r\nfunction Chat() {\r\n  const dispatch = useDispatch();\r\n  const chatRef = useRef(null);\r\n  const user = useSelector(selectUser);\r\n  const defaultRoomId = \"CcfrQCURBPLWpn6lj0k8\";\r\n  // Room message\r\n  const roomId = useSelector(selectRoomId);\r\n  const directMessageUid = useSelector(selectUserDirect);\r\n\r\n  if (!roomId && !directMessageUid) {\r\n    dispatch(\r\n      enterRoom({\r\n        roomId: defaultRoomId,\r\n      })\r\n    );\r\n  }\r\n  const [roomDetails, roomLoading] = useCollection(\r\n    roomId && db.collection(\"room\").doc(roomId)\r\n  );\r\n\r\n  const [roomMessages, loading] = useCollection(\r\n    roomId &&\r\n      db\r\n        .collection(\"room\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n  );\r\n\r\n  // Direct message\r\n  const roomDirectId = useSelector(selectDirectMessageRoom);\r\n  const [users, usersLoading] = useCollection(db.collection(\"users\"));\r\n  const directUser = users?.docs.find(\r\n    (doc) => doc.data().uid === directMessageUid\r\n  );\r\n  const [roomDirectMessages, directLoading] = useCollection(\r\n    roomDirectId &&\r\n      db\r\n        .collection(\"directRooms\")\r\n        .doc(roomDirectId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n  );\r\n  const directTitle = directUser?.data()?.displayName\r\n    ? directUser?.data().displayName\r\n    : directUser?.data().email;\r\n  const directImg = directUser?.data()?.photoURL;\r\n  const directStatus = directUser?.data()?.isOnline;\r\n  //\r\n  // Open profile\r\n  //\r\n  useEffect(() => {\r\n    chatRef?.current?.scrollIntoView({\r\n      behavior: \"smooth\",\r\n    });\r\n  }, [roomId, loading, directLoading]);\r\n  //   Create block message\r\n  const blocksMessage = {};\r\n  roomId\r\n    ? roomMessages?.docs.map((doc) => {\r\n        const { message, timestamp, user, userImage, uid } = doc.data();\r\n        const time = new Date(timestamp?.toDate());\r\n        var date = time.getDate();\r\n        var year = time.getFullYear();\r\n        var month = time.getMonth();\r\n        var config = date + \":\" + month + \":\" + year;\r\n        var hours = time.getHours();\r\n        var minutes = time.getMinutes();\r\n        if (minutes < 10) {\r\n          minutes = \"0\" + minutes;\r\n        }\r\n        if (!blocksMessage[config]) blocksMessage[config] = [];\r\n        if (!blocksMessage[config].time)\r\n          blocksMessage[config][\"time\"] = {\r\n            date: date,\r\n            year: year,\r\n            month: month,\r\n          };\r\n        blocksMessage[config][\"timestamp\"] = timestamp;\r\n        blocksMessage[config].push(\r\n          <Message\r\n            key={doc.id}\r\n            message={message}\r\n            timestamp={timestamp}\r\n            userName={user}\r\n            userImage={userImage}\r\n            uid={uid}\r\n            isDirect={false}\r\n          />\r\n        );\r\n      })\r\n    : roomDirectMessages?.docs.map((doc) => {\r\n        const { message, timestamp, user, userImage, uid } = doc.data();\r\n        const time = new Date(timestamp?.toDate());\r\n        var date = time.getDate();\r\n        var year = time.getFullYear();\r\n        var month = time.getMonth();\r\n        var config = date + \":\" + month + \":\" + year;\r\n        var hours = time.getHours();\r\n        var minutes = time.getMinutes();\r\n        if (minutes < 10) {\r\n          minutes = \"0\" + minutes;\r\n        }\r\n        if (!blocksMessage[config]) blocksMessage[config] = [];\r\n        if (!blocksMessage[config].time) {\r\n          blocksMessage[config][\"time\"] = {\r\n            date: date,\r\n            year: year,\r\n            month: month,\r\n          };\r\n        }\r\n        blocksMessage[config][\"timestamp\"] = timestamp;\r\n        blocksMessage[config].push(\r\n          <Message\r\n            key={doc.id}\r\n            message={message}\r\n            timestamp={timestamp}\r\n            userName={user}\r\n            userImage={userImage}\r\n            uid={uid}\r\n            isDirect={true}\r\n          />\r\n        );\r\n      });\r\n  const blocksMessageArr = Object.entries(blocksMessage);\r\n  // Save room info\r\n  useEffect(() => {\r\n    if (!roomLoading) {\r\n      dispatch(setRoomDetails({ roomDetails: roomDetails?.data() }));\r\n    }\r\n  }, [roomId, roomDetails]);\r\n  // Save user direct info\r\n  useEffect(() => {\r\n    if (!usersLoading) {\r\n      dispatch(\r\n        setDirectUser({\r\n          directUser: directUser?.data(),\r\n        })\r\n      );\r\n    }\r\n  }, [roomDirectId]);\r\n  // Input preveiew\r\n  const members = roomDetails?.data()?.members;\r\n  const membersArr = members?.slice();\r\n  const [join, setJoin] = useState(false);\r\n  const joinChat = () => {\r\n    setJoin(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (join && !roomLoading) {\r\n      let membersArr = members?.slice();\r\n      if (!membersArr) membersArr = [];\r\n      membersArr.push(user.uid);\r\n      console.log(membersArr);\r\n      db.collection(\"room\")\r\n        .doc(roomId)\r\n        .update({\r\n          members: membersArr,\r\n        })\r\n        .then(() => {\r\n          let input = `joined #${roomDetails.data().name}.`;\r\n          db.collection(\"room\").doc(roomId).collection(\"messages\").add({\r\n            message: input,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            user: user.displayName,\r\n            userImage: user.photoURL,\r\n            uid: user.uid,\r\n          });\r\n        });\r\n    }\r\n    return () => {\r\n      setJoin(false);\r\n    };\r\n  }, [join, roomLoading]);\r\n  // Toggler for sidebar\r\n  const openSidebar = () => {\r\n    let sidebarContainer = document.querySelector(\".side-bar-container\");\r\n    sidebarContainer?.classList.add(\"sidebar-float\");\r\n  };\r\n  return (\r\n    <div className=\"chat-container\">\r\n      {loading || directLoading || usersLoading ? (\r\n        <SmallLoader />\r\n      ) : (\r\n        <>\r\n          <div className=\"chat__header\">\r\n            <div className=\"chat__header__left\">\r\n              <div\r\n                onClick={openSidebar}\r\n                className=\"sidebar-toggle-button c-button-unstyled chat__header__left__button\"\r\n              >\r\n                <span>\r\n                  <DehazeIcon />\r\n                </span>\r\n              </div>\r\n              {roomId ? (\r\n                <div\r\n                  role=\"button\"\r\n                  data-bs-toggle=\"modal\"\r\n                  data-bs-target={\"#\" + \"a\" + roomId}\r\n                  className=\"chat__header__left__button\"\r\n                >\r\n                  <span>#{roomDetails?.data()?.name}</span>\r\n                </div>\r\n              ) : (\r\n                <div\r\n                  role=\"button\"\r\n                  data-bs-toggle=\"modal\"\r\n                  data-bs-target={\"#\" + \"a\" + roomDirectId}\r\n                  className=\"chat__header__left__button\"\r\n                >\r\n                  <div\r\n                    className=\"chat__header__avatar\"\r\n                    style={{ backgroundImage: `url(${directImg})` }}\r\n                  >\r\n                    <FiberManualRecordIcon\r\n                      className={directStatus ? \"status active\" : \"status\"}\r\n                    />\r\n                  </div>\r\n                  <span>{directTitle}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div\r\n              className=\"chat__header__right\"\r\n              data-bs-toggle={roomId ? \"modal\" : \"\"}\r\n              data-bs-target={roomId ? \"#\" + \"a\" + roomId : \"\"}\r\n            >\r\n              <span role=\"button\">Details</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"chat-messages\">\r\n            <Message\r\n              userImage=\"https://icon-library.com/images/comment-bubble-icon-png/comment-bubble-icon-png-3.jpg\"\r\n              userName={\r\n                roomId\r\n                  ? (roomDetails?.data()?.roomOwner\r\n                      ? roomDetails?.data()?.roomOwner.displayName\r\n                      : \"...\") +\r\n                    ` founded the #${roomDetails?.data()?.name} channel,`\r\n                  : \"This conversation is just between the two of you\"\r\n              }\r\n              message={\r\n                roomId\r\n                  ? roomDetails?.data()?.des\r\n                    ? roomDetails?.data()?.des\r\n                    : \"\"\r\n                  : `Here you can send messages and share files with @${\r\n                      directUser?.data().displayName\r\n                    }.`\r\n              }\r\n              description={true}\r\n            />\r\n            {blocksMessageArr?.map((doc) => {\r\n              var time = doc[1].time;\r\n              var timestamp = doc[1].timestamp;\r\n              var randomUid = doc[1][0]?.props.uid;\r\n              return (\r\n                <DayBlockMessages\r\n                  uid={randomUid}\r\n                  loading={directLoading || loading}\r\n                  key={time.date + time.month + time.year}\r\n                  time={time}\r\n                  messages={doc[1]}\r\n                  timestamp={timestamp}\r\n                />\r\n              );\r\n            })}\r\n            <div className=\"chat-bottom\" ref={chatRef}></div>\r\n          </div>\r\n          <div className=\"chat__footer\">\r\n            {(members?.includes(user.uid) && roomId) || !roomId ? (\r\n              <ChatInput\r\n                chatRef={chatRef}\r\n                channelId={roomId ? roomId : roomDirectId}\r\n                channelName={roomId ? roomDetails?.data()?.name : directTitle}\r\n                isDirect={roomId ? false : true}\r\n              />\r\n            ) : (\r\n              <div className=\"chat__input-preview\">\r\n                <div className=\"text--normal\">\r\n                  You are viewing <strong>#{roomDetails?.data()?.name}</strong>\r\n                </div>\r\n\r\n                <div className=\"buttons-group\">\r\n                  <button className=\"btn btn-primary\" onClick={joinChat}>\r\n                    Join chat\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-secondary\"\r\n                    data-bs-toggle=\"modal\"\r\n                    data-bs-target={\"#a\" + roomId}\r\n                  >\r\n                    See more details\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div className=\"space\"></div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport '../css/loading.css'\r\nimport { auth } from '../firebase';\r\nfunction Loading() {\r\n    const [user, loading] = useAuthState(auth)\r\n    const [isAnimate, setIsAnimate] = useState(false)\r\n    useEffect(() => {\r\n        animate();\r\n        return () => {\r\n            \r\n        }\r\n    }, [loading])\r\n\r\n    function animate(){\r\n        setTimeout(() => {\r\n            setIsAnimate(!isAnimate);\r\n           \r\n        },1000)\r\n    }\r\n    \r\n\r\n    animate()\r\n    \r\n    return (\r\n        <div className=\"loading-container\">\r\n            <div className=\"loading__content\">\r\n                <h1>Loading</h1>\r\n                <div className=\"dots\">\r\n                    <div className={isAnimate?\"dot z animate\":\"dot z\"} ></div>\r\n                    <div className={isAnimate?\"dot f animate\":\"dot f\"}></div>\r\n                    <div className={isAnimate?\"dot s animate\":\"dot s\"}></div>\r\n                    <div className={isAnimate?\"dot t animate\":\"dot t\"}></div>\r\n                    <div className={isAnimate?\"dot l animate\":\"dot l\"}></div>\r\n                </div>\r\n            </div>\r\n        <script></script>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataState, selectDocId, selectUser } from \"../../features/appSlice\";\r\nimport { db, storage } from \"../../firebase\";\r\nfunction InputSection(props) {\r\n  const user = useSelector(selectUser);\r\n  const inputInit =\r\n    props.name === \"displayName\"\r\n      ? user?.displayName\r\n        ? user.displayName\r\n        : \"\"\r\n      : props.name === \"whatIDo\"\r\n      ? user?.whatIDo\r\n        ? user.whatIDo\r\n        : \"\"\r\n      : \"\";\r\n  const [input, setInput] = useState(inputInit);\r\n  const [imgUrl, setImgUrl] = useState(user?.photoURL);\r\n  const dispatch = useDispatch();\r\n  const handleImgChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const storageRef = storage.ref();\r\n    const fileRef = storageRef.child(file.name);\r\n    await fileRef.put(file);\r\n    setImgUrl(await fileRef.getDownloadURL());\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    inputElement.click();\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    setInput(e.target.value);\r\n  };\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  const selectedDoc = users?.docs.find((elem) => elem.data().uid === user?.uid);\r\n  const id = selectedDoc?.id;\r\n  const saveChange = async () => {\r\n    let users = db.collection(\"users\");\r\n    if (!loading && id && users) {\r\n      if (props.saveChange) {\r\n        if (props.type === \"photo\") {\r\n          await users\r\n            .doc(id)\r\n            .update({\r\n              photoURL: imgUrl,\r\n            })\r\n            .catch((err) => alert(err.message));\r\n        } else if (props.type === \"text\") {\r\n          if (props.name === \"displayName\")\r\n            await users\r\n              .doc(id)\r\n              .update({\r\n                displayName: input,\r\n              })\r\n              .catch((err) => alert(err.message));\r\n          else if (props.name === \"whatIDo\")\r\n            await users\r\n              .doc(id)\r\n              .update({\r\n                whatIDo: input,\r\n              })\r\n              .catch((err) => alert(err.message));\r\n        }\r\n        dispatch(\r\n          getDataState({\r\n            dataUpdated: true,\r\n          })\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    saveChange();\r\n    return () => {\r\n      dispatch(\r\n        getDataState({\r\n          dataUpdated: null,\r\n        })\r\n      );\r\n    };\r\n  }, [props.toggle]);\r\n  let inputElement;\r\n\r\n  return (\r\n    <div className=\"input-container\">\r\n      <label htmlFor=\"\" className=\"form-label\">\r\n        {props.label}\r\n      </label>\r\n      {props.type === \"photo\" ? (\r\n        <div>\r\n          <img src={imgUrl} alt=\"\" style={{ width: `100%` }} />\r\n          <input\r\n            ref={(input) => (inputElement = input)}\r\n            type=\"file\"\r\n            onChange={handleImgChange}\r\n            className=\"photo-input\"\r\n          />\r\n          <span\r\n            role=\"button\"\r\n            className=\"upload-button c-button--medium\"\r\n            onClick={handleUpload}\r\n          >\r\n            Upload an image{\" \"}\r\n          </span>\r\n        </div>\r\n      ) : (\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={input}\r\n          onChange={handleInputChange}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InputSection;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { useCollection } from 'react-firebase-hooks/firestore';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport '../../css/editprofile.css'\r\nimport { saveUserInfo, selectDataState, selectDocId, selectUser } from '../../features/appSlice';\r\nimport { auth, db } from '../../firebase';\r\nimport InputSection from './InputSection'\r\nfunction EditProfile() {\r\n    const saveChange = true;\r\n    const userInf = useSelector(selectUser);\r\n    const [notification, setNotification] = useState(false)\r\n    const dataUpdated = useSelector(selectDataState)\r\n    const [toggle, setToggle] = useState(false)\r\n    const [users, loading] = useCollection(db.collection('users'));\r\n    const user = users?.docs.find(elem => elem.data().uid === userInf?.uid);\r\n    const userData = user?.data();\r\n    const handleSaveChange = (e) => {\r\n        e.preventDefault();\r\n        setToggle(!toggle);\r\n        setNotification(true);\r\n        setTimeout(() => {\r\n            setNotification(false);\r\n        }, 1000);  \r\n    }\r\n    const dispatch = useDispatch();\r\n    const saveUserToRedux = async () => {\r\n        \r\n        if(userData){\r\n            dispatch(saveUserInfo({user: userData}));\r\n            console.log(\"dispatched \"+ userData.whatIDo)\r\n        }\r\n        else\r\n        console.log(\"No dispatch\")\r\n    }\r\n    \r\n    useEffect(() => {\r\n        if(dataUpdated){\r\n            saveUserToRedux()\r\n        }\r\n        \r\n    }, [dataUpdated])\r\n   \r\n\r\n\r\n    return(\r\n        <div className=\"modal fade\" id=\"editProfile\" tabIndex=\"-1\" aria-labelledby=\"editProfile\" aria-hidden=\"true\">\r\n            <div className=\"modal-dialog modal-dialog-scrollable c-modal-dialog modal-dialog-centered\">\r\n                <div className=\"modal-content c-modal-content\">\r\n                    <div className=\"c-modal__header\">\r\n                        <div className=\"c-modal__header__title\">\r\n                            <h1><div className=\"text\">Edit your propfile</div></h1>\r\n                        </div>{\r\n                        (notification===true&&<div className=\"notification badge bg-success\">\r\n                            Your info was successfully updated!\r\n                        </div>)}\r\n                    </div>\r\n\r\n                    <div className=\"c-modal__body\">\r\n                        <div className=\"c-modal__body__section\" style={{width: 700}}>\r\n                            <div className=\"c-modal__body__columns\">\r\n                                <div className=\"col-sm-8 c-input-field\">\r\n\r\n                                    <InputSection\r\n                                    label = \"Display name\"\r\n                                    name = \"displayName\"\r\n                                    type = \"text\"\r\n                                    saveChange = {saveChange}\r\n                                    toggle = {toggle}\r\n                                    />\r\n                                    <InputSection\r\n                                    label = \"What I do\"\r\n                                    name = \"whatIDo\"\r\n                                    type = \"text\"\r\n                                    saveChange = {saveChange}\r\n                                    toggle = {toggle}\r\n                                    />\r\n                                    \r\n                                </div>\r\n\r\n                                <div className=\"col-sm-4 c-profile-photo-field\">\r\n                                    <InputSection\r\n                                    label = \"Profile photo\"\r\n                                    type = \"photo\"\r\n                                    saveChange = {saveChange}  \r\n                                    toggle = {toggle}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"c-modal__footer\">\r\n                        <button className=\"btn btn-light cancel-button c-button--medium\" data-bs-dismiss=\"modal\">\r\n                            Cancel\r\n                        </button>\r\n\r\n                        <button className=\"btn btn-success save-button c-button--medium\" onClick={handleSaveChange}>\r\n                            Save Changes\r\n                        </button>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditProfile\r\n","import React from 'react'\r\n\r\nfunction Reiszer(props) {\r\n    return (\r\n        <div className=\"chat-side-bar-resizer resizer\" onMouseDown={props.onMouseDown}>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Reiszer\r\n","import React, { useState } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"../css/secondaryview.css\";\r\nimport {\r\n  selectChosenUser,\r\n  selectDocId,\r\n  selectLocalTime,\r\n  selectSecondaryWorkspaceStatus,\r\n  selectUserProfileUid,\r\n  showSecondaryWorkspace,\r\n} from \"../features/appSlice\";\r\nimport { db } from \"../firebase\";\r\nimport FiberManualRecordIcon from \"@material-ui/icons/FiberManualRecord\";\r\nfunction SecondaryView({ width, resize }) {\r\n  const selectedUser = useSelector(selectChosenUser);\r\n  const photoURL = selectedUser?.photoURL;\r\n  const title = selectedUser?.displayName;\r\n  const isOnline = selectedUser?.isOnline;\r\n  const isOpen = useSelector(selectSecondaryWorkspaceStatus);\r\n  const dispatch = useDispatch();\r\n\r\n  const localTime = useSelector(selectLocalTime);\r\n  const closeWorkspace = () => {\r\n    dispatch(\r\n      showSecondaryWorkspace({\r\n        isShowingSecondaryWorkspace: false,\r\n      })\r\n    );\r\n    console.log(\"close\");\r\n  };\r\n  return (\r\n    <div\r\n      className={\r\n        isOpen ? \"secondary-view-container active\" : \"secondary-view-container\"\r\n      }\r\n      style={{ width: width }}\r\n    >\r\n      <div className=\"secondary-view__header\">\r\n        <div className=\"secondary-view__header__left\">\r\n          <span>Profile</span>\r\n        </div>\r\n        <div className=\"secondary-view__header__right\">\r\n          <button className=\"c-button-unstyled\" onClick={closeWorkspace}>\r\n            X\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"secondary-view__body\">\r\n        <div className=\"member-profile__avatar-container\">\r\n          <img src={photoURL} alt=\"\" />\r\n        </div>\r\n        <div className=\"member-profile__name\">\r\n          <div className=\"member-profile__name-title\">{title}</div>\r\n          <div className=\"member-profile__status\">\r\n            <FiberManualRecordIcon\r\n              className={!isOnline ? \"status offline\" : \"status online\"}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"member-profile__fields\">\r\n          <div className=\"member-profile__field\">\r\n            <div className=\"member-profile__field__label\">Display name</div>\r\n            <div className=\"member-profile__field__value\">\r\n              {selectedUser?.displayName}\r\n            </div>\r\n          </div>\r\n          <div className=\"member-profile__field\">\r\n            <div className=\"member-profile__field__label\">What I do</div>\r\n            <div className=\"member-profile__field__value\">\r\n              {selectedUser?.whatIDo}\r\n            </div>\r\n          </div>\r\n          <div className=\"member-profile__field\">\r\n            <div className=\"member-profile__field__label\">Local time</div>\r\n            <div className=\"member-profile__field__value\">{localTime}</div>\r\n          </div>\r\n          <div className=\"member-profile__field\">\r\n            <div className=\"member-profile__field__label\">Email address</div>\r\n            <div className=\"member-profile__field__value\">\r\n              {selectedUser?.email}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SecondaryView;\r\n","import React, { useState } from 'react'\r\n\r\nfunction InputField({fieldLabel, required, hyphenized, onChange, value, disabled}) {\r\n    \r\n    return (\r\n        <div className=\"input-field form-group\">\r\n            <label htmlFor=\"name-input\" className=\"form-label\"><strong>{fieldLabel}</strong></label>\r\n            <input disabled={disabled} value = {value} onChange = {onChange} type=\"text\" className=\"form-control\" required={required?required:\"\"}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InputField\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  selectDirectMessageRoom,\r\n  selectDirectUser,\r\n  selectLocalTime,\r\n  selectRoomDetails,\r\n  selectRoomId,\r\n  selectUser,\r\n  selectUserDirect,\r\n  setIsModalOpen,\r\n  setSelectedUser,\r\n  showSecondaryWorkspace,\r\n} from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\nimport InputField from \"./InputField\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AccessTimeIcon from \"@material-ui/icons/AccessTime\";\r\nimport MailOutlineIcon from \"@material-ui/icons/MailOutline\";\r\nimport firebase from \"firebase\";\r\nfunction AboutTab({\r\n  roomName,\r\n  roomDes,\r\n  roomOwner,\r\n  id,\r\n  isPrivate,\r\n  roomMembers,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const [name, setName] = useState(roomName);\r\n  const [des, setDes] = useState(roomDes ? roomDes : \"\");\r\n  const defaultRoomId = \"CcfrQCURBPLWpn6lj0k8\";\r\n  useEffect(() => {\r\n    setName(roomName);\r\n    setDes(roomDes ? roomDes : \"\");\r\n  }, [roomName, roomDes]);\r\n  const [notification, setNotification] = useState(\"\");\r\n  const [changed, setChanged] = useState(false);\r\n  const handleNameChange = (e) => {\r\n    var content = e.target.value;\r\n    var hyphenizedContent = content.replace(/\\s/g, \"-\");\r\n    setName(hyphenizedContent);\r\n  };\r\n\r\n  const handleDesChange = (e) => {\r\n    var content = e.target.value;\r\n    setDes(content);\r\n  };\r\n  const saveChange = () => {\r\n    if (name === \"\") {\r\n      setNotification(\"Name must not be left empty!, try again\");\r\n      setChanged(false);\r\n      setName(roomName);\r\n      return;\r\n    }\r\n    db.collection(\"room\")\r\n      .doc(id)\r\n      .update({\r\n        name: name,\r\n        des: des,\r\n      })\r\n      .then(() => {\r\n        setChanged(true);\r\n        setNotification(\"Channel was updated successfully!\");\r\n        setTimeout(() => {\r\n          setNotification(\"\");\r\n        }, 2000);\r\n      })\r\n      .catch((err) => notification(err.message));\r\n  };\r\n\r\n  // Leave channel Handle\r\n  const user = useSelector(selectUser);\r\n  const [alert, setAlert] = useState(false);\r\n  const [leave, setLeave] = useState(false);\r\n  const [left, setLeft] = useState(false);\r\n  const openAlert = () => {\r\n    setAlert(true);\r\n  };\r\n  const closeAlert = () => {\r\n    setAlert(false);\r\n  };\r\n  const leaveChannel = () => {\r\n    setLeave(true);\r\n    setAlert(false);\r\n  };\r\n  const roomId = useSelector(selectRoomId);\r\n  var membersArr = roomMembers?.slice();\r\n  var index = membersArr?.indexOf(user.uid);\r\n  membersArr?.splice(index, 1);\r\n  useEffect(() => {\r\n    if (leave) {\r\n      db.collection(\"room\")\r\n        .doc(roomId)\r\n        .update({\r\n          members: membersArr ? membersArr : [],\r\n        })\r\n        .then(() => {\r\n          dispatch(\r\n            setIsModalOpen({\r\n              isModalOpen: false,\r\n            })\r\n          );\r\n        })\r\n        .catch((err) => alert(err.message));\r\n      let input = `Leave #${roomName}.`;\r\n      db.collection(\"room\").doc(roomId).collection(\"messages\").add({\r\n        message: input,\r\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        user: user.displayName,\r\n        userImage: user.photoURL,\r\n        uid: user.uid,\r\n      });\r\n    }\r\n  }, [leave]);\r\n\r\n  // Direct room\r\n  const roomDirectId = useSelector(selectDirectMessageRoom);\r\n  const userDirect = useSelector(selectDirectUser);\r\n  const localTime = useSelector(selectLocalTime);\r\n  // View full profile handle\r\n  const openSecondaryView = () => {\r\n    dispatch(\r\n      showSecondaryWorkspace({\r\n        isShowingSecondaryWorkspace: true,\r\n      })\r\n    );\r\n    dispatch(\r\n      setSelectedUser({\r\n        selectedUser: userDirect,\r\n      })\r\n    );\r\n  };\r\n  return (\r\n    <div\r\n      class=\"tab-pane fade show active channel-details__about\"\r\n      id=\"about\"\r\n      role=\"tabpanel\"\r\n      aria-labelledby=\"about-tab\"\r\n    >\r\n      {roomDirectId && (\r\n        <>\r\n          <div className=\"c-tab-group\">\r\n            <div className=\"c-tab-group__inner\">\r\n              <div className=\"text-line\">\r\n                <div className=\"text-line__icon\">\r\n                  <AccessTimeIcon />\r\n                </div>\r\n                <div className=\"text-line__content\">{localTime} Local time</div>\r\n              </div>\r\n              <div className=\"text-line\">\r\n                <div className=\"text-line__icon\">\r\n                  <MailOutlineIcon />\r\n                </div>\r\n                <div className=\"text-line__content\">{userDirect?.email}</div>\r\n              </div>\r\n\r\n              <button\r\n                onClick={openSecondaryView}\r\n                data-bs-dismiss=\"modal\"\r\n                data-bs-target={\"a\" + id}\r\n                className=\"c-button-unstyled\"\r\n              >\r\n                View full profile\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n      {roomId && (\r\n        <>\r\n          <div className=\"input-group c-tab-group\">\r\n            <InputField\r\n              fieldLabel=\"Name\"\r\n              required={true}\r\n              hyphenized={true}\r\n              onChange={handleNameChange}\r\n              value={name}\r\n              disabled={id === defaultRoomId}\r\n            />\r\n            <InputField\r\n              fieldLabel=\"Description\"\r\n              onChange={handleDesChange}\r\n              value={des}\r\n            />\r\n            <br />\r\n            <div className=\"input-group__footer\">\r\n              <button\r\n                className=\"btn btn-success c-button--medium\"\r\n                onClick={saveChange}\r\n              >\r\n                Save\r\n              </button>\r\n              {changed ? (\r\n                <div className=\"notification badge bg-success\">\r\n                  {notification}\r\n                </div>\r\n              ) : (\r\n                <div className=\"notification badge bg-warning\">\r\n                  {notification}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-group c-tab-group\">\r\n            <div className=\"text-field\">\r\n              <div className=\"text-field__title\">Created by</div>\r\n              <div className=\"text-field__content\">\r\n                {roomOwner ? roomOwner : \"...\"}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-field leave-button\" role=\"button\">\r\n              <div className=\"text-field__title\" onClick={openAlert}>\r\n                Leave Channel\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {alert && (\r\n        <div className=\"c-tab-group alert\">\r\n          <span>\r\n            Do you want to leave channel?{\" \"}\r\n            {isPrivate && (\r\n              <>\r\n                This is a <strong>private</strong> channel so it cannot be\r\n                accessed by outsiders.\r\n              </>\r\n            )}\r\n          </span>\r\n          <div className=\"buttons-group\">\r\n            <button className=\"btn btn-secondary\" onClick={closeAlert}>\r\n              Cancel\r\n            </button>\r\n            <button\r\n              className=\"btn btn-danger\"\r\n              data-bs-dismiss=\"modal\"\r\n              data-bs-target={\"a\" + id}\r\n              onClick={leaveChannel}\r\n            >\r\n              Leave\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AboutTab;\r\n","import FiberManualRecord from '@material-ui/icons/FiberManualRecord';\r\nimport React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectUser, setSelectedUser, setUserProfileUid } from '../../features/appSlice';\r\n\r\nfunction Member({user, roomOwner, addUser, dropdownItem, filterText}) {\r\n    const dispatch = useDispatch()\r\n    const loginUser = useSelector(selectUser)\r\n    const photoURL = user?.photoURL?user.photoURL:\"default-avatar.jpg\";\r\n    const name = user?.displayName?user.displayName:user.email;\r\n    const status = user?.isOnline;\r\n    const sendUserUid = () => {\r\n        dispatch(setSelectedUser({\r\n            selectedUser: user\r\n        }))\r\n    }\r\n    if((name.toLowerCase().indexOf(filterText)!==-1||filterText===\"\"))\r\n    return (\r\n        <div className=\"member\" role=\"button\" data-bs-toggle={!dropdownItem?\"modal\":\"false\"}\r\n        data-bs-target=\"#profileModal\" onClick={!dropdownItem?sendUserUid:() => {}}>{(<>\r\n            <div className = \"member__info\">\r\n                <div className=\"member__avatar\" style={{backgroundImage: `url(${photoURL})`}}></div>\r\n                <div className=\"member__name\"><strong>{name} {user?.uid===loginUser.uid?\"(You)\":\"\"}</strong></div>\r\n                <div className=\"member__status\"><FiberManualRecord className = {status?\"status active\":\"status\"}/></div>\r\n            </div>\r\n            {(loginUser?.uid === roomOwner?.uid)&&\r\n            <div className=\"interact-button\">\r\n                <span role=\"button\" data-bs-toggle=\"modal\" data-bs-target = \"#removeAlertModal\"><strong>Remove</strong></span>\r\n\r\n            </div>}\r\n            {dropdownItem&&\r\n            <div className=\"interact-button\">\r\n                <span role=\"button\" onClick = {addUser}><strong>Add</strong></span>\r\n            </div>\r\n            }</>)}\r\n        </div>\r\n    )\r\n    else return (<div></div>)\r\n}\r\n\r\nexport default Member\r\n","import React, { useEffect } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { db } from \"../../firebase\";\r\nimport Member from \"./Member\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\r\nimport { useState } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"../../features/appSlice\";\r\nfunction MembersTab({ roomMembers, roomOwner, id }) {\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  let userInf = useSelector(selectUser)\r\n  let membersList = [];\r\n  users?.docs.map((doc) => {\r\n    if (roomMembers?.includes(doc.data().uid)) {\r\n      membersList.push(doc.data());\r\n    }\r\n  });\r\n\r\n  // Handle Add people\r\n  const [isAdded, setIsAdded] = useState(false);\r\n  let membersArr = roomMembers?.slice();\r\n  const addUser = (user) => {\r\n    if (user && roomMembers&& !membersArr.includes(user?.uid)) {\r\n      membersArr.push(user.uid);\r\n      db.collection(\"room\")\r\n        .doc(id)\r\n        .update({\r\n          members: membersArr,\r\n        })\r\n        .then((data) => {\r\n          let input = `is added by ${userInf?.displayName}.`;\r\n          db.collection(\"room\").doc(id).collection(\"messages\").add({\r\n            message: input,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            user: user.displayName,\r\n            userImage: user.photoURL,\r\n            uid: user.uid,\r\n          });\r\n          setIsAdded(true);\r\n        });\r\n    }\r\n  };\r\n\r\n  const addAllUser = () => {\r\n    if (users && roomMembers) {\r\n      users?.docs.map((doc) => {\r\n        addUser(doc.data())\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handle Search Member\r\n  const [searchMemberInput, setSearchMemberInput] = useState(\"\");\r\n  const [searchAddInput, setSearchAddInput] = useState(\"\");\r\n  const searchMemberInputHandler = (e) => {\r\n    setSearchMemberInput(e.target.value);\r\n  };\r\n  const searchAddInputHandler = (e) => {\r\n    setSearchAddInput(e.target.value);\r\n  };\r\n  return (\r\n    <div\r\n      class=\"tab-pane fade channel-details__members\"\r\n      id=\"members\"\r\n      role=\"tabpanel\"\r\n      aria-labelledby=\"members-tab\"\r\n    >\r\n      <div className=\"channel-details__members__header\">\r\n        <div className=\"form-group\">\r\n          <SearchIcon className=\"search-icon\" />\r\n          <input\r\n            onChange={searchMemberInputHandler}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"Find members\"\r\n            value={searchMemberInput}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"channel-details__members__list\">\r\n        <div className=\"dropdown\">\r\n          <div\r\n            className=\"member dropdown-toggle\"\r\n            role=\"button\"\r\n            data-bs-toggle=\"dropdown\"\r\n            data-bs-auto-close=\"outside\"\r\n            aria-expanded=\"false\"\r\n            id=\"addUsers\"\r\n          >\r\n            <div className=\"member__info\">\r\n              <div className=\"member__avatar\">\r\n                <PersonAddIcon />\r\n              </div>\r\n              <div className=\"member__name\">\r\n                <strong>Add people</strong>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div\r\n            className=\"dropdown-menu\"\r\n            aria-labelledby=\"addUsers\"\r\n            style={{ maxHeight: 300, maxWidth: 100 + \"%\", width: \"100%\" }}\r\n          >\r\n            <div className=\"form-group\" style={{ padding: \"10px 25px\" }}>\r\n              <label htmlFor=\"\" className=\"form-label\">\r\n                Find user\r\n              </label>\r\n              <input\r\n                onChange={searchAddInputHandler}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <button\r\n              className=\"c-button-unstyled c-button--medium c-button\"\r\n              style={{ marginLeft: 25 }}\r\n              onClick={() => addAllUser()}\r\n              role=\"button\"\r\n            >\r\n              <strong>Add all user</strong>\r\n            </button>\r\n            {users?.docs.map((doc) => {\r\n              let user = doc.data();\r\n              let checked = membersList.find((elem) => elem.uid === user.uid);\r\n              if (!checked)\r\n                return (\r\n                  <Member\r\n                    filterText={searchAddInput.toLowerCase()}\r\n                    user={user}\r\n                    className=\"dropdown-item\"\r\n                    dropdownItem={true}\r\n                    addUser={() => addUser(user)}\r\n                  />\r\n                );\r\n            })}\r\n          </div>\r\n        </div>\r\n        {membersList.map((user) => {\r\n          return (\r\n            <Member\r\n              filterText={searchMemberInput.toLowerCase()}\r\n              user={user}\r\n              roomOwner={roomOwner}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MembersTab;\r\n","import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useSelector } from \"react-redux\";\r\nimport {\r\n  selectChosenUser,\r\n  selectRoomDetails,\r\n  selectRoomId,\r\n  selectUser,\r\n} from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\nimport firebase from \"firebase\";\r\nimport { data } from \"jquery\";\r\nfunction RemoveAlertModal({ uid }) {\r\n  const userInf = useSelector(selectUser);\r\n  const roomDetails = useSelector(selectRoomDetails);\r\n  const selectedUser = useSelector(selectChosenUser);\r\n  const roomId = useSelector(selectRoomId);\r\n  let members = roomDetails?.members;\r\n  let membersArr = members?.slice();\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  const user = users?.docs.find((doc) => doc.data().uid === uid);\r\n  const title = user?.data().displayName\r\n    ? user?.data().displayName\r\n    : user?.data().email;\r\n  const [successLoaded, setSuccessLoaded] = useState(true);\r\n  const removeMember = () => {\r\n    let index = members.indexOf(selectedUser.uid);\r\n    if (index !== -1) {\r\n      membersArr?.splice(index, 1);\r\n      db.collection(\"room\")\r\n        .doc(roomId)\r\n        .update({\r\n          members: membersArr,\r\n        })\r\n        .then(() => {\r\n          setSuccessLoaded(true);\r\n          let input = `was removed by ${userInf?.displayName}.`;\r\n          db.collection(\"room\").doc(roomId).collection(\"messages\").add({\r\n            message: input,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            user: user?.data().displayName,\r\n            userImage: user?.data().photoURL,\r\n            uid: user?.data().uid,\r\n          });\r\n        });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    return () => {\r\n      setSuccessLoaded(true);\r\n    };\r\n  }, [successLoaded]);\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      id=\"removeAlertModal\"\r\n      tabIndex=\"-1\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div className=\"modal-dialog\">\r\n        <div className=\"modal-content remove-alert-modal\">\r\n          <div className=\"c-modal__header\">\r\n            <h1>Remove member</h1>\r\n          </div>\r\n          <div className=\"c-modal__content\">\r\n            Are you sure you want to remove {title} from #{roomDetails?.name}\r\n          </div>\r\n          <div className=\"c-modal__footer\">\r\n            <div className=\"footer__buttons\">\r\n              <button\r\n                className=\"c-button-unstyled c-button--medium\"\r\n                data-bs-dismiss=\"modal\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                className=\"c-button-unstyled c-button--medium danger\"\r\n                data-bs-dismiss=\"modal\"\r\n                onClick={removeMember}\r\n              >\r\n                Remove\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RemoveAlertModal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { enterRoom, selectRoomDetails, selectRoomId, setIsModalOpen } from \"../../features/appSlice\";\r\nimport LockOpenIcon from \"@material-ui/icons/LockOpen\";\r\nimport { db } from \"../../firebase\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nfunction SettingTab() {\r\n  const roomId = useSelector(selectRoomId);\r\n  const [roomDetails, loading] = useCollection(roomId&&db.collection('room').doc(roomId))\r\n  const [isChange, setIsChange] = useState(false);\r\n  const [isDelete, setIsDelete] = useState(false);\r\n  const isPrivate = roomDetails?.data()?.isPrivate;\r\n  const [noti, setNoti] = useState(\"\");\r\n  const defaultRoomId = \"CcfrQCURBPLWpn6lj0k8\";\r\n  const changeType = () => {\r\n    setIsChange(true);\r\n  };\r\n  const deleteChannel = () => {\r\n    setIsDelete(true);\r\n  };\r\n  const dispatch = useDispatch()\r\n  useEffect(() => {\r\n    if(isChange)\r\n    db.collection(\"room\")\r\n      .doc(roomId)\r\n      .update({\r\n        isPrivate: !isPrivate,\r\n      })\r\n      .then(() => {\r\n        setNoti(\r\n          \"Room changed to \" + isPrivate\r\n            ? \"<strong>public</strong>\"\r\n            : \"<strong>private</strong>\"\r\n        );\r\n      })\r\n      .catch((err) => alert(err.message));\r\n      return () => {\r\n        setIsChange(false)\r\n      }\r\n  }, [isChange]);\r\n\r\n  console.log(\"Delete channel: \"+ isDelete);\r\n\r\n  useEffect(() => {\r\n    if(isDelete)\r\n    db.collection('room').doc(roomId).delete().then(() => {\r\n      dispatch(setIsModalOpen({\r\n        isModalOpen: false\r\n      }))\r\n      dispatch(enterRoom({\r\n        roomId: defaultRoomId\r\n      }))\r\n    }).catch((err) => alert(err.message));\r\n    return () => {\r\n      setIsDelete(false)\r\n    }\r\n  }, [isDelete])\r\n\r\n  if(roomId !== defaultRoomId)\r\n  return (\r\n    <div\r\n      class=\"tab-pane fade channel-details__setting\"\r\n      id=\"setting\"\r\n      role=\"tabpanel\"\r\n      aria-labelledby=\"setting-tab\"\r\n    >\r\n      <div className=\"c-tab-group\" role=\"button\" onClick={changeType}>\r\n        {!roomDetails?.data()?.isPrivate ? (\r\n          <>\r\n            <LockIcon className=\"type-icon\" />\r\n            <span>Change to private channel</span>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <LockOpenIcon />\r\n            <span>Change to public channel</span>\r\n          </>\r\n        )}\r\n      </div>\r\n      <hr />\r\n\r\n      {<div\r\n        className=\"c-tab-group button-delete\"\r\n        data-bs-dismiss = \"modal\"\r\n        data-bs-target = \"#removeAlertModal\"\r\n        role=\"button\"\r\n        onClick={deleteChannel}\r\n      >\r\n        <DeleteIcon className=\"type-icon\" />\r\n        <span>Delete this channel</span>\r\n      </div>}\r\n    </div>\r\n  );\r\n  else return (<div\r\n    class=\"tab-pane fade channel-details__setting\"\r\n    id=\"setting\"\r\n    role=\"tabpanel\"\r\n    aria-labelledby=\"setting-tab\"\r\n  >\r\n    <div className=\"c-tab-group\">\r\n      This is the general room of the server so it cannot be modified\r\n    </div>\r\n   </div>)\r\n}\r\n\r\nexport default SettingTab;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"../../css/editchat.css\";\r\nimport {\r\n  selectChosenUser,\r\n  selectRoomId,\r\n  selectUserDirect,\r\n} from \"../../features/appSlice\";\r\nimport ProfileModal from \"../Chat/ProfileModal\";\r\nimport AboutTab from \"./AboutTab\";\r\nimport InputField from \"./InputField\";\r\nimport MembersTab from \"./MembersTab\";\r\nimport RemoveAlertModal from \"./RemoveAlertModal\";\r\nimport SettingTab from \"./SettingTab\";\r\nfunction EditChat({ id, roomDetails, directUser, onClick }) {\r\n  const userDirectId = useSelector(selectUserDirect);\r\n  const roomId = useSelector(selectRoomId);\r\n  const roomName = roomDetails?.name;\r\n  const roomMembers = roomDetails?.members;\r\n  const roomDes = roomDetails?.des;\r\n  const roomOwnerName = roomDetails?.roomOwner?.displayName;\r\n  const roomOwner = roomDetails?.roomOwner;\r\n  const isPrivate = roomDetails?.isPrivate;\r\n  const userName = directUser?.displayName\r\n    ? directUser.displayName\r\n    : directUser?.email;\r\n  const photoURL = directUser?.photoURL\r\n    ? directUser.photoURL\r\n    : \"default-avatar.jpg\";\r\n  return (\r\n    <div className=\"modal fade editChat\" id={\"a\" + id} tabIndex=\"-1\" aria-hidden=\"true\">\r\n      <div className=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div className=\"modal-content chat-details-modal\">\r\n          <div className=\"modal-header chat-details-modal__header c-modal__header\">\r\n            <div className=\"user-display\">\r\n              {!roomId && (\r\n                <div\r\n                  className=\"user__avatar\"\r\n                  style={{ backgroundImage: `url(${photoURL})` }}\r\n                ></div>\r\n              )}\r\n              <h1>{roomId ? roomName : userName}</h1>\r\n            </div>\r\n            <ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">\r\n              <li class=\"nav-item\" role=\"presentation\">\r\n                <span\r\n                  class=\"nav-link active\"\r\n                  id=\"home-tab\"\r\n                  data-bs-toggle=\"tab\"\r\n                  data-bs-target=\"#about\"\r\n                  type=\"button\"\r\n                  role=\"tab\"\r\n                  aria-controls=\"about\"\r\n                  aria-selected=\"true\"\r\n                >\r\n                  About\r\n                </span>\r\n              </li>\r\n              {!userDirectId && (\r\n                <li class=\"nav-item\" role=\"presentation\">\r\n                  <span\r\n                    class=\"nav-link\"\r\n                    id=\"profile-tab\"\r\n                    data-bs-toggle=\"tab\"\r\n                    data-bs-target=\"#members\"\r\n                    type=\"button\"\r\n                    role=\"tab\"\r\n                    aria-controls=\"members\"\r\n                    aria-selected=\"false\"\r\n                  >\r\n                    Members\r\n                  </span>\r\n                </li>\r\n              )}\r\n              {!userDirectId && (\r\n                <li class=\"nav-item\" role=\"presentation\">\r\n                  <span\r\n                    class=\"nav-link\"\r\n                    id=\"contact-tab\"\r\n                    data-bs-toggle=\"tab\"\r\n                    data-bs-target=\"#setting\"\r\n                    type=\"button\"\r\n                    role=\"tab\"\r\n                    aria-controls=\"setting\"\r\n                    aria-selected=\"false\"\r\n                  >\r\n                    Setting\r\n                  </span>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n          <div className=\"modal-body chat-details-modal__tabs c-modal__content\">\r\n            <div className=\"c-modal__content__inner\">\r\n              <div class=\"tab-content\" id=\"myTabContent\">\r\n                <AboutTab\r\n                  roomName={roomName}\r\n                  roomDes={roomDes}\r\n                  roomOwner={roomOwnerName}\r\n                  id={id}\r\n                  isPrivate={isPrivate}\r\n                  roomMembers={roomMembers}\r\n                />\r\n                {!userDirectId && (\r\n                  <MembersTab\r\n                    onClick={onClick}\r\n                    roomMembers={roomDetails?.members}\r\n                    roomOwner={roomOwner}\r\n                    id={id}\r\n                  />\r\n                )}\r\n                {!userDirectId && <SettingTab />}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditChat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useCollection } from \"react-firebase-hooks/firestore\";\r\nimport { useSelector } from \"react-redux\";\r\nimport \"../../css/createchannel.css\";\r\nimport { selectUser } from \"../../features/appSlice\";\r\nimport { db } from \"../../firebase\";\r\nimport SmallLoader from \"../SmallLoader\";\r\nimport InputField from \"./InputField\";\r\nimport firebase from \"firebase\";\r\nfunction CreateChannel() {\r\n  const user = useSelector(selectUser);\r\n  const [users, loading] = useCollection(db.collection(\"users\"));\r\n  const [channels, channelLoading] = useCollection(db.collection(\"room\"))\r\n  let uids = [];\r\n  users?.docs.map((doc) => uids.push(doc.data().uid));\r\n  const [toggle, setToggle] = useState(false);\r\n  const [checked, setChecked] = useState(false);\r\n  const [name, setName] = useState(\"\");\r\n  const [des, setDes] = useState(\"\");\r\n  const [notification, setNotification] = useState(\"\");\r\n  const [added, setAdded] = useState(false);\r\n  const [isExist, setIsExist] = useState(false);\r\n  const handleToggle = () => {\r\n    setToggle(true);\r\n  };\r\n\r\n  const handleSwitch = () => {\r\n    setChecked(!checked);\r\n  };\r\n\r\n  const handleNameChange = (e) => {\r\n    var content = e.target.value;\r\n    var hyphenizedContent = content.replace(/\\s/g, \"-\");\r\n    setName(hyphenizedContent);\r\n  };\r\n\r\n  const handleDesChange = (e) => {\r\n    var content = e.target.value;\r\n    setDes(content);\r\n  };\r\n\r\n  const addChannel = async () => {\r\n    if (!loading) {\r\n      if (name === \"\") {\r\n        setNotification(\"Please enter the channel name\");\r\n        return;\r\n      }\r\n      if (!isExist) {\r\n        db.collection(\"room\")\r\n          .add({\r\n            name: name,\r\n            des: des,\r\n            isPrivate: checked,\r\n            members: checked ? [user.uid] : uids,\r\n            roomOwner: user,\r\n          })\r\n          .then((doc) => {\r\n            setNotification(\"Room was created successfully\");\r\n            setAdded(true);\r\n          })\r\n          .catch((err) => {\r\n            setNotification(err.message);\r\n            setAdded(false);\r\n          });\r\n      } else setNotification(\"Channel exist!\");\r\n      setTimeout(() => setNotification(\"\"), 3000);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!channelLoading) {\r\n      let doc = channels?.docs?.find((elem) => elem.data().name === name);\r\n      console.log(doc)\r\n      if (doc) setIsExist(true);\r\n    }\r\n    if (toggle) {\r\n      addChannel();\r\n    }\r\n    return () => {\r\n      if (toggle) {\r\n        setName(\"\");\r\n        setDes(\"\");\r\n      }\r\n      setIsExist(false);\r\n      setToggle(false);\r\n    };\r\n  }, [channelLoading, name, toggle]);\r\n\r\n  return (\r\n    <div\r\n      className=\"modal fade\"\r\n      id=\"createChannel\"\r\n      tabIndex=\"-1\"\r\n      aria-hidden=\"true\"\r\n    >\r\n      <div className=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\r\n        <div className=\"modal-content create-channel\">\r\n          {loading ? (\r\n            <SmallLoader />\r\n          ) : (\r\n            <>\r\n              <div className=\"create-channel__header c-modal__header\">\r\n                <h1>Create a channel</h1>\r\n              </div>\r\n              <div className=\"create-channel__body\">\r\n                <div className=\"overview c-gray-text\">\r\n                  Channels are where your team communicates. Theyre best when\r\n                  organized around a topic  #marketing, for example.\r\n                </div>\r\n\r\n                <br />\r\n                <InputField\r\n                  fieldLabel=\"Name\"\r\n                  required={true}\r\n                  hyphenized={true}\r\n                  toggle={toggle}\r\n                  onChange={handleNameChange}\r\n                  value={name}\r\n                />\r\n                <InputField\r\n                  fieldLabel=\"Description\"\r\n                  toggle={toggle}\r\n                  onChange={handleDesChange}\r\n                  value={des}\r\n                />\r\n                <div className=\"c-gray-text\">\r\n                  <small>What is this channel about(optional)</small>\r\n                </div>\r\n                <br />\r\n                <div className=\"channel-type form-check form-switch\">\r\n                  <label\r\n                    htmlFor=\"switch-button\"\r\n                    className=\"channel-type-des form-check-label\"\r\n                  >\r\n                    <div className=\"channel-type-des__title\">\r\n                      <strong>Make private</strong>\r\n                    </div>\r\n                    <div className=\"channel-type-des__body c-gray-text\">\r\n                      {checked && (\r\n                        <>\r\n                          <strong>\r\n                            Private Channel cannot be accessed from outsiders\r\n                          </strong>\r\n                          .\r\n                        </>\r\n                      )}\r\n                      {!checked &&\r\n                        \"When a channel is set to private, it can only be viewed or joined by invitation.\"}\r\n                    </div>\r\n                  </label>\r\n\r\n                  <div className=\"switch-button\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      name=\"switch-button\"\r\n                      role=\"switch\"\r\n                      className=\"form-check-input\"\r\n                      id=\"switch-button\"\r\n                      onChange={handleSwitch}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <div className=\"create-channel__footer\">\r\n                <button\r\n                  className=\"btn btn-success c-button--medium\"\r\n                  onClick={handleToggle}\r\n                >\r\n                  Create\r\n                </button>\r\n                {added ? (\r\n                  <div className=\"notification badge bg-success\">\r\n                    {notification}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"notification badge bg-warning\">\r\n                    {notification}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateChannel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"../../css/setuppage.css\";\r\nimport { reset, saveUserInfo, selectDocId, selectUser } from \"../../features/appSlice\";\r\nimport { auth, db, storage } from \"../../firebase\";\r\nimport SmallLoader from \"../SmallLoader\";\r\nfunction InitAccount() {\r\n  const handleUpload = () => {\r\n    inputRef.click();\r\n  };\r\n  //   Handle input\r\n  const [name, setName] = useState(\"\");\r\n  const [job, setJob] = useState(\"\");\r\n  const [imgURL, setImgURL] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [onSave, setOnSave] = useState(false);\r\n  const [notif, setNotif] = useState(\"\");\r\n  const handleImgChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const storageRef = storage.ref();\r\n    const fileRef = storageRef.child(file.name);\r\n    setLoading(true);\r\n    await fileRef.put(file);\r\n    setImgURL(await fileRef.getDownloadURL());\r\n    setLoading(false);\r\n  };\r\n  const handleNameChange = (e) => {\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const handleJobChange = (e) => {\r\n    setJob(e.target.value);\r\n  };\r\n  // Handle Save Change\r\n  const dispatch = useDispatch();\r\n  const userInf = useSelector(selectUser);\r\n  const id = useSelector(selectDocId);\r\n  const saveChange = async () => {\r\n    let users = await db.collection(\"users\");\r\n    if (id) {\r\n      users\r\n        .doc(id)\r\n        .update({\r\n          photoURL: imgURL,\r\n        })\r\n        .then(() => console.log(\"Clicked\"))\r\n        .catch((err) => alert(err.message));\r\n\r\n      users\r\n        .doc(id)\r\n        .update({\r\n          displayName: name,\r\n        })\r\n        .then(() => {\r\n          dispatch(\r\n            saveUserInfo({\r\n              user: {\r\n                displayName: name,\r\n                WhatIDo: job,\r\n                photoURL: imgURL,\r\n                uid: userInf.uid,\r\n                email: userInf.email,\r\n                emailVerified: userInf.emailVerified,\r\n                isOnline: true,\r\n              },\r\n            })\r\n          );\r\n        })\r\n        .catch((err) => alert(err.message));\r\n\r\n      users\r\n        .doc(id)\r\n        .update({\r\n          whatIDo: job,\r\n        })\r\n        .catch((err) => alert(err.message));\r\n    }\r\n  };\r\n  const onSaveHandler = () => {\r\n    setOnSave(true);\r\n  };\r\n  useEffect(() => {\r\n    if (onSave) {\r\n      saveChange();\r\n      if (name === \"\" || job === \"\")\r\n        setNotif(\"You have to fill the information!\");\r\n      if (imgURL === \"\") setNotif(\"You have to upload an image!\");\r\n    }\r\n    return () => {\r\n      setOnSave(false);\r\n      setNotif(\"\");\r\n    };\r\n  }, [onSave]);\r\n  // Sign Out\r\n  const logOut = async () => {\r\n    await auth\r\n      .signOut()\r\n      .then(() => {\r\n        db.collection(\"users\").doc(id).update({\r\n          isOnline: false,\r\n        });\r\n      })\r\n      .catch((error) => alert(error.message));\r\n    dispatch(\r\n      reset({\r\n        initState: null,\r\n      })\r\n    );\r\n  };\r\n  let inputRef;\r\n\r\n  return (\r\n    <div className=\"setup-page-container\">\r\n      <h2>Please enter your basic information</h2>\r\n      <div className=\"setup-page__inner\">\r\n        <div className=\"setup-page__collumns\">\r\n          <div className=\"collumn setup-page__collumn photo-column \">\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"\" className=\"form-label\">\r\n                <strong>Photo</strong>\r\n              </label>\r\n              <div className=\"image-holder-container\">\r\n                <div\r\n                  className=\"image-holder\"\r\n                  style={{ backgroundImage: `url(${imgURL})` }}\r\n                >\r\n                  {loading && <SmallLoader />}\r\n                </div>\r\n              </div>\r\n\r\n              <input\r\n                ref={(input) => (inputRef = input)}\r\n                type=\"file\"\r\n                className=\"form-control photo-input\"\r\n                accept=\"img/*\"\r\n                onChange={handleImgChange}\r\n              />\r\n              <span\r\n                role=\"button\"\r\n                className=\"upload-button c-button--medium btn-success\"\r\n                onClick={handleUpload}\r\n              >\r\n                Upload an image{\" \"}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div className=\" collumn setup-page__collumn info-column\">\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">\r\n                <strong>Display name</strong>{\" \"}\r\n              </label>\r\n              <input\r\n                value={name}\r\n                onChange={handleNameChange}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            <br />\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">\r\n                <strong>What you do</strong>\r\n              </label>\r\n              <input\r\n                value={job}\r\n                onChange={handleJobChange}\r\n                type=\"text\"\r\n                className=\"form-control \"\r\n              />\r\n            </div>\r\n            <br />\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <div className=\"button-container\">\r\n          <button className=\"btn btn-secondary\" onClick={logOut}>\r\n            Use another account\r\n          </button>\r\n          <button className=\"btn btn-success\" onClick={onSaveHandler}>\r\n            Proceed to the server\r\n          </button>\r\n        </div>\r\n        <div className=\"notif-container\"><strong>{notif}</strong></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default InitAccount;\r\n","import './css/main.css'\r\nimport LogIn from './components/Login/Login';\r\nimport './App.css';\r\nimport './css/login.css'\r\nimport Header from './components/Header/Header';\r\nimport SideBar from './components/SideBar/SideBar';\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport 'bootstrap/dist/js/bootstrap.bundle.js'\r\nimport Chat from './components/Chat/Chat';\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport { auth, db } from './firebase';\r\nimport { useCollection } from 'react-firebase-hooks/firestore';\r\nimport {useEffect, useState } from 'react';\r\nimport Loading from './components/Loading';\r\nimport EditProfile from './components/Edit Profile/EditProfile';\r\nimport Reiszer from './components/Reiszer';\r\nimport SecondaryView from './components/SecondaryView';\r\nimport ProfileModal from './components/Chat/ProfileModal';\r\nimport EditChat from './components/Edit Chat/EditChat';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectChosenUser, selectDirectMessageRoom, selectDirectUser, selectRoomDetails, selectRoomId, selectUser } from './features/appSlice';\r\nimport CreateChannel from './components/Edit Chat/CreateChannel';\r\nimport RemoveAlertModal from './components/Edit Chat/RemoveAlertModal';\r\nimport $ from \"jquery\"\r\nimport InitAccount from './components/InitAccount/InitAccount';\r\nfunction App() {\r\n  const [user, userLoading] = useAuthState(auth);\r\n  // set status to Online\r\n  const [users, usersLoading] = useCollection(db.collection('users'));\r\n  const userDb = users?.docs.find(elem => elem.data().uid === user?.uid);\r\n  const [resize, setRisze] = useState(false)\r\n  const setStatusToOnline = () => {\r\n    (db.collection('users'))?.doc(userDb?.id)?.update({\r\n      isOnline: true\r\n    })\r\n  }\r\n  useEffect(() => {\r\n    if(user&&userDb){\r\n      setStatusToOnline();\r\n    }\r\n  }, [user, userDb])\r\n  // Dragbar Logic\r\n  const [sideBarWidth, setSideBarWidth] = useState(200);\r\n  const [profileWidth, setProfileWidth] = useState(300)\r\n  const handleResizeSideBar = (e) => {\r\n    let prevX = e.clientX;\r\n    window.addEventListener('mousemove',mousemove);\r\n    window.addEventListener('mouseup', mouseup);\r\n    function mousemove (e) {\r\n        let width = sideBarWidth + e.clientX - prevX;\r\n        setSideBarWidth(width<200?200:width>500?500:width);\r\n    }\r\n    \r\n    function mouseup(){\r\n      window.removeEventListener('mousemove', mousemove);\r\n      window.removeEventListener('mouseup', mouseup);\r\n    }\r\n\r\n  }\r\n\r\n  const handleResizeChat = (e) =>{\r\n    setRisze(true)\r\n    let prevX = e.clientX;\r\n    let browserWidth = document.body.offsetWidth;\r\n    window.addEventListener('mousemove',mousemove);\r\n    window.addEventListener('mouseup', mouseup);\r\n    function mousemove (e) {\r\n        let width = profileWidth - e.clientX + prevX;\r\n        setProfileWidth(width<300?300:width>600?600:width);\r\n    }\r\n    \r\n    function mouseup(){\r\n      window.removeEventListener('mousemove', mousemove);\r\n      window.removeEventListener('mouseup', mouseup);\r\n      setRisze(false)\r\n    }\r\n  } \r\n  // End Dragbar\r\n\r\n  // Get room details\r\n  const roomDetails = useSelector(selectRoomDetails);\r\n  const roomId = useSelector(selectRoomId);\r\n  const roomDirectId = useSelector(selectDirectMessageRoom);\r\n  const id = roomId?roomId:roomDirectId;\r\n  const directUser = useSelector(selectDirectUser);\r\n  const selectedUser = useSelector(selectChosenUser);\r\n\r\n  // Modal stack setting\r\n  const [toggle, setToggle] = useState(false);\r\n  const handleToggle = () => {\r\n    setToggle(!toggle);\r\n    console.log(\"Clicked\")\r\n  }\r\n\r\n  useEffect(() => {\r\n    console.log(toggle)\r\n    console.log($('.modal:visible'))\r\n    $(document).on('shown.bs.modal', '.modal', function(){\r\n      console.log(\"Added!!!1\");\r\n      var zIndex = 1040+(20*$('.modal:visible').length);\r\n      $(this).css('z-index', zIndex);\r\n      setTimeout(function() {\r\n          $('.modal-backdrop').not('.modal-stack').css('z-index', zIndex - 1+`!important`).addClass('modal-stack');\r\n\r\n      }, 0);\r\n    });\r\n    \r\n  }, [toggle])\r\n  // Get user info\r\n  const userInf = useSelector(selectUser);\r\n  \r\n\r\n  return (\r\n    \r\n    <div className=\"App\" onresize>\r\n        {/* <LogIn/> */}\r\n        \r\n\r\n          \r\n          {\r\n          userLoading?<Loading/>:\r\n          (!user) ? (<LogIn/>):\r\n         (!(userInf?.displayName&&userInf?.photoURL)?(<InitAccount/>)\r\n         :<>\r\n         \r\n         <>\r\n          <CreateChannel/>\r\n          <EditChat\r\n          id = {id}\r\n          roomDetails = {roomDetails}\r\n          directUser = {directUser}\r\n          onClick = {handleToggle}\r\n          />\r\n          <EditProfile/>\r\n          <RemoveAlertModal\r\n          uid = {selectedUser?.uid}\r\n          />\r\n          <ProfileModal/>\r\n          <Header user = {user}/>\r\n          <div className=\"work-space-body\">\r\n            <SideBar width={sideBarWidth}/>\r\n            <Reiszer onMouseDown = {handleResizeSideBar}/>\r\n            <Chat\r\n            onClick = {handleToggle}\r\n            />\r\n            <Reiszer onMouseDown = {handleResizeChat}/>\r\n            <SecondaryView width = {profileWidth} resize = {resize}/>\r\n          </div>\r\n      \r\n          </>\r\n          </>)\r\n          }\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {configureStore} from \"@reduxjs/toolkit\"\r\nimport appReducer from \"../features/appSlice\"\r\nimport persistReducer from \"redux-persist/es/persistReducer\"\r\nimport storage from 'redux-persist/lib/storage'\r\nimport persistStore from \"redux-persist/es/persistStore\"\r\nimport autoMergeLevel1 from 'redux-persist/lib/stateReconciler/autoMergeLevel1'\r\nconst persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n    stateReconciler:  autoMergeLevel1,\r\n  }\r\nconst persistedAppReducer = persistReducer(persistConfig, appReducer);\r\n\r\nexport const app = configureStore({\r\n    reducer:{\r\n        app: persistedAppReducer\r\n    }\r\n})\r\nexport const persistor = persistStore(app)\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { app, persistor } from './app/store'\r\nimport { Provider } from 'react-redux';\r\nimport EditProfile from './components/Edit Profile/EditProfile';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { auth } from './firebase';\r\n\r\n\r\nReactDOM.render(\r\n  \r\n  <React.StrictMode>\r\n    \r\n    <Provider store={app}>\r\n      <PersistGate loading=\"null\" persistor = {persistor}>\r\n        <App />\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}