(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){},143:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(35),o=a.n(n),i=(a(102),a(4)),l=(a(103),a(11)),d=a.n(l),r=a(19),u=a(21),m=(a(110),u.a.initializeApp({apiKey:"AIzaSyCmzK2LdP7LkJNXNnQBJxSTX9EOvnIsV-k",authDomain:"chat-app-ba041.firebaseapp.com",projectId:"chat-app-ba041",storageBucket:"chat-app-ba041.appspot.com",messagingSenderId:"410871016552",appId:"1:410871016552:web:1ef1149c5824861da5dfdd",measurementId:"G-BCB1RKDQ3Q"})),j=m.storage(),b=m.firestore(),v=u.a.auth(),O=new u.a.auth.GoogleAuthProvider,h=a(36),f=a(6),p=a(9),g=a(54),x=Object(g.b)({name:"app",initialState:{roomId:null,user:null,docUserId:null,dataUpdated:null,userUid:null,directMessageUid:null,isShowingSecondaryWorkspace:null,directMessageRoomId:null,selectedUser:null,messageSend:!1,localTime:null,roomDetails:null,directUser:null,isModalOpen:null,moves:[],savedItemsToggle:!1,savedItemId:null,onSendingReaction:!1,onReplyInThread:null,threadMessageId:null,threadMessageRoomId:null,threadMessageDirectId:null,onOpenProfile:null,onSave:null,onMainSave:null},reducers:{setOnMainSave:function(e,t){e.onMainSave=t.payload.onMainSave},setOnSave:function(e,t){e.onSave=t.payload.onSave},setOnOpenProfile:function(e,t){e.onOpenProfile=t.payload.onOpenProfile},setThreadMessageRoomId:function(e,t){e.threadMessageRoomId=t.payload.threadMessageRoomId},setThreadMessageDirectId:function(e,t){e.threadMessageDirectId=t.payload.threadMessageDirectId},setThreadMessageId:function(e,t){e.threadMessageId=t.payload.threadMessageId},setOnReplyInThread:function(e,t){e.onReplyInThread=t.payload.onReplyInThread},setOnSendingReaction:function(e,t){e.onSendingReaction=t.payload.onSendingReaction},setSavedItemId:function(e,t){e.savedItemId=t.payload.savedItemId},enterRoom:function(e,t){e.roomId=t.payload.roomId},saveUserInfo:function(e,t){e.user=t.payload.user},docUserId:function(e,t){e.docUserId=t.payload.docUserId},reset:function(e,t){e.roomId=t.payload.initState,e.user=t.payload.initState,e.dataUpdated=t.payload.initState,e.userUid=t.payload.initState,e.directMessageUid=t.payload.initState,e.isShowingSecondaryWorkspace=t.payload.initState,e.docUserId=t.payload.initState,e.directMessageRoomId=t.payload.initState,e.selectedUser=null,e.localTime=null,e.roomDetails=null,e.directUser=null,e.isModalOpen=null,e.moves=[],e.savedItemsToggle=!1,e.isOnline=!1},getDataState:function(e,t){e.dataUpdated=t.payload.dataUpdated},enterDirectMessage:function(e,t){e.directMessageUid=t.payload.directMessageUid,e.directMessageRoomId=t.payload.directMessageRoomId},setUserProfileUid:function(e,t){e.userUid=t.payload.userUid},showSecondaryWorkspace:function(e,t){e.isShowingSecondaryWorkspace=t.payload.isShowingSecondaryWorkspace},setSelectedUser:function(e,t){e.selectedUser=t.payload.selectedUser},sendMessage:function(e,t){e.messageSend=t.payload.messageSend},setTime:function(e,t){e.localTime=t.payload.localTime},setRoomDetails:function(e,t){e.roomDetails=t.payload.roomDetails},setDirectUser:function(e,t){e.directUser=t.payload.directUser},setIsModalOpen:function(e,t){e.isModalOpen=t.payload.isModalOpen},setMoves:function(e,t){e.moves=t.payload.moves},setSavedItemsToggle:function(e,t){e.savedItemsToggle=t.payload.savedItemsToggle}}}),_=x.actions,N=_.setOnMainSave,y=_.setOnSave,I=_.setOnOpenProfile,w=_.setThreadMessageRoomId,S=_.setThreadMessageDirectId,R=_.setThreadMessageId,k=_.setOnReplyInThread,C=_.setOnSendingReaction,M=_.setSavedItemId,L=_.setSavedItemsToggle,U=_.setMoves,T=_.setIsModalOpen,D=_.setDirectUser,E=_.setRoomDetails,P=_.setTime,F=(_.sendMessage,_.setSelectedUser),B=_.showSecondaryWorkspace,W=_.enterRoom,q=_.saveUserInfo,A=_.docUserId,V=_.reset,H=_.getDataState,z=_.enterDirectMessage,Y=_.setUserProfileUid,X=function(e){return e.app.onMainSave},G=function(e){return e.app.onSave},J=function(e){return e.app.onOpenProfile},K=function(e){return e.app.threadMessageRoomId},Q=function(e){return e.app.threadMessageDirectId},Z=function(e){return e.app.threadMessageId},$=function(e){return e.app.onReplyInThread},ee=function(e){return e.app.savedItemsToggle},te=function(e){return e.app.roomId},ae=function(e){return e.app.user},ce=function(e){return e.app.docUserId},se=function(e){return e.app.dataUpdated},ne=function(e){return e.app.directMessageUid},oe=function(e){return e.app.userUid},ie=function(e){return e.app.isShowingSecondaryWorkspace},le=function(e){return e.app.directMessageRoomId},de=function(e){return e.app.selectedUser},re=function(e){return e.app.localTime},ue=function(e){return e.app.roomDetails},me=function(e){return e.app.directUser},je=function(e){return e.app.moves},be=function(e){return e.app.savedItemId},ve=function(e){return e.app.savedItemId},Oe=x.reducer,he=a(0);var fe=function(e){return Object(he.jsxs)("div",{className:"login",children:[Object(he.jsx)("div",{className:"col-md-6 img-bg-container"}),Object(he.jsxs)("div",{className:"col-md-6 form-container",children:[Object(he.jsx)("span",{className:"form__title",children:"Login to continue"}),Object(he.jsxs)("form",{method:"post",children:[Object(he.jsxs)("div",{className:"form__input",children:[Object(he.jsx)("input",{name:"form__email",type:"text",className:"input-area",onChange:e.onEmailChange,value:e.email,required:!0}),Object(he.jsx)("span",{className:"label-span",children:"Email"})]}),Object(he.jsxs)("div",{className:"form__input",children:[Object(he.jsx)("input",{name:"form__password",type:"password",className:"input-area",onChange:e.onPassWordChange,value:e.password,required:!0}),Object(he.jsx)("span",{className:"label-span",children:"Password"})]}),Object(he.jsx)("button",{onClick:e.signInEmail,type:"submit",className:"form__button",children:"Sign in"})]}),Object(he.jsx)("div",{className:"change-form",children:Object(he.jsxs)("p",{children:[Object(he.jsx)("span",{onClick:e.onClick,children:"REGISTER"})," if you don't have any account"]})}),Object(he.jsxs)("div",{className:"notification",style:{color:"red"},children:[""!==e.notification&&Object(he.jsx)("strong",{children:" Warning!"})," ",e.notification]})]})]})};var pe=function(e){return Object(he.jsxs)("div",{className:"login",children:[Object(he.jsx)("div",{className:"col-md-6 img-bg-container"}),Object(he.jsxs)("div",{className:"col-md-6 form-container",children:[Object(he.jsx)("span",{className:"form__title",children:"Register"}),Object(he.jsxs)("form",{method:"post",children:[Object(he.jsxs)("div",{className:"form__input",children:[Object(he.jsx)("input",{name:"form__email",type:"text",className:"input-area",value:e.email,onChange:function(t){return e.onEmailChange(t)},required:!0}),Object(he.jsx)("span",{className:"label-span",children:"Email"})]}),Object(he.jsxs)("div",{className:"form__input",children:[Object(he.jsx)("input",{name:"form__password",type:"password",className:"input-area",value:e.password,onChange:function(t){return e.onPassWordChange(t)},required:!0}),Object(he.jsx)("span",{className:"label-span",children:"Password"})]}),Object(he.jsxs)("div",{className:"form__input",children:[Object(he.jsx)("input",{name:"form__password",type:"password",className:"input-area",value:e.confirm,onChange:function(t){return e.onConfirmChange(t)},required:!0}),Object(he.jsx)("span",{className:"label-span",children:"Confirm Password"})]}),Object(he.jsx)("button",{type:"submit",onClick:e.register,className:"form__button",children:"Sign up"})]}),Object(he.jsx)("div",{className:"change-form",children:Object(he.jsxs)("p",{children:[Object(he.jsx)("span",{onClick:e.onClick,children:"Login"})," if you already have an account"]})}),Object(he.jsxs)("div",{className:"notification",style:{color:"red"},children:[""!==e.notification&&Object(he.jsx)("strong",{children:" Warning!"})," ",e.notification]})]})]})};var ge=function(e){var t=Object(c.useState)(!0),a=Object(i.a)(t,2),s=a[0],n=a[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),u=l[0],m=l[1],j=Object(c.useState)(""),g=Object(i.a)(j,2),x=g[0],_=g[1],N=Object(c.useState)(""),y=Object(i.a)(N,2),I=y[0],w=y[1],S=Object(f.b)(),R=Object(p.a)(b.collection("users")),k=Object(i.a)(R,2),C=k[0],M=k[1],L=(Object(h.a)(v),Object(c.useState)("")),U=Object(i.a)(L,2),T=U[0],D=U[1];function E(e){m(e.target.value)}b.collection("users");var P=function(e){w(e.target.value)};return s?Object(he.jsx)(fe,{onClick:function(){n(!1),D("")},signIn:function(e){e.preventDefault(),v.signInWithPopup(O).then((function(e){return console.log(e.data())})).catch((function(e){return alert(e.message)}))},password:u,email:I,onPassWordChange:E,onEmailChange:P,signInEmail:function(e){e.preventDefault(),v.signInWithEmailAndPassword(I,u).then(function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={displayName:t.user.displayName,email:t.user.email,emailVerified:t.user.emailVerified,uid:t.user.uid,photoURL:t.user.photoURL,isOnline:!0},console.log(M,C),!M&&C&&(c=null===C||void 0===C?void 0:C.docs.find((function(e){return e.data().uid===a.uid})),console.log("userDb",c.data()),(n=c.data()).isOnline=!0,console.log(n),S(q({user:n})),S(A({docUserId:null===(s=c)||void 0===s?void 0:s.id})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){D(e.message)}))},notification:T}):Object(he.jsx)(pe,{onClick:function(){n(!0),D("")},password:u,confirm:x,email:I,onPassWordChange:E,onConfirmChange:function(e){_(e.target.value)},onEmailChange:P,register:function(e){e.preventDefault(),u!==x?D("You type different confirm password!"):v.createUserWithEmailAndPassword(I,u).then((function(e){console.log(e.user);var t={displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified,uid:e.user.uid,photoURL:e.user.photoURL,isOnline:!0};S(q({user:t})),b.collection("users").add(t).then((function(e){return S(A({docUserId:e.id}))}))})).catch((function(e){D(e.message)}))},notification:T})},xe=(a(115),a(116),a(117),a(50)),_e=a.n(xe),Ne=a(41),ye=a.n(Ne),Ie=a(78),we=a.n(Ie),Se=a(183),Re=a(31),ke=a.n(Re);var Ce=function(e){var t=e.icon,a=e.name,c=e.photoURL,s=e.id,n=e.uid,o=e.filterText,l=Object(f.b)(),d=Object(f.c)(ae),r=Object(p.a)(b.collection("directRooms")),u=Object(i.a)(r,2),m=u[0],j=u[1],v=null===d||void 0===d?void 0:d.uid,O=null===m||void 0===m?void 0:m.docs.find((function(e){return n===v?e.data().uids[0]===e.data().uids[1]&&e.data().uids.includes(v):e.data().uids.includes(v)&&e.data().uids.includes(n)})),h=c?o.slice(6):o.slice(9);return-1!=(null===a||void 0===a?void 0:a.indexOf(h))?Object(he.jsx)("div",{className:"c-search__suggesstion-item",children:Object(he.jsx)("div",{className:"c-search__suggesstion-item--inner",onClick:c?function(){l(W({roomId:null})),O||0!=j||(b.collection("directRooms").add({uids:[v,n]}),console.log("added!")),(null===O||void 0===O?void 0:O.id)&&(l(z({directMessageUid:n,directMessageRoomId:null===O||void 0===O?void 0:O.id})),l(F({selectedUser:null})))}:function(){s&&(l(z({directMessageUid:null})),l(W({roomId:s})))},children:Object(he.jsxs)("div",{className:"c-search__suggestion-item__content",children:[Object(he.jsx)("div",{style:c?{backgroundImage:"url(".concat(c,")")}:{},className:"list-item__icon",children:t||""}),Object(he.jsx)("div",{className:"list-item__name",children:a})]})})}):""},Me=a(73),Le=a.n(Me),Ue=a(74),Te=a.n(Ue);var De=function(e){var t=e.icon,a=e.name,c=e.action;return Object(he.jsx)("div",{className:"buttons-list__item",children:Object(he.jsxs)("button",{onClick:c,className:"c-button-unstyled c-search-autocomplete__search-item",children:[t,Object(he.jsx)("span",{className:"c-search-autocomplete__search-item__title",children:a})]})})},Ee=a(34),Pe=a.n(Ee);var Fe=function(e){var t=e.mode,a=e.close;return Object(he.jsxs)("div",{className:"c-search__input-mode",children:[Object(he.jsx)("span",{className:"c-search__input-mode__text",children:t}),Object(he.jsx)("div",{className:"c-search__input-mode__close-button",onClick:a,role:"button",children:Object(he.jsx)(Pe.a,{})})]})},Be=a(72),We=a.n(Be);var qe=function(e){var t=e.mode,a=e.filterText,c=e.actualText,s=Object(p.a)(b.collection("room")),n=Object(i.a)(s,3),o=n[0],l=(n[1],n[2],Object(p.a)(b.collection("users"))),d=Object(i.a)(l,1)[0],r=Object(f.c)(ae),u=null===r||void 0===r?void 0:r.uid;return Object(he.jsxs)("div",{className:"c-search__suggestion-list",children:[Object(he.jsxs)("div",{className:"c-search__content__header",children:["channels"===t&&Object(he.jsx)("span",{children:"Recent channels"}),"users"===t&&Object(he.jsx)("span",{children:"Recent users"})]}),"channels"===t&&Object(he.jsx)(he.Fragment,{children:null===o||void 0===o?void 0:o.docs.map((function(e){var t=e.data().isPrivate,s=e.data().members;if((null===s||void 0===s?void 0:s.includes(u))&&t||!t)return Object(he.jsx)(Ce,{name:e.data().name,icon:t?Object(he.jsx)(We.a,{}):"#",id:e.id,filterText:a+c})}))}),"users"===t&&Object(he.jsx)(he.Fragment,{children:null===d||void 0===d?void 0:d.docs.map((function(e){return Object(he.jsx)(Ce,{name:e.data().displayName?e.data().displayName:e.data().email,photoURL:e.data().photoURL?e.data().photoURL:"default-avatar.jpg",uid:e.data().uid,filterText:a+c})}))})]})};var Ae=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),o=Object(i.a)(n,2),l=o[0],d=o[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),m=u[0],j=u[1],b=Object(c.useState)(""),v=Object(i.a)(b,2),O=v[0],h=v[1];Object(c.useEffect)((function(){var e=/^Channel:/.test(m+O),t=/^User:/.test(m+O);return e&&s(!0),t&&d(!0),function(){d(!1),s(!1)}}),[m]);var p=Object(f.c)(ae);return null===p||void 0===p||p.uid,Object(he.jsxs)("div",{className:"dropdown-menu",style:{paddingTop:0},"aria-labelledby":"dropdownMenuSearchHeader",children:[Object(he.jsxs)("div",{className:"search-bar",disabled:!0,style:{padding:"0"},children:[Object(he.jsxs)("div",{className:"header__search__input-and-close",children:[Object(he.jsxs)("div",{className:"form-group c-search__input-box",children:[""===m?Object(he.jsx)(ye.a,{className:"search-icon"}):Object(he.jsx)(Fe,{close:function(){j("")},mode:l?"Users":a?"Channels":""}),Object(he.jsx)("input",{value:O,onChange:function(e){h(e.target.value)},type:"text",className:"c-search-input",style:{borderBottomColor:"none"},placeholder:"Search because it's faster than scrolling"})]}),Object(he.jsx)("div",{role:"button",className:"c-search__close-button",onClick:function(){document.querySelector("#dropdownMenuSearchHeader").click()},children:Object(he.jsx)(Pe.a,{})})]}),!a&&!l&&Object(he.jsxs)("div",{className:"search__content",children:[Object(he.jsx)("div",{className:"c-search__content__header",children:"I'm looking for..."}),Object(he.jsxs)("div",{className:"buttons-list",children:[Object(he.jsx)(De,{icon:Object(he.jsx)(Le.a,{}),action:function(){j("Channel: ")},name:"Channels"}),Object(he.jsx)(De,{icon:Object(he.jsx)(Te.a,{}),action:function(){j("User: ")},name:"People"})]})]}),a&&Object(he.jsx)(qe,{filterText:m,actualText:O,mode:"channels"}),l&&Object(he.jsx)(qe,{filterText:m,actualText:O,mode:"users"})]}),Object(he.jsx)("div",{className:"search__footer",children:Object(he.jsx)("span",{children:"Not the result you expected?"})})]})};var Ve=function(e){var t,a,c,s,n,o,l,d=e.id;console.log(d);var r=Object(p.a)(d&&b.collection("room").doc(d)),u=Object(i.a)(r,1)[0],m=Object(p.a)(d&&b.collection("directRooms").doc(d)),j=Object(i.a)(m,1)[0],v=null===u||void 0===u||null===(t=u.data())||void 0===t?void 0:t.name,O=Object(f.c)(ae),h=null===j||void 0===j||null===(a=j.data())||void 0===a?void 0:a.uids,g=null===j||void 0===j||null===(c=j.data())||void 0===c?void 0:c.users.find((function(e){return e.uid!==O.uid}));h&&h[0]===h[1]&&(g=null===j||void 0===j||null===(s=j.data())||void 0===s?void 0:s.users[0]),console.log(g);var x=(null===(n=g)||void 0===n?void 0:n.photoURL)?null===(o=g)||void 0===o?void 0:o.photoURL:"default-avatar.jpg",_=Object(f.b)();return Object(he.jsx)("div",{className:"moves-item",role:"button",onClick:function(){if(h){if(j){_(W({roomId:null}));var e=h.find((function(e){return e!=O.uid}));_(z({directMessageRoomId:d,directMessageUid:e}))}}else _(z({directMessageUid:null,directMessageRoomId:null})),_(W({roomId:d}));document.querySelector("#historyDropdown").click()},children:Object(he.jsxs)("div",{className:"moves-item__inner",children:[Object(he.jsx)("div",{className:"move__symbol",style:h?{backgroundImage:"url(".concat(x,")")}:{},children:h?"":"#"}),Object(he.jsx)("span",{className:"move__name",children:h?null===(l=g)||void 0===l?void 0:l.displayName:v})]})})};var He=function(){var e=Object(f.c)(ae),t=Object(p.a)(b.collection("users")),a=Object(i.a)(t,2),s=a[0],n=(a[1],null===s||void 0===s?void 0:s.docs.find((function(t){return t.data().uid===(null===e||void 0===e?void 0:e.uid)}))),o=Object(c.useState)(!1),l=Object(i.a)(o,2),u=l[0],m=l[1],j=Object(f.b)(),O=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.signOut().then((function(){b.collection("users").doc(null===n||void 0===n?void 0:n.id).update({isOnline:!1})})).catch((function(e){return alert(e.message)}));case 2:j(V({initState:null}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=null===n||void 0===n?void 0:n.data().email,g=null===n||void 0===n?void 0:n.data().displayName,x=null===n||void 0===n?void 0:n.data().photoURL;Object(c.useEffect)((function(){return u&&j(F({selectedUser:{displayName:null===n||void 0===n?void 0:n.data().displayName,email:null===n||void 0===n?void 0:n.data().email,uid:null===e||void 0===e?void 0:e.uid,photoURL:x,isOnline:null===e||void 0===e?void 0:e.isOnline,whatIDo:null===n||void 0===n?void 0:n.data().whatIDo}})),function(){m(!1)}}),[u]);var _=Object(f.c)(je);return Object(he.jsxs)("div",{className:"header-container",children:[Object(he.jsx)("div",{className:"header__left",children:Object(he.jsxs)(Se.a,{className:"history-dropdown dropdown",children:[Object(he.jsx)(Se.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(he.jsx)(_e.a,{className:"access-time-icon"})}),Object(he.jsxs)(Se.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",style:{width:360},children:[Object(he.jsx)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:"Recent"}),null===_||void 0===_?void 0:_.map((function(e){return Object(he.jsx)(Ve,{id:e},e)}))]})]})}),Object(he.jsxs)("div",{className:"dropdown header__search",children:[Object(he.jsxs)("div",{className:"header__search--inner",id:"dropdownMenuSearchHeader",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-auto-close":"outside",children:[Object(he.jsx)(ye.a,{}),Object(he.jsx)("span",{children:"Search fetch"})]}),Object(he.jsx)(Ae,{})]}),Object(he.jsxs)("div",{className:"header__right",children:[Object(he.jsxs)(Se.a,{className:"history-dropdown dropdown",children:[Object(he.jsx)(Se.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(he.jsx)(we.a,{})}),Object(he.jsx)(Se.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",children:Object(he.jsx)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:"This functionality is currently unavailable"})})]}),Object(he.jsx)("div",{className:"header__avatar",children:Object(he.jsxs)(Se.a,{className:"user-dropdown dropdown",children:[Object(he.jsx)(Se.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(he.jsx)("div",{className:"user-avatar",style:{backgroundImage:"url(".concat(x||"default-avatar.jpg",")")}})}),Object(he.jsxs)(Se.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",children:[Object(he.jsxs)("div",{className:"dropdown-item main-menu__user",children:[Object(he.jsx)("div",{className:"main-menu__user__avatar",style:{backgroundImage:"url(".concat(x||"default-avatar.jpg",")")}}),Object(he.jsxs)("div",{className:"main-menu__user__details",children:[Object(he.jsx)("div",{className:"main-menu__user__name",children:g||h}),Object(he.jsxs)("span",{className:"main-menu__user__status",children:[Object(he.jsx)(ke.a,{style:{fontSize:"small"}}),"Active"]})]})]}),Object(he.jsx)("div",{className:"c-menu__separator",children:Object(he.jsx)("hr",{className:"c-menu__separator__line"})}),Object(he.jsx)("div",{className:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#editProfile",children:"Edit profile"}),Object(he.jsx)("div",{className:"dropdown-item",onClick:function(){m(!0),j(Y({userUid:null===e||void 0===e?void 0:e.uid})),j(B({isShowingSecondaryWorkspace:!0})),j(B({isShowingSecondaryWorkspace:!0})),j(k({onReplyInThread:null})),j(y({onSave:null})),j(I({onOpenProfile:!0}))},children:"View profile"}),Object(he.jsx)("div",{className:"c-menu__separator",children:Object(he.jsx)("hr",{className:"c-menu__separator__line"})}),Object(he.jsx)("div",{className:"dropdown-item",onClick:O,children:"Sign out"})]})]})})]})]})},ze=(a(119),a(44)),Ye=a.n(ze);var Xe=function(e){var t=e.icon,a=e.title,s=e.photoURL,n=e.uid,o=e.id,l=e.email,u=e.isOnline,m=e.isUser,j=e.usersHaveReadRoom,v=e.isPrivate,O=e.members,h=e.savedItems,g=Object(f.b)(),x=Object(f.c)(ne),_=Object(f.c)(le),w=Object(f.c)(ae),S=null===w||void 0===w?void 0:w.uid,R=Object(p.a)(b.collection("directRooms")),C=Object(i.a)(R,2),M=C[0],L=C[1],T=Object(p.a)(b.collection("users")),D=Object(i.a)(T,1)[0],E=Object(c.useState)(!1),P=Object(i.a)(E,2),F=(P[0],P[1]),q=null===M||void 0===M?void 0:M.docs.find((function(e){return n===S?e.data().uids[0]===e.data().uids[1]&&e.data().uids.includes(S):e.data().uids.includes(S)&&e.data().uids.includes(n)})),A=null===q||void 0===q?void 0:q.data().usersHaveRead,V=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q||!n||!S||L||!D){e.next=4;break}return e.next=3,b.collection("directRooms").add({uids:[S,n]}).then((function(e){var t,a;b.collection("directRooms").doc(e.id).update({users:[null===D||void 0===D||null===(t=D.docs.find((function(e){return e.data().uid===S})))||void 0===t?void 0:t.data(),null===D||void 0===D||null===(a=D.docs.find((function(e){return e.data().uid===n})))||void 0===a?void 0:a.data()]})}));case 3:console.log("added!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return V(),function(){F(!1)}}),[x,_,L]);var H=Object(f.c)(te),Y=Object(f.c)(je);return Object(c.useEffect)((function(){h||function(e){var t=null===Y||void 0===Y?void 0:Y.filter((function(t){return t!=e}));t.unshift(e),g(U({moves:t}))}(H||_)}),[H,x]),(null===O||void 0===O?void 0:O.includes(w.uid))||m||"A86N0fmTCy8fTd4NS0Ne"===o||h?Object(he.jsxs)("div",{className:H===o||x===n?"sidebar__option-container active":"sidebar__option-container",tabIndex:"1",role:"button",onClick:h?function(){g(B({isShowingSecondaryWorkspace:!0})),g(y({onSave:!0})),g(I({onOpenProfile:null})),g(k({onReplyInThread:null}))}:o&&!m?function(){g(N({onMainSave:null}));var e=j?j.slice():[];o&&(e.includes(w.uid)||e.push(w.uid),g(z({directMessageUid:null})),g(W({roomId:o})),b.collection("room").doc(o).update({usersHaveRead:e}))}:m?function(){if(g(N({onMainSave:null})),F(!0),g(W({roomId:null})),null===q||void 0===q?void 0:q.id){var e=A;e||(e=[]),e.includes(w.uid)||e.push(w.uid),g(z({directMessageUid:n,directMessageRoomId:null===q||void 0===q?void 0:q.id})),b.collection("directRooms").doc(q.id).update({usersHaveRead:e})}}:function(){},children:[t&&Object(he.jsx)("div",{className:"sidebar__icon",children:t}),t?Object(he.jsx)("div",{className:"sidebar__option__title",children:a}):Object(he.jsxs)("div",{className:"sidebar__option__channel",children:[m?s?Object(he.jsx)("div",{className:"img",style:{backgroundImage:"url(".concat(s,")")}}):Object(he.jsx)("img",{src:"default-avatar.jpg",alt:"avatar"}):v?Object(he.jsx)(Ye.a,{}):Object(he.jsx)("span",{children:"#"}),Object(he.jsx)(ke.a,{className:m?u?"status online":"status offline":"no-status"}),Object(he.jsx)("span",{className:(null===A||void 0===A?void 0:A.includes(S))||(null===j||void 0===j?void 0:j.includes(S))||t?"":"bold",children:a||l})]})]}):Object(he.jsx)("div",{})},Ge=a(64),Je=a.n(Ge),Ke=a(81),Qe=a.n(Ke);var Ze=function(e){var t=!1;return Object(he.jsxs)("div",{className:"collapse-container",children:[Object(he.jsxs)("div",{className:"sidebar__option-container",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.id),"aria-expanded":"true","aria-controls":"".concat(e.id),onClick:function(){t=!t},children:[Object(he.jsx)("div",{className:t&&"Channels"===e.title?"sidebar__icon arrow-rotate":"sidebar__icon",children:e.icon}),Object(he.jsx)("div",{className:"item-title",children:e.title})]}),e.addIcon&&Object(he.jsx)("div",{className:"add-channel-button",role:"button","data-bs-toggle":"modal","data-bs-target":"#createChannel",children:e.addIcon}),Object(he.jsx)("div",{className:"collapse",id:"".concat(e.id),children:e.options&&e.options.map((function(e){return e}))})]})},$e=a(79),et=a.n($e),tt=a(80),at=a.n(tt);var ct=function(){return Object(he.jsx)("div",{children:Object(he.jsx)("div",{className:"dropdown general-dropdown",children:Object(he.jsxs)("div",{className:"side-bar__header ",children:[Object(he.jsx)("div",{className:"side-bar__header__button dropdown-toggle",id:"fetchGeneralInfo","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(he.jsx)("div",{className:"side-bar__header__info ",children:Object(he.jsxs)("button",{className:"side-bar__header__team-name c-button-unstyled",children:[Object(he.jsx)("span",{children:"Fetch"}),Object(he.jsx)(et.a,{})]})})}),Object(he.jsx)("button",{className:"c-button-unstyled send-button",children:Object(he.jsx)(at.a,{style:{height:16}})}),Object(he.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"fetchGeneralInfo",children:[Object(he.jsxs)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:[Object(he.jsx)("div",{className:"server-logo",children:Object(he.jsx)("big",{children:Object(he.jsx)("strong",{children:"F"})})}),Object(he.jsx)("span",{children:"Fetch"})]}),Object(he.jsx)("div",{className:"dropdown-item",role:"button","data-bs-toggle":"modal","data-bs-target":"#createChannel",children:"Create channel"})]})]})})})};a(67);var st=function(){return Object(he.jsx)("div",{className:"loader"})},nt=a(51),ot=a.n(nt);var it=function(e){var t=e.width,a=Object(p.a)(b.collection("room")),c=Object(i.a)(a,3),s=c[0],n=c[1],o=(c[2],Object(f.c)(ae),Object(p.a)(b.collection("users"))),l=Object(i.a)(o,3),d=l[0],r=l[1],u=(l[2],Object(p.a)(b.collection("directRooms"))),m=(Object(i.a)(u,1)[0],[]);null===s||void 0===s||s.docs.map((function(e){return m.push(Object(he.jsx)(Xe,{title:e.data().name,id:e.id,isPrivate:e.data().isPrivate,usersHaveReadRoom:e.data().usersHaveRead,members:e.data().members},e.id))}));var j=[];return null===d||void 0===d||d.docs.map((function(e){return j.push(Object(he.jsx)(Xe,{title:e.data().displayName,email:e.data().email,uid:e.data().uid,photoURL:e.data().photoURL,isOnline:e.data().isOnline,isUser:!0},e.id))})),Object(he.jsx)("div",{className:"side-bar-container",style:{width:t},children:n&&r?Object(he.jsx)(st,{}):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(ct,{}),Object(he.jsx)(Xe,{title:"Saved items",icon:Object(he.jsx)(ot.a,{}),savedItems:!0}),Object(he.jsx)(Ze,{title:"Channels",icon:Object(he.jsx)(Je.a,{}),id:"channels",addIcon:Object(he.jsx)(Qe.a,{}),options:m}),Object(he.jsx)(Ze,{title:"Direct Message",icon:Object(he.jsx)(Je.a,{}),id:"directmessage",options:j})]})})},lt=(a(120),a(121),a(143),a(86)),dt=a.n(lt),rt=a(62),ut=a(37),mt=(a(153),a(52)),jt=a.n(mt);a(154);var bt=function(e){var t=e.emoji,a=e.title,c=e.action;return e.onSelect,Object(he.jsx)("div",{onClick:function(){return c(t)},className:"c-button-unstyled message-action__button","data-bs-toggle":"tooltip","data-bs-placement":"top",title:a,children:t})},vt=a(84),Ot=a.n(vt),ht=a(65),ft=a.n(ht);var pt=function(e){var t=e.emoji,a=e.count,s=e.senders,n=e.onClick,o=Object(f.c)(ae),l=Object(c.useState)(!1),d=Object(i.a)(l,2),r=d[0],u=d[1];return Object(c.useEffect)((function(){(null===s||void 0===s?void 0:s.includes(null===o||void 0===o?void 0:o.displayName))?u(!0):u(!1)})),Object(he.jsxs)("button",{className:r?"c-button-unstyled c-reaction active":"c-button-unstyled c-reaction",onClick:function(){return n(t)},children:[Object(he.jsx)("div",{className:"c-reaction__emoji",children:t}),Object(he.jsx)("span",{className:"c-reaction__count",children:a})]})},gt=a(83),xt=a.n(gt),_t=a(82),Nt=a.n(_t),yt=s.a.forwardRef((function(e,t){var a=e.id,s=e.userName,n=e.userImage,o=e.message,l=e.timestamp,m=e.uid,j=e.description,v=e.reactions,O=e.onClick,h=e.emojiMartPosition,g=e.emojiReact,x=e.reactToggle,_=e.savedBy,N=e.isSaved,U=(e.moveToItem,e.inThread),T=e.messageRoomId,D=e.messageRoomDirectId,E=e.replyTo,P=e.inMainSave,W=Object(f.c)(ae),q=(null===W||void 0===W?void 0:W.uid)===m?"You":s,A=Object(c.useState)(!1),V=Object(i.a)(A,2),H=V[0],z=V[1],X=Object(f.c)(te),G=D?null:T||X,J=Object(f.c)(le),Z=T?null:D||J,$=Object(p.a)(a&&(G?b.collection("room").doc(G).collection("messages").doc(a).collection("subMessages").orderBy("timestamp","asc"):Z?b.collection("directRooms").doc(Z).collection("messages").doc(a).collection("subMessages").orderBy("timestamp","asc"):void 0)),se=Object(i.a)($,1)[0],ne=Object(p.a)(b.collection("users")),de=Object(i.a)(ne,2),re=de[0],ue=de[1],me=Object(f.c)(oe),je=null===re||void 0===re?void 0:re.docs.find((function(e){return e.data().uid===me})),ve=(null===je||void 0===je?void 0:je.data().photoURL)?je.data().photoURL:"default-avatar.jpg",Oe=null===je||void 0===je?void 0:je.data().isOnline,fe=new Date(null===l||void 0===l?void 0:l.toDate()),pe=fe.getDate(),ge=fe.getMonth(),xe=fe.getHours(),_e=fe.getMinutes();_e<10&&(_e="0"+_e);var Ne=xe+":"+_e+" ";console.log(pe+ge);var ye=Object(c.useState)(!1),Ie=Object(i.a)(ye,2),we=Ie[0],Se=Ie[1],Re=Object(c.useState)(null),ke=Object(i.a)(Re,2),Ce=(ke[0],ke[1]),Me=N?"aa"+a:U?"aaa"+a:"a"+a;Object(c.useEffect)((function(){h||z(!1)}),[h]);var Le=Object(f.b)(),Ue=function(){ue||(Le(Y({userUid:m})),Se(!0),console.log("dispatched"))};console.log("...");var Te=Object(f.c)(ie);Object(c.useEffect)((function(){return we&&Le(F({selectedUser:{displayName:null===je||void 0===je?void 0:je.data().displayName,email:null===je||void 0===je?void 0:je.data().email,uid:me,photoURL:ve,isOnline:Oe,whatIDo:null===je||void 0===je?void 0:je.data().whatIDo}})),function(){Se(!1)}}),[we,me,Te]);var De=function(){},Ee=Object(f.c)(ce),Pe=Object(c.useState)(""),Fe=Object(i.a)(Pe,2),Be=(Fe[0],Fe[1]),We=function(){Le(B({isShowingSecondaryWorkspace:!0})),Le(y({onSave:null})),Le(I({onOpenProfile:null})),Le(k({onReplyInThread:!0})),Le(R({threadMessageId:a})),Le(w({threadMessageRoomId:T||G})),Le(S({threadMessageDirectId:D||Z}))},qe=Object(f.c)(K),Ae=Object(f.c)(Q),Ve=Object(f.c)(ee),He=function(){var e=Object(r.a)(d.a.mark((function e(){var t,c,s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le(L({savedItemsToggle:!Ve})),t=_||[],!a){e.next=20;break}if(_&&_.includes(Ee)){e.next=8;break}t.push(Ee),E?(b.collection("users").doc(Ee).collection("savedItems").add({messageId:a||null,roomId:qe||null,roomDirectId:Ae||null,timestamp:u.a.firestore.FieldValue.serverTimestamp(),replyTo:E}),qe?b.collection("room").doc(qe).collection("messages").doc(E).collection("subMessages").doc(a).update({savedBy:t}):Ae&&b.collection("directRooms").doc(Ae).collection("messages").doc(E).collection("subMessages").doc(a).update({savedBy:t})):U?(b.collection("users").doc(Ee).collection("savedItems").add({messageId:a||null,roomId:qe||null,roomDirectId:Ae?Z:null,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),qe?b.collection("room").doc(qe).collection("messages").doc(a).update({savedBy:t}):Ae&&b.collection("directRooms").doc(Ae).collection("messages").doc(a).update({savedBy:t})):(b.collection("users").doc(Ee).collection("savedItems").add({messageId:a||null,roomId:G||null,roomDirectId:Z||null,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),G?b.collection("room").doc(G).collection("messages").doc(a).update({savedBy:t}):Z&&b.collection("directRooms").doc(Z).collection("messages").doc(a).update({savedBy:t})),e.next=18;break;case 8:return c=t.indexOf(Ee),t.splice(c,1),e.next=12,b.collection("users").doc(Ee).collection("savedItems").where("messageId","==",a).get();case 12:s=e.sent,n=null,console.log(s),s.forEach((function(e){return n=e.id})),n&&b.collection("users").doc(Ee).collection("savedItems").doc(n).delete().then((function(){return console.log("Delete!")})).catch((function(e){return console.log(e.message)})),E?qe?b.collection("room").doc(qe).collection("messages").doc(E).collection("subMessages").doc(a).update({savedBy:t}):Ae&&b.collection("directRooms").doc(Ae).collection("messages").doc(E).collection("subMessages").doc(a).update({savedBy:t}):U?qe?b.collection("room").doc(qe).collection("messages").doc(a).update({savedBy:t}):Ae&&b.collection("directRooms").doc(Ae).collection("messages").doc(a).update({savedBy:t}):G?b.collection("room").doc(G).collection("messages").doc(a).update({savedBy:t}):Z&&b.collection("directRooms").doc(Z).collection("messages").doc(a).update({savedBy:t});case 18:e.next=21;break;case 20:return e.abrupt("return");case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(e){if(Le(C({onSendingReaction:!0})),setTimeout((function(){Le(C({onSendingReaction:!1}),500)})),a){N&&Le(L({savedItemsToggle:!Ve}));var t=v?v.slice():[],c=t.findIndex((function(t,a){if(t.title===e)return!0}));if(c>-1){var s=t[c].count,n=W.displayName,o=t[c].senders;if(o.includes(null===W||void 0===W?void 0:W.displayName)){var i=o.indexOf(n);o.splice(i,1),s-=1}else s+=1,o.push(n);t[c].senders=o,t[c].count=s}else if(-1===c){var l=W.displayName,d=[];d.push(l),t.push({title:e,senders:d,count:1})}U?Ae?b.collection("directRooms").doc(Ae).collection("messages").doc(a).update({reactions:t}):qe&&b.collection("room").doc(qe).collection("messages").doc(a).update({reactions:t}):E?Ae?b.collection("directRooms").doc(Ae).collection("messages").doc(E).collection("subMessages").doc(a).update({reactions:t}):qe&&b.collection("room").doc(qe).collection("messages").doc(E).collection("subMessages").doc(a).update({reactions:t}):Z?(console.log(a),b.collection("directRooms").doc(Z).collection("messages").doc(a).update({reactions:t})):G&&b.collection("room").doc(G).collection("messages").doc(a).update({reactions:t})}};Object(c.useEffect)((function(){g&&""!==g&&h&&a===(null===h||void 0===h?void 0:h.id)&&(console.log(g),ze(g))}),[x]);var Ye=Object(f.c)(be);Object(c.useEffect)((function(){var e;Ye&&(null===t||void 0===t||null===(e=t.current)||void 0===e||e.scrollIntoView({}));return function(){setTimeout((function(){Le(M({savedItemId:null}))}),1e3)}}),[G,Z,Ye]);Object(c.useRef)(null);var Xe=Object(c.useState)(!1),Ge=Object(i.a)(Xe,2),Je=Ge[0],Ke=Ge[1];return Object(he.jsxs)("div",{ref:t,className:H&&!P?(null===_||void 0===_?void 0:_.includes(Ee))?"message-container active saved":"message-container active":(null===_||void 0===_?void 0:_.includes(Ee))&&!P?"message-container saved":"message-container",onMouseOver:function(){j||h&&h.id!==a?z(!1):z(!0)},onMouseOut:function(){h&&h.id===a?z(!0):z(!1)},id:Me,children:[(null===_||void 0===_?void 0:_.includes(Ee))&&!P&&Object(he.jsxs)("div",{className:"message__label",children:[Object(he.jsx)("div",{className:"message__label__icon",children:Object(he.jsx)(ft.a,{})}),Object(he.jsx)("div",{role:"button",className:"message__label__content",children:"Added to your saved items"})]}),Object(he.jsxs)("div",{className:"message-container__inner",children:[(l||j)&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("div",{style:{backgroundImage:"url(".concat(n,")")},alt:"",role:"button",onClick:m?Ue:De,"data-bs-toggle":m?"modal":"false","data-bs-target":"#profileModal",className:"message__avatar"}),Object(he.jsxs)("div",{className:"message__info",children:[Object(he.jsxs)("div",{className:"status",children:[Object(he.jsx)("a",{role:"button",onClick:m?Ue:De,"data-bs-toggle":m?"modal":"false","data-bs-target":"#profileModal",children:j?s:q})," ",Object(he.jsx)("span",{children:j?"":Ne})]}),Object(he.jsx)("p",{className:"message",children:o}),Object(he.jsx)("div",{className:"message__reaction-bar",children:v?v.map((function(e){if(e.count>0)return Object(he.jsx)(pt,{emoji:e.title,count:e.count,senders:e.senders,onClick:ze},e.title)})):""}),(null===se||void 0===se?void 0:se.docs.length)>0&&!U&&!P&&Object(he.jsxs)("div",{className:"message__thread-button",onMouseOver:function(){Ke(!0)},onMouseOut:function(){Ke(!1)},children:[Object(he.jsx)("div",{className:"message__thread-avatar",style:{backgroundImage:"url(".concat(se.docs[se.docs.length-1].data().userImage,")")},alt:"",role:"button",onClick:function(){return se.docs[se.docs.length-1].data().uid?(e=se.docs[se.docs.length-1].data().uid,void(ue||(Le(Y({userUid:e})),Se(!0),console.log("dispatched")))):void 0;var e},"data-bs-toggle":m?"modal":"false","data-bs-target":"#profileModal"}),Object(he.jsx)("div",{className:"message__thread-count",onClick:We,children:(null===se||void 0===se?void 0:se.docs.length)>1?(null===se||void 0===se?void 0:se.docs.length)+" replies":(null===se||void 0===se?void 0:se.docs.length)+" reply"}),Object(he.jsx)("div",{className:"message__thread-description",onClick:We,children:Je?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("span",{className:"message__thread-description__content",children:"View thread"}),Object(he.jsx)(Nt.a,{className:"message__bar-arrow"})]}):Object(he.jsx)("span",{className:"message__thread-description__content",children:"Last reply"})})]})]})]}),Object(he.jsx)("div",{className:H?"c-message__action":"c-message__action collapse",children:Object(he.jsxs)("div",{className:"c-message__action__group",children:[!N&&!E&&!U&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(bt,{action:ze,emoji:"\u2705",title:"Completed"}),Object(he.jsx)(bt,{action:ze,emoji:"\ud83d\udc40",title:"Taking a look..."}),Object(he.jsx)(bt,{action:ze,emoji:"\ud83d\ude4c",title:"Nicely done"})]}),Object(he.jsx)(bt,{onSelect:function(e){var t=e.native;Be(t)},action:function(){var e=document.querySelector("#"+Me).getBoundingClientRect();Ce(e),O({positionInfo:e,id:a})},emoji:Object(he.jsx)(jt.a,{}),title:"Find a reaction"}),U&&Object(he.jsx)(bt,{action:function(){},emoji:Object(he.jsx)(xt.a,{}),title:"View in channel"}),!E&&!U&&Object(he.jsx)(bt,{action:We,emoji:Object(he.jsx)(Ot.a,{}),title:"Reply in thread"}),Object(he.jsx)(bt,{action:He,emoji:(null===_||void 0===_?void 0:_.includes(Ee))?Object(he.jsx)(ft.a,{style:{color:"red"}}):Object(he.jsx)(ot.a,{}),title:"Add to saved items"})]})})]})]})})),It=a(85),wt=a.n(It);var St=function(e){var t,a,s,n,o,l,u,m,j,v=e.width,O=(e.resize,Object(f.c)(de)),h=null===O||void 0===O?void 0:O.photoURL,g=null===O||void 0===O?void 0:O.displayName,x=null===O||void 0===O?void 0:O.isOnline,_=Object(f.c)(ie),w=Object(f.c)(te),S=Object(f.c)(le),R=Object(f.b)(),C=Object(f.c)(ae),L=null===O||void 0===O?void 0:O.whatIDo,U=Object(f.c)(re),T=Object(c.useRef)(null),D=Object(f.c)(ce),E=Object(c.useState)(""),P=Object(i.a)(E,2),F=P[0],q=P[1],A=Object(c.useState)(!1),V=Object(i.a)(A,2),H=V[0],Y=V[1],se=Object(c.useState)(null),ne=Object(i.a)(se,2),oe=ne[0],ue=ne[1],me=Object(p.a)(b.collection("users")),je=Object(i.a)(me,2),be=je[0],ve=(je[1],Object(f.c)(ee)),Oe=Object(p.a)(b.collection("room")),fe=Object(i.a)(Oe,1)[0],pe=Object(p.a)(w&&b.collection("room").doc(w).collection("messages")),ge=Object(i.a)(pe,1)[0],xe=Object(p.a)(b.collection("directRooms")),_e=Object(i.a)(xe,1)[0],Ne=Object(p.a)(S&&b.collection("directRooms").doc(S).collection("messages")),ye=Object(i.a)(Ne,1)[0];console.log(S);var Ie=Object(p.a)(D&&b.collection("users").doc(D).collection("savedItems").orderBy("timestamp","desc")),we=Object(i.a)(Ie,2),Se=we[0],Re=we[1],Ce=function(){R(B({isShowingSecondaryWorkspace:!1})),R(I({onOpenProfile:null})),R(k({onReplyInThread:null})),R(y({onSave:null})),console.log("close");var e=document.querySelector(".chat-container");null===e||void 0===e||e.classList.remove("collapse")};console.log(ve),Object(c.useEffect)((function(){function e(e){T.current&&!T.current.contains(e.target)&&ue(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}));var Me=function(e){ue(e),console.log(e)},Le=Object(c.useState)(null),Ue=Object(i.a)(Le,2),Te=Ue[0],De=Ue[1];Object(c.useEffect)(Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Toggle"),t=null===Se||void 0===Se?void 0:Se.docs.map(function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s,n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().messageId,c=t.data().roomId,s=t.data().roomDirectId,n=t.data().replyTo,o=null,n?(console.log("REPLY TO"),c?o=b.collection("room").doc(c).collection("messages").doc(n).get():s&&(o=b.collection("directRooms").doc(s).collection("messages").doc(n).get())):c?o=b.collection("room").doc(c).collection("messages").doc(a).get():s&&a&&(o=b.collection("directRooms").doc(s).collection("messages").doc(a).get()),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(t),[],t&&(Promise.all(t).then((function(e){return De(e)})),console.log(Te));case 5:case"end":return e.stop()}}),e)}))),[ve,Se,ge,ye]);var Ee=function(e){if(e.savedMessageInfo){var t=e.savedMessageInfo.roomId,a=e.savedMessageInfo.roomDirectId;if(t){var c=null===fe||void 0===fe?void 0:fe.docs.find((function(e){return e.id===t})).data().usersHaveRead;c||(c=[]),c.includes(C.uid)||c.push(C.uid),R(z({directMessageRoomId:null,directMessageUid:null})),R(W({roomId:t})),b.collection("room").doc(t).update({usersHaveRead:c})}else if(a){console.log("DIrect");var s=null===_e||void 0===_e?void 0:_e.docs.find((function(e){return e.id===a})).data().usersHaveRead;s||(s=[]),s.includes(C.uid)||s.push(C.uid),R(W({roomId:null})),R(z({directMessageRoomId:a,directMessageUid:e.uid})),b.collection("directRooms").doc(a).update({usersHaveRead:s})}R(M({savedItemId:e.id}))}};console.log(w);var Fe=Object(f.c)($),Be=Object(f.c)(Z),We=Object(f.c)(K),qe=Object(f.c)(Q),Ae=Object(p.b)(Be&&(We?b.collection("room").doc(We).collection("messages").doc(Be):qe?b.collection("directRooms").doc(qe).collection("messages").doc(Be):void 0)),Ve=Object(i.a)(Ae,2),He=Ve[0],ze=Ve[1],Ye=Object(p.a)(Be&&(We?b.collection("room").doc(We).collection("messages").doc(Be).collection("subMessages").orderBy("timestamp","asc"):qe?b.collection("directRooms").doc(qe).collection("messages").doc(Be).collection("subMessages").orderBy("timestamp","asc"):void 0)),Xe=Object(i.a)(Ye,1)[0],Ge=Object(f.c)(J),Je=Object(f.c)(G),Ke=Object(p.b)(Be&&(We?b.collection("room").doc(We):qe?b.collection("directRooms").doc(qe):void 0)),Qe=Object(i.a)(Ke,1)[0],Ze=Be&&(We?null===Qe||void 0===Qe?void 0:Qe.data().name:qe?null===Qe||void 0===Qe||null===(t=Qe.data().users)||void 0===t||null===(a=t.find((function(e){return be[0]===be[1]?e.uid===C.uid:C.uid!==e.uid})))||void 0===a?void 0:a.displayName:void 0),$e=Object(f.c)(X);return Object(he.jsxs)("div",{className:!_||Je&&$e?"secondary-view-container":"secondary-view-container active",style:{width:v},children:[oe&&Object(he.jsx)("span",{ref:T,className:"emojis-container-moving",style:{position:"fixed",right:window.innerWidth-oe.positionInfo.right+18,top:oe.positionInfo.y-442>33?oe.positionInfo.y-442:33,zIndex:99},children:Object(he.jsx)(ut.a,{onSelect:function(e){var t=e.native;q(t),Y(!H)}})}),Object(he.jsxs)("div",{className:"secondary-view__header",children:[Object(he.jsx)("div",{className:"secondary-view__header__left",children:Object(he.jsxs)("div",{className:"secondary-view__header__left__inner",children:[Object(he.jsx)("span",{className:"secondary-view__mode-name",children:Ge?"Profile":Fe?"Thread":"Saved items"}),Fe&&Object(he.jsx)("span",{className:"thread-name",children:Ze})]})}),Object(he.jsxs)("div",{className:"secondary-view__header__right",children:[Je&&Object(he.jsx)("button",{className:"c-button-unstyled close-button",title:"Move to main page",onClick:function(){R(N({onMainSave:!0})),Ce()},children:Object(he.jsx)(wt.a,{})}),Object(he.jsx)("button",{className:"c-button-unstyled close-button",onClick:Ce,title:"Close",children:Object(he.jsx)(Pe.a,{})})]})]}),Ge&&Object(he.jsx)("div",{className:"secondary-view__body",children:Object(he.jsxs)("div",{className:"secondary-view__body__inner",children:[Object(he.jsx)("div",{className:"member-profile__avatar-container",children:Object(he.jsx)("img",{src:h,alt:""})}),Object(he.jsxs)("div",{className:"member-profile__name",children:[Object(he.jsx)("div",{className:"member-profile__name-title",children:g}),Object(he.jsx)("div",{className:"member-profile__status",children:Object(he.jsx)(ke.a,{className:x?"status online":"status offline"})})]}),Object(he.jsx)("button",{"data-bs-toggle":(null===C||void 0===C?void 0:C.uid)===(null===O||void 0===O?void 0:O.uid)?"modal":"false","data-bs-target":"#editProfile",className:"c-button-unstyled link-button",style:{color:"rgba(18,100,163,1)",fontWeight:"700"},children:L||"Add a job"}),Object(he.jsxs)("div",{className:"member-profile__fields",children:[Object(he.jsxs)("div",{className:"member-profile__field",children:[Object(he.jsx)("div",{className:"member-profile__field__label",children:"Display name"}),Object(he.jsx)("div",{className:"member-profile__field__value",children:null===O||void 0===O?void 0:O.displayName})]}),Object(he.jsxs)("div",{className:"member-profile__field",children:[Object(he.jsx)("div",{className:"member-profile__field__label",children:"What I do"}),Object(he.jsx)("div",{className:"member-profile__field__value",children:null===O||void 0===O?void 0:O.whatIDo})]}),Object(he.jsxs)("div",{className:"member-profile__field",children:[Object(he.jsx)("div",{className:"member-profile__field__label",children:"Local time"}),Object(he.jsx)("div",{className:"member-profile__field__value",children:U})]}),Object(he.jsxs)("div",{className:"member-profile__field",children:[Object(he.jsx)("div",{className:"member-profile__field__label",children:"Email address"}),Object(he.jsx)("div",{className:"member-profile__field__value",children:null===O||void 0===O?void 0:O.email})]})]})]})}),Je&&Object(he.jsx)("div",{className:"secondary-view__body saved-mode",children:Re?Object(he.jsx)(st,{}):Object(he.jsx)(he.Fragment,{children:null===Te||void 0===Te?void 0:Te.map((function(e){var t=null===Se||void 0===Se?void 0:Se.docs.find((function(t){return t.data().replyTo?t.data().replyTo===e.id:t.data().messageId===e.id})),a="",c={};if((null===t||void 0===t?void 0:t.data().roomId)&&(a=null===fe||void 0===fe?void 0:fe.docs.find((function(e){return e.id===t.data().roomId})).data().name,c.savedMessageInfo=t.data()),(null===t||void 0===t?void 0:t.data().roomDirectId)&&(a="Direct message",c.savedMessageInfo=t.data()),(null===t||void 0===t?void 0:t.data().replyTo)&&console.log("ALOOO ",a),e.data()){var s=e.data(),n=s.message,o=s.timestamp,i=s.user,l=s.userImage,d=s.uid,r=s.savedBy,u=s.reactions;return console.log("Alo"),c.uid=d,c.id=e.id,Object(he.jsxs)("div",{className:"saved-message-button",role:"button",onClick:function(){return Ee(c)},children:[Object(he.jsx)("div",{className:"saved-message__header",children:a}),Object(he.jsx)(yt,{moveToItem:function(){return Ee(c)},emojiMartPosition:oe,onClick:Me,message:n,timestamp:o,userName:i,userImage:l,uid:d,savedBy:r,emojiReact:F,reactToggle:H,label:"",width:v,id:e.id,reactions:u,isSaved:!0},e.id)]})}}))})}),Fe&&Object(he.jsx)("div",{className:"secondary-view__body",children:ze||!He?Object(he.jsx)(st,{}):Object(he.jsx)(he.Fragment,{children:Object(he.jsxs)("div",{className:"thread-message__container",children:[He&&Object(he.jsx)("div",{className:"c-thread-message",children:Object(he.jsx)(yt,{emojiMartPosition:oe,onClick:Me,message:null===(s=He.data())||void 0===s?void 0:s.message,timestamp:null===(n=He.data())||void 0===n?void 0:n.timestamp,userName:null===(o=He.data())||void 0===o?void 0:o.user,userImage:null===(l=He.data())||void 0===l?void 0:l.userImage,uid:null===(u=He.data())||void 0===u?void 0:u.uid,savedBy:null===(m=He.data())||void 0===m?void 0:m.savedBy,emojiReact:F,reactToggle:H,label:"",width:v,id:Be,reactions:null===(j=He.data())||void 0===j?void 0:j.reactions,inThread:!0},Be)}),(null===Xe||void 0===Xe?void 0:Xe.docs.length)>0&&Object(he.jsx)("div",{className:"c-thread__seperator",children:Object(he.jsxs)("div",{className:"c-thread__seperator__inner",children:[Object(he.jsx)("span",{className:"c-thread__seperator__count",children:(null===Xe||void 0===Xe?void 0:Xe.docs.length)>1?(null===Xe||void 0===Xe?void 0:Xe.docs.length)+" replies":(null===Xe||void 0===Xe?void 0:Xe.docs.length)+" reply"}),Object(he.jsx)("hr",{className:"c-thread__seperator__line"})]})}),null===Xe||void 0===Xe?void 0:Xe.docs.map((function(e){var t=e.data(),a=t.message,c=t.timestamp,s=t.user,n=t.userImage,o=t.uid,i=t.savedBy,l=t.reactions;return Object(he.jsx)(yt,{emojiMartPosition:oe,onClick:Me,message:a,timestamp:c,userName:s,userImage:n,uid:o,savedBy:i,emojiReact:F,reactToggle:H,label:"",width:v,id:e.id,reactions:l,replyTo:Be},e.id)})),Object(he.jsx)(Rt,{inThread:!0,threadMessageId:Be})]})})})]})};var Rt=function(e){var t=e.channelName,a=e.channelId,s=(e.chatRef,e.isDirect),n=e.inThread,o=e.threadMessageId,l=Object(f.c)(ae),d=Object(c.useRef)(null),r=Object(c.useState)(""),m=Object(i.a)(r,2),j=m[0],v=m[1],O=function(e){var t=e.native;v(j+t)},h=Object(c.useState)(!1),p=Object(i.a)(h,2),g=p[0],x=(p[1],Object(c.useState)(null)),_=Object(i.a)(x,2),N=_[0],y=_[1];Object(c.useEffect)((function(){var e=document.querySelector(".emojis-container"),t=(document.querySelectorAll("div:not(.emoji-trigger-button)"),document.querySelector(".chat-messages")),a=document.querySelector(".chat__header"),c=document.querySelector(".header-container"),s=document.querySelector(".side-bar-container"),o=document.querySelector("form>input"),i=document.querySelector("form>button"),l=document.querySelector(".emoji-trigger-button"),d=document.querySelector(".secondary-view-container"),r=function(){e.classList.remove("collapse")},u=function(){e.classList.add("collapse")};return n||(l.addEventListener("click",r),s.addEventListener("click",u),o.addEventListener("click",u),i.addEventListener("click",u),t.addEventListener("click",u),a.addEventListener("click",u),c.addEventListener("click",u),d.addEventListener("click",u)),function(){if(!n){l.removeEventListener("click",r)}}}),[g]);var I=Object(f.c)(K),w=Object(f.c)(Q);return Object(c.useEffect)((function(){function e(e){d.current&&!d.current.contains(e.target)&&y(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}})),Object(he.jsxs)("div",{className:"chat-input-container",id:"replyToThreadInput",children:[n?N&&Object(he.jsx)("span",{ref:d,className:"thread-emojis-container",style:{position:"fixed",right:window.innerWidth-(null===N||void 0===N?void 0:N.right)-350>0?window.innerWidth-(null===N||void 0===N?void 0:N.right)-350:0,top:window.innerHeight-N.y,zIndex:99},children:Object(he.jsx)(ut.a,{onSelect:O})}):Object(he.jsx)("span",{className:"emojis-container collapse",children:Object(he.jsx)(ut.a,{onSelect:O})}),Object(he.jsxs)("form",{children:[Object(he.jsx)("div",{className:"emoji-trigger-button",role:"button",onClick:function(){var e=document.querySelector("#replyToThreadInput").getBoundingClientRect();y(e)},children:Object(he.jsx)(jt.a,{})}),Object(he.jsx)("input",{value:j,type:"text",onChange:function(e){var t=Object(rt.emojify)(e.target.value,{output:"unicode"});v(t)},placeholder:n?"Reply...":"Message #".concat(t)}),Object(he.jsx)("button",{onClick:n?function(e){e.preventDefault(),""!==j&&(I?(console.log("sendd"),b.collection("room").doc(I).collection("messages").doc(o).collection("subMessages").add({message:j,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid})):w&&b.collection("directRooms").doc(w).collection("messages").doc(o).collection("subMessages").add({message:j,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid})),v("")}:function(e){return function(e){if(e.preventDefault(),""!=j){if(!a)return!1;s?(b.collection("directRooms").doc(a).collection("messages").add({message:j,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid}),b.collection("directRooms").doc(a).update({usersHaveRead:[l.uid]})):(b.collection("room").doc(a).collection("messages").add({message:j,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid}),b.collection("room").doc(a).update({usersHaveRead:[l.uid]})),v("")}}(e)},type:"submit",className:"c-button-unstyled send-button",children:Object(he.jsx)(dt.a,{})})]})]})};var kt=function(e){var t=e.time,a=e.messages,c=e.uid,s=e.timestamp;return Object(he.jsxs)("div",{className:"day-block-messages__container",children:[(s||!c)&&Object(he.jsxs)("div",{className:"day-block-messages__divider",children:[Object(he.jsx)("div",{className:"day-block-messages__divider-line"}),Object(he.jsx)("div",{className:"day-block-messages__label",children:t.date+"/"+t.month+"/"+t.year})]}),null===a||void 0===a?void 0:a.map((function(e){return e}))]})},Ct=a(53),Mt=a.n(Ct);var Lt=function(e){var t,a,s,n,o,l,d,r,m,j,v,O,h=Object(f.b)(),g=Object(c.useRef)(null),x=Object(f.c)(ae),_=Object(f.c)(te),N=Object(f.c)(ne),y=Object(c.useState)(""),I=Object(i.a)(y,2),w=I[0],S=I[1],R=Object(c.useState)(!1),k=Object(i.a)(R,2),C=k[0],M=k[1];_||N||h(W({roomId:"A86N0fmTCy8fTd4NS0Ne"}));var L=Object(p.a)(_&&b.collection("room").doc(_)),U=Object(i.a)(L,2),T=U[0],P=U[1],F=Object(p.a)(_&&b.collection("room").doc(_).collection("messages").orderBy("timestamp","asc")),B=Object(i.a)(F,2),q=B[0],A=B[1],V=Object(c.useState)(null),H=Object(i.a)(V,2),z=H[0],Y=H[1],G=function(e){Y(e),console.log(e)},J=Object(c.useRef)(null);Object(c.useEffect)((function(){function e(e){J.current&&!J.current.contains(e.target)&&Y(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}));var K=Object(f.c)(le),Q=Object(p.a)(b.collection("users")),Z=Object(i.a)(Q,2),$=Z[0],ee=Z[1],ce=null===$||void 0===$?void 0:$.docs.find((function(e){return e.data().uid===N})),se=Object(p.a)(K&&b.collection("directRooms").doc(K).collection("messages").orderBy("timestamp","asc")),oe=Object(i.a)(se,2),de=oe[0],re=oe[1],ue=(null===ce||void 0===ce||null===(t=ce.data())||void 0===t?void 0:t.displayName)?null===ce||void 0===ce?void 0:ce.data().displayName:null===ce||void 0===ce?void 0:ce.data().email,me=null===ce||void 0===ce||null===(a=ce.data())||void 0===a?void 0:a.photoURL,je=null===ce||void 0===ce||null===(s=ce.data())||void 0===s?void 0:s.isOnline,Oe=Object(c.useRef)(null),fe=Object(f.c)(be),pe=Object(f.c)(ve);Object(c.useEffect)((function(){var e;(console.log(fe),!q&&!de||fe||pe)||(console.log("SCROLLL"),null===g||void 0===g||null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),setTimeout((function(){var e;null===g||void 0===g||null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),500))}),[null===q||void 0===q?void 0:q.docs.length,null===de||void 0===de?void 0:de.docs.length,P,re]);var ge={};_?null===q||void 0===q||q.docs.map((function(e){var t=e.data(),a=t.message,c=t.timestamp,s=t.user,n=t.userImage,o=t.uid,i=t.savedBy,l=new Date(null===c||void 0===c?void 0:c.toDate()),d=l.getDate(),r=l.getFullYear(),u=l.getMonth(),m=d+":"+u+":"+r,j=(l.getHours(),l.getMinutes());j<10&&(j="0"+j),ge[m]||(ge[m]=[]),ge[m].time||(ge[m].time={date:d,year:r,month:u}),ge[m].timestamp=c,ge[m].push(Object(he.jsx)(yt,{ref:e.id===fe?Oe:null,emojiMartPosition:z,onClick:G,id:e.id,message:a,timestamp:c,userName:s,userImage:n,uid:o,reactions:e.data().reactions,isDirect:!1,emojiReact:w,reactToggle:C,savedBy:i,messageRoomId:_},e.id))})):null===de||void 0===de||de.docs.map((function(e){var t=e.data(),a=t.message,c=t.timestamp,s=t.user,n=t.userImage,o=t.uid,i=t.savedBy,l=new Date(null===c||void 0===c?void 0:c.toDate()),d=l.getDate(),r=l.getFullYear(),u=l.getMonth(),m=d+":"+u+":"+r,j=(l.getHours(),l.getMinutes());j<10&&(j="0"+j),ge[m]||(ge[m]=[]),ge[m].time||(ge[m].time={date:d,year:r,month:u}),ge[m].timestamp=c,ge[m].push(Object(he.jsx)(yt,{ref:e.id===fe?Oe:null,emojiMartPosition:z,onClick:G,message:a,timestamp:c,userName:s,userImage:n,uid:o,isDirect:!0,emojiReact:w,reactToggle:C,savedBy:i,reactions:e.data().reactions,id:e.id,messageRoomDirectId:K},e.id))}));var xe=Object.entries(ge);Object(c.useEffect)((function(){P||h(E({roomDetails:null===T||void 0===T?void 0:T.data()}))}),[_,T]),Object(c.useEffect)((function(){ee||h(D({directUser:null===ce||void 0===ce?void 0:ce.data()}))}),[K]);var _e=null===T||void 0===T||null===(n=T.data())||void 0===n?void 0:n.members,Ne=(null===_e||void 0===_e||_e.slice(),Object(c.useState)(!1)),ye=Object(i.a)(Ne,2),Ie=ye[0],we=ye[1];Object(c.useEffect)((function(){if(Ie&&!P){var e=null===_e||void 0===_e?void 0:_e.slice();e||(e=[]),e.push(x.uid),console.log(e),b.collection("room").doc(_).update({members:e}).then((function(){var e="joined #".concat(T.data().name,".");b.collection("room").doc(_).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:x.displayName,userImage:x.photoURL,uid:x.uid})}))}return function(){we(!1)}}),[Ie,P]);var Se,Re,Ce=Object(f.c)(ie),Me=Object(c.useState)("false"),Le=Object(i.a)(Me,2),Ue=Le[0],Te=Le[1];return Object(c.useEffect)((function(){console.log("On load");var e=document.querySelector(".chat-container"),t=document.querySelector(".side-bar-container"),a=document.querySelector(".sidebar-toggle-button.c-button-unstyled"),c=document.querySelector(".secondary-view-container"),s=function(){Se=window.innerWidth,(Re=e.offsetWidth)<400&&!(null===t||void 0===t?void 0:t.classList.contains("sidebar-collapse"))?(null===t||void 0===t||t.classList.add("sidebar-collapse"),Te(!1),console.log("3"),Se<706&&(null===t||void 0===t||t.classList.add("sidebar-collapse"),Te(!1),null===e||void 0===e||e.classList.remove("collapse"),console.log("1"),Se<=576&&Ce&&(null===e||void 0===e||e.classList.add("collapse"),null===c||void 0===c||c.classList.add("fill"),console.log("2")),Ce||(null===e||void 0===e||e.classList.remove("collapse"),console.log(3)))):Re>=600&&(null===t||void 0===t?void 0:t.classList.contains("sidebar-collapse"))&&(null===t||void 0===t||t.classList.remove("sidebar-collapse"),console.log(a),Te(!0),console.log("4"));var s=document.querySelector(".sidebar-collapse"),n=function(){null===s||void 0===s||s.classList.remove("sidebar-float")};e.addEventListener("click",n),c.addEventListener("click",n)};s(),window.addEventListener("resize",s)})),console.log(z),Object(f.c)(X),Object(he.jsx)("div",{className:"chat-container",children:A||re||ee?Object(he.jsx)(st,{}):Object(he.jsxs)(he.Fragment,{children:[z&&Object(he.jsx)("span",{ref:J,className:"emojis-container-moving",style:{position:"fixed",right:window.innerWidth-z.positionInfo.right+18,top:z.positionInfo.y-442>33?z.positionInfo.y-442:33,zIndex:99},children:Object(he.jsx)(ut.a,{onSelect:function(e){var t=e.native;S(t),M(!C)}})}),Object(he.jsxs)("div",{className:"chat__header",children:[Object(he.jsxs)("div",{className:"chat__header__left",children:[Object(he.jsx)("div",{onClick:function(){var e=document.querySelector(".side-bar-container");null===e||void 0===e||e.classList.add("sidebar-float")},className:Ue?"sidebar-toggle-button c-button-unstyled chat__header__left__button collapse":"sidebar-toggle-button c-button-unstyled chat__header__left__button ",children:Object(he.jsx)("span",{children:Object(he.jsx)(Mt.a,{})})}),_?Object(he.jsxs)("div",{role:"button","data-bs-toggle":"modal","data-bs-target":"#a"+_,className:"chat__header__left__button",children:[Object(he.jsx)("span",{className:"chat__header__icon",children:"#"}),Object(he.jsx)("span",{children:null===T||void 0===T||null===(o=T.data())||void 0===o?void 0:o.name})]}):Object(he.jsxs)("div",{role:"button","data-bs-toggle":"modal","data-bs-target":"#a"+K,className:"chat__header__left__button",children:[Object(he.jsx)("div",{className:"chat__header__avatar",style:{backgroundImage:"url(".concat(me,")")},children:Object(he.jsx)(ke.a,{className:je?"status active":"status"})}),Object(he.jsx)("span",{children:ue})]})]}),Object(he.jsx)("div",{className:"chat__header__right","data-bs-toggle":_||K?"modal":"","data-bs-target":_||K?"#a"+(_||K):"",children:Object(he.jsx)("span",{role:"button",children:"Details"})})]}),Object(he.jsxs)("div",{className:"chat-messages",children:[Object(he.jsx)(yt,{userImage:"https://icon-library.com/images/comment-bubble-icon-png/comment-bubble-icon-png-3.jpg",userName:_?((null===T||void 0===T||null===(l=T.data())||void 0===l?void 0:l.roomOwner)?null===T||void 0===T||null===(d=T.data())||void 0===d?void 0:d.roomOwner.displayName:"...")+" founded the #".concat(null===T||void 0===T||null===(r=T.data())||void 0===r?void 0:r.name," channel,"):"This conversation is just between the two of you",message:_?(null===T||void 0===T||null===(m=T.data())||void 0===m?void 0:m.des)?null===T||void 0===T||null===(j=T.data())||void 0===j?void 0:j.des:"":"Here you can send messages and share files with @".concat(null===ce||void 0===ce?void 0:ce.data().displayName,"."),description:!0}),null===xe||void 0===xe?void 0:xe.map((function(e){var t,a=e[1].time,c=e[1].timestamp,s=null===(t=e[1][0])||void 0===t?void 0:t.props.uid;return Object(he.jsx)(kt,{uid:s,loading:re||A,time:a,messages:e[1],timestamp:c},a.date+a.month+a.year)})),Object(he.jsx)("div",{className:"chat-bottom",ref:g})]}),Object(he.jsxs)("div",{className:"chat__footer",children:[(null===_e||void 0===_e?void 0:_e.includes(x.uid))&&_||!_?Object(he.jsx)(Rt,{channelId:_||K,channelName:_?null===T||void 0===T||null===(v=T.data())||void 0===v?void 0:v.name:ue,isDirect:!_}):Object(he.jsxs)("div",{className:"chat__input-preview",children:[Object(he.jsxs)("div",{className:"text--normal",children:["You are viewing ",Object(he.jsxs)("strong",{children:["#",null===T||void 0===T||null===(O=T.data())||void 0===O?void 0:O.name]})]}),Object(he.jsxs)("div",{className:"buttons-group",children:[Object(he.jsx)("button",{className:"btn btn-primary",onClick:function(){we(!0)},children:"Join chat"}),Object(he.jsx)("button",{className:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#a"+_,children:"See more details"})]})]}),Object(he.jsx)("div",{className:"space"})]})]})})};var Ut=function(){var e=Object(h.a)(v),t=Object(i.a)(e,2),a=(t[0],t[1]),s=Object(c.useState)(!1),n=Object(i.a)(s,2),o=n[0],l=n[1];function d(){setTimeout((function(){l(!o)}),1e3)}return Object(c.useEffect)((function(){return d(),function(){}}),[a]),d(),Object(he.jsxs)("div",{className:"loading-container",children:[Object(he.jsxs)("div",{className:"loading__content",children:[Object(he.jsx)("h1",{children:"Loading"}),Object(he.jsxs)("div",{className:"dots",children:[Object(he.jsx)("div",{className:o?"dot z animate":"dot z"}),Object(he.jsx)("div",{className:o?"dot f animate":"dot f"}),Object(he.jsx)("div",{className:o?"dot s animate":"dot s"}),Object(he.jsx)("div",{className:o?"dot t animate":"dot t"}),Object(he.jsx)("div",{className:o?"dot l animate":"dot l"})]})]}),Object(he.jsx)("script",{})]})};a(155);var Tt=function(e){var t,a=Object(f.c)(ae),s="displayName"===e.name?(null===a||void 0===a?void 0:a.displayName)?a.displayName:"":"whatIDo"===e.name&&(null===a||void 0===a?void 0:a.whatIDo)?a.whatIDo:"",n=Object(c.useState)(s),o=Object(i.a)(n,2),l=o[0],u=o[1],m=Object(c.useState)(null===a||void 0===a?void 0:a.photoURL),v=Object(i.a)(m,2),O=v[0],h=v[1],g=Object(f.b)(),x=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return c=j.ref(),s=c.child(a.name),e.next=7,s.put(a);case 7:return e.t0=h,e.next=10,s.getDownloadURL();case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(p.a)(b.collection("users")),N=Object(i.a)(_,2),y=N[0],I=N[1],w=null===y||void 0===y?void 0:y.docs.find((function(e){return e.data().uid===(null===a||void 0===a?void 0:a.uid)})),S=null===w||void 0===w?void 0:w.id,R=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=b.collection("users"),I||!S||!a){t.next=18;break}if(!e.saveChange){t.next=18;break}if("photo"!==e.type){t.next=8;break}return t.next=6,a.doc(S).update({photoURL:O}).catch((function(e){return alert(e.message)}));case 6:t.next=17;break;case 8:if("text"!==e.type){t.next=17;break}if("displayName"!==e.name){t.next=14;break}return t.next=12,a.doc(S).update({displayName:l}).catch((function(e){return alert(e.message)}));case 12:t.next=17;break;case 14:if("whatIDo"!==e.name){t.next=17;break}return t.next=17,a.doc(S).update({whatIDo:l}).catch((function(e){return alert(e.message)}));case 17:g(H({dataUpdated:!0}));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){return R(),function(){g(H({dataUpdated:null}))}}),[e.toggle]),Object(he.jsxs)("div",{className:"input-container",children:[Object(he.jsx)("label",{htmlFor:"",className:"form-label",children:e.label}),"photo"===e.type?Object(he.jsxs)("div",{children:[Object(he.jsx)("img",{src:O,alt:"",style:{width:"100%"}}),Object(he.jsx)("input",{ref:function(e){return t=e},type:"file",onChange:x,className:"photo-input"}),Object(he.jsxs)("span",{role:"button",className:"upload-button c-button--medium",onClick:function(){t.click()},children:["Upload an image"," "]})]}):Object(he.jsx)("input",{type:"text",className:"form-control",value:l,onChange:function(e){u(e.target.value)}})]})};var Dt=function(){var e=!0,t=Object(f.c)(ae),a=Object(c.useState)(!1),s=Object(i.a)(a,2),n=s[0],o=s[1],l=Object(f.c)(se),u=Object(c.useState)(!1),m=Object(i.a)(u,2),j=m[0],v=m[1],O=Object(p.a)(b.collection("users")),h=Object(i.a)(O,2),g=h[0],x=(h[1],null===g||void 0===g?void 0:g.docs.find((function(e){return e.data().uid===(null===t||void 0===t?void 0:t.uid)}))),_=null===x||void 0===x?void 0:x.data(),N=Object(f.b)(),y=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_?(N(q({user:_})),console.log("dispatched "+_.whatIDo)):console.log("No dispatch");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){l&&y()}),[l]),Object(he.jsx)("div",{className:"modal fade",id:"editProfile",tabIndex:"-1","aria-labelledby":"editProfile","aria-hidden":"true",children:Object(he.jsx)("div",{className:"modal-dialog modal-dialog-scrollable c-modal-dialog modal-dialog-centered",children:Object(he.jsxs)("div",{className:"modal-content c-modal-content",children:[Object(he.jsxs)("div",{className:"modal-header c-modal__header",children:[Object(he.jsx)("div",{className:"c-modal__header__title",children:Object(he.jsx)("h1",{children:Object(he.jsx)("div",{className:"text",children:"Edit your propfile"})})}),!0===n&&Object(he.jsx)("div",{className:"notification badge bg-success",children:"Your info was successfully updated!"}),Object(he.jsx)("button",{className:"c-button-unstyled close-button","data-bs-dismiss":"modal","data-bs-target":"#editProfile",children:Object(he.jsx)(Pe.a,{})})]}),Object(he.jsx)("div",{className:"modal-body c-modal__body",children:Object(he.jsx)("div",{className:"c-modal__body__section",children:Object(he.jsxs)("div",{className:"c-modal__body__columns",children:[Object(he.jsxs)("div",{className:"col c-input-field",children:[Object(he.jsx)(Tt,{label:"Display name",name:"displayName",type:"text",saveChange:e,toggle:j}),Object(he.jsx)(Tt,{label:"What I do",name:"whatIDo",type:"text",saveChange:e,toggle:j})]}),Object(he.jsx)("div",{className:"col c-profile-photo-field",children:Object(he.jsx)(Tt,{label:"Profile photo",type:"photo",saveChange:e,toggle:j})})]})})}),Object(he.jsxs)("div",{className:"c-modal__footer",children:[Object(he.jsx)("button",{className:"btn btn-light cancel-button c-button--medium","data-bs-dismiss":"modal",children:"Cancel"}),Object(he.jsx)("button",{className:"btn btn-success save-button c-button--medium",onClick:function(e){e.preventDefault(),v(!j),o(!0),setTimeout((function(){o(!1)}),1e3)},children:"Save Changes"})]})]})})})};var Et=function(e){return Object(he.jsx)("div",{className:"chat-side-bar-resizer resizer",onMouseDown:e.onMouseDown})};var Pt=function(e){var t=e.loading,a=Object(f.b)(),s=Object(f.c)(ae),n=Object(f.c)(de),o=null===n||void 0===n?void 0:n.photoURL,i=null===n||void 0===n?void 0:n.displayName,l=null===n||void 0===n?void 0:n.uid,d=(null===n||void 0===n||n.email,null===n||void 0===n?void 0:n.isOnline),r=function(){a(B({isShowingSecondaryWorkspace:!0})),a(k({onReplyInThread:null})),a(y({onSave:null})),a(I({onOpenProfile:!0}))},u=Object(f.c)(re),m=function(){var e=new Date,t=e.getHours(),c=e.getMinutes();c<10&&(c="0"+c),a(P({localTime:t+":"+c+" "}))};return Object(c.useEffect)((function(){setInterval(m,1e3)}),[u]),Object(he.jsx)("div",{id:"profileModal",className:"modal","aria-hidden":"true",tabIndex:"-1","aria-labelledby":"profileModal",children:Object(he.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(he.jsx)("div",{className:"modal-content profile-card",children:t?Object(he.jsx)(st,{}):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("div",{className:"profile-card__header",children:Object(he.jsx)("div",{role:"button","data-bs-dismiss":"modal",onClick:r,className:"profile-card__picture",style:{backgroundImage:"url(".concat(o,")")}})}),Object(he.jsxs)("div",{className:"profile-card__name",children:[Object(he.jsx)("div",{className:"profile-card__name__title",role:"button",onClick:r,"data-bs-dismiss":"modal",children:i}),Object(he.jsx)("div",{className:d?"profile-card__name__status online":"profile-card__name__status",children:Object(he.jsx)(ke.a,{className:"status"})})]}),Object(he.jsx)("div",{className:"profile-card__link",role:"button",onClick:r,"data-bs-dismiss":"modal","data-bs-target":".editChat",children:"View full profile"}),Object(he.jsxs)("div",{className:"profile-card__time-field",children:[Object(he.jsx)("div",{className:"profile-card__time-field__label",children:"Local time"}),Object(he.jsx)("div",{className:"profile-card__time-field__value",children:u})]}),Object(he.jsxs)("div",{className:"profile-card__buttons",children:[Object(he.jsx)("button",{className:"c-button--medium c-button",onClick:function(){console.log("?"),a(z({directMessageUid:l}))},"data-bs-dismiss":"modal",children:"Message"}),(null===s||void 0===s?void 0:s.uid)===l&&Object(he.jsx)("button",{className:"c-button--medium c-button","data-bs-toggle":"modal","data-bs-dismiss":"modal","data-bs-target":"#editProfile",children:"Edit Profile"})]})]})})})})};a(156);var Ft=function(e){var t=e.fieldLabel,a=e.required,c=(e.hyphenized,e.onChange),s=e.value,n=e.disabled;return Object(he.jsxs)("div",{className:"input-field form-group",children:[Object(he.jsx)("label",{htmlFor:"name-input",className:"form-label",children:Object(he.jsx)("strong",{children:t})}),Object(he.jsx)("input",{disabled:n,value:s,onChange:c,type:"text",className:"form-control",required:a||""})]})},Bt=a(87),Wt=a.n(Bt);var qt=function(e){var t=e.roomName,a=e.roomDes,s=e.roomOwner,n=e.id,o=e.isPrivate,l=e.roomMembers,d=Object(f.b)(),r=Object(c.useState)(t),m=Object(i.a)(r,2),j=m[0],v=m[1],O=Object(c.useState)(a||""),h=Object(i.a)(O,2),p=h[0],g=h[1];Object(c.useEffect)((function(){v(t),g(a||"")}),[t,a]);var x=Object(c.useState)(""),_=Object(i.a)(x,2),N=_[0],y=_[1],I=Object(c.useState)(!1),w=Object(i.a)(I,2),S=w[0],R=w[1],k=Object(f.c)(ae),C=Object(c.useState)(!1),M=Object(i.a)(C,2),L=M[0],U=M[1],D=Object(c.useState)(!1),E=Object(i.a)(D,2),P=E[0],W=E[1],q=Object(c.useState)(!1),A=Object(i.a)(q,2),V=(A[0],A[1],Object(f.c)(te)),H=null===l||void 0===l?void 0:l.slice(),z=null===H||void 0===H?void 0:H.indexOf(k.uid);null===H||void 0===H||H.splice(z,1),Object(c.useEffect)((function(){if(P){b.collection("room").doc(V).update({members:H||[]}).then((function(){d(T({isModalOpen:!1}))})).catch((function(e){return L(e.message)}));var e="Leave #".concat(t,".");b.collection("room").doc(V).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:k.displayName,userImage:k.photoURL,uid:k.uid})}}),[P]);var Y=Object(f.c)(le),X=Object(f.c)(me),G=Object(f.c)(re);return Object(he.jsxs)("div",{class:"tab-pane fade show active channel-details__about",id:"about",role:"tabpanel","aria-labelledby":"about-tab",children:[Y&&Object(he.jsx)(he.Fragment,{children:Object(he.jsx)("div",{className:"c-tab-group",children:Object(he.jsxs)("div",{className:"c-tab-group__inner",children:[Object(he.jsxs)("div",{className:"text-line",children:[Object(he.jsx)("div",{className:"text-line__icon",children:Object(he.jsx)(_e.a,{})}),Object(he.jsxs)("div",{className:"text-line__content",children:[G," Local time"]})]}),Object(he.jsxs)("div",{className:"text-line",children:[Object(he.jsx)("div",{className:"text-line__icon",children:Object(he.jsx)(Wt.a,{})}),Object(he.jsx)("div",{className:"text-line__content",children:null===X||void 0===X?void 0:X.email})]}),Object(he.jsx)("button",{onClick:function(){d(B({isShowingSecondaryWorkspace:!0})),d(F({selectedUser:X}))},"data-bs-dismiss":"modal","data-bs-target":"a"+n,className:"c-button-unstyled",children:"View full profile"})]})})}),V&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("div",{className:"input-group c-tab-group",children:[Object(he.jsx)(Ft,{fieldLabel:"Name",required:!0,hyphenized:!0,onChange:function(e){var t=e.target.value.replace(/\s/g,"-");v(t)},value:j,disabled:"A86N0fmTCy8fTd4NS0Ne"===n}),Object(he.jsx)(Ft,{fieldLabel:"Description",onChange:function(e){var t=e.target.value;g(t)},value:p}),Object(he.jsx)("br",{}),Object(he.jsxs)("div",{className:"input-group__footer",children:[Object(he.jsx)("button",{className:"btn btn-success c-button--medium",onClick:function(){if(""===j)return y("Name must not be left empty!, try again"),R(!1),void v(t);b.collection("room").doc(n).update({name:j,des:p}).then((function(){R(!0),y("Channel was updated successfully!"),setTimeout((function(){y("")}),2e3)})).catch((function(e){return N(e.message)}))},children:"Save"}),S?Object(he.jsx)("div",{className:"notification badge bg-success",children:N}):Object(he.jsx)("div",{className:"notification badge bg-warning",children:N})]})]}),Object(he.jsxs)("div",{className:"text-group c-tab-group",children:[Object(he.jsxs)("div",{className:"text-field",children:[Object(he.jsx)("div",{className:"text-field__title",children:"Created by"}),Object(he.jsx)("div",{className:"text-field__content",children:s||"..."})]}),Object(he.jsx)("div",{className:"text-field leave-button",role:"button",children:Object(he.jsx)("div",{className:"text-field__title",onClick:function(){U(!0)},children:"Leave Channel"})})]})]}),L&&Object(he.jsxs)("div",{className:"c-tab-group alert",children:[Object(he.jsxs)("span",{children:["Do you want to leave channel?"," ",o&&Object(he.jsxs)(he.Fragment,{children:["This is a ",Object(he.jsx)("strong",{children:"private"})," channel so it cannot be accessed by outsiders."]})]}),Object(he.jsxs)("div",{className:"buttons-group",children:[Object(he.jsx)("button",{className:"btn btn-secondary",onClick:function(){U(!1)},children:"Cancel"}),Object(he.jsx)("button",{className:"btn btn-danger","data-bs-dismiss":"modal","data-bs-target":"a"+n,onClick:function(){W(!0),U(!1)},children:"Leave"})]})]})]})};var At=function(e){var t=e.user,a=e.roomOwner,c=e.addUser,s=e.dropdownItem,n=e.filterText,o=Object(f.b)(),i=Object(f.c)(ae),l=(null===t||void 0===t?void 0:t.photoURL)?t.photoURL:"default-avatar.jpg",d=(null===t||void 0===t?void 0:t.displayName)?t.displayName:t.email,r=null===t||void 0===t?void 0:t.isOnline;return-1!==d.toLowerCase().indexOf(n)||""===n?Object(he.jsx)("div",{className:"member",role:"button","data-bs-toggle":s?"false":"modal","data-bs-target":"#profileModal",onClick:s?function(){}:function(){o(F({selectedUser:t}))},children:Object(he.jsxs)(he.Fragment,{children:[Object(he.jsxs)("div",{className:"member__info",children:[Object(he.jsx)("div",{className:"member__avatar",style:{backgroundImage:"url(".concat(l,")")}}),Object(he.jsx)("div",{className:"member__name",children:Object(he.jsxs)("strong",{children:[d," ",(null===t||void 0===t?void 0:t.uid)===i.uid?"(You)":""]})}),Object(he.jsx)("div",{className:"member__status",children:Object(he.jsx)(ke.a,{className:r?"status active":"status"})})]}),(null===i||void 0===i?void 0:i.uid)===(null===a||void 0===a?void 0:a.uid)&&Object(he.jsx)("div",{className:"interact-button",children:Object(he.jsx)("span",{role:"button","data-bs-toggle":"modal","data-bs-target":"#removeAlertModal",children:Object(he.jsx)("strong",{children:"Remove"})})}),s&&Object(he.jsx)("div",{className:"interact-button",children:Object(he.jsx)("span",{role:"button",onClick:c,children:Object(he.jsx)("strong",{children:"Add"})})})]})}):Object(he.jsx)("div",{})},Vt=a(88),Ht=a.n(Vt);var zt=function(e){var t=e.roomMembers,a=e.roomOwner,s=e.id,n=Object(p.a)(b.collection("users")),o=Object(i.a)(n,2),l=o[0],d=(o[1],Object(f.c)(ae)),r=[];null===l||void 0===l||l.docs.map((function(e){(null===t||void 0===t?void 0:t.includes(e.data().uid))&&r.push(e.data())}));var m=Object(c.useState)(!1),j=Object(i.a)(m,2),v=(j[0],j[1]),O=null===t||void 0===t?void 0:t.slice(),h=function(e){e&&t&&!O.includes(null===e||void 0===e?void 0:e.uid)&&(O.push(e.uid),b.collection("room").doc(s).update({members:O}).then((function(t){var a="is added by ".concat(null===d||void 0===d?void 0:d.displayName,".");b.collection("room").doc(s).collection("messages").add({message:a,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:e.displayName,userImage:e.photoURL,uid:e.uid}),v(!0)})))},g=Object(c.useState)(""),x=Object(i.a)(g,2),_=x[0],N=x[1],y=Object(c.useState)(""),I=Object(i.a)(y,2),w=I[0],S=I[1];return Object(he.jsxs)("div",{class:"tab-pane fade channel-details__members",id:"members",role:"tabpanel","aria-labelledby":"members-tab",children:[Object(he.jsx)("div",{className:"channel-details__members__header",children:Object(he.jsxs)("div",{className:"form-group",children:[Object(he.jsx)(ye.a,{className:"search-icon"}),Object(he.jsx)("input",{onChange:function(e){N(e.target.value)},type:"text",className:"form-control",placeholder:"Find members",value:_})]})}),Object(he.jsxs)("div",{className:"channel-details__members__list",children:[Object(he.jsxs)("div",{className:"dropdown",children:[Object(he.jsx)("div",{className:"member dropdown-toggle",role:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",id:"addUsers",children:Object(he.jsxs)("div",{className:"member__info",children:[Object(he.jsx)("div",{className:"member__avatar",children:Object(he.jsx)(Ht.a,{})}),Object(he.jsx)("div",{className:"member__name",children:Object(he.jsx)("strong",{children:"Add people"})})]})}),Object(he.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"addUsers",style:{maxHeight:300,maxWidth:"100%",width:"100%"},children:[Object(he.jsxs)("div",{className:"form-group",style:{padding:"10px 25px"},children:[Object(he.jsx)("label",{htmlFor:"",className:"form-label",children:"Find user"}),Object(he.jsx)("input",{onChange:function(e){S(e.target.value)},type:"text",className:"form-control"})]}),Object(he.jsx)("button",{className:"c-button-unstyled c-button--medium c-button",style:{marginLeft:25},onClick:function(){l&&t&&(null===l||void 0===l||l.docs.map((function(e){h(e.data())})))},role:"button",children:Object(he.jsx)("strong",{children:"Add all user"})}),null===l||void 0===l?void 0:l.docs.map((function(e){var t=e.data();if(!r.find((function(e){return e.uid===t.uid})))return Object(he.jsx)(At,{filterText:w.toLowerCase(),user:t,className:"dropdown-item",dropdownItem:!0,addUser:function(){return h(t)}},t.uid)}))]})]}),r.map((function(e){return Object(he.jsx)(At,{filterText:_.toLowerCase(),user:e,roomOwner:a})}))]})]})};a(70);var Yt=function(e){var t=e.uid,a=Object(f.c)(ae),s=Object(f.c)(ue),n=Object(f.c)(de),o=Object(f.c)(te),l=null===s||void 0===s?void 0:s.members,d=null===l||void 0===l?void 0:l.slice(),r=Object(p.a)(b.collection("users")),m=Object(i.a)(r,2),j=m[0],v=(m[1],null===j||void 0===j?void 0:j.docs.find((function(e){return e.data().uid===t}))),O=(null===v||void 0===v?void 0:v.data().displayName)?null===v||void 0===v?void 0:v.data().displayName:null===v||void 0===v?void 0:v.data().email,h=Object(c.useState)(!0),g=Object(i.a)(h,2),x=g[0],_=g[1];return Object(c.useEffect)((function(){return function(){_(!0)}}),[x]),Object(he.jsx)("div",{className:"modal fade",id:"removeAlertModal",tabIndex:"-1","aria-hidden":"true",children:Object(he.jsx)("div",{className:"modal-dialog",children:Object(he.jsxs)("div",{className:"modal-content remove-alert-modal",children:[Object(he.jsx)("div",{className:"c-modal__header",children:Object(he.jsx)("h1",{children:"Remove member"})}),Object(he.jsxs)("div",{className:"c-modal__content",children:["Are you sure you want to remove ",O," from #",null===s||void 0===s?void 0:s.name]}),Object(he.jsx)("div",{className:"c-modal__footer",children:Object(he.jsxs)("div",{className:"footer__buttons",children:[Object(he.jsx)("button",{className:"c-button-unstyled c-button--medium","data-bs-dismiss":"modal",children:"Cancel"}),Object(he.jsx)("button",{className:"c-button-unstyled c-button--medium danger","data-bs-dismiss":"modal",onClick:function(){var e=l.indexOf(n.uid);-1!==e&&(null===d||void 0===d||d.splice(e,1),b.collection("room").doc(o).update({members:d}).then((function(){_(!0);var e="was removed by ".concat(null===a||void 0===a?void 0:a.displayName,".");b.collection("room").doc(o).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:null===v||void 0===v?void 0:v.data().displayName,userImage:null===v||void 0===v?void 0:v.data().photoURL,uid:null===v||void 0===v?void 0:v.data().uid})})))},children:"Remove"})]})})]})})})},Xt=a(90),Gt=a.n(Xt),Jt=a(89),Kt=a.n(Jt);var Qt=function(){var e,t,a=Object(f.c)(te),s=Object(p.a)(a&&b.collection("room").doc(a)),n=Object(i.a)(s,2),o=n[0],l=(n[1],Object(c.useState)(!1)),d=Object(i.a)(l,2),r=d[0],u=d[1],m=Object(c.useState)(!1),j=Object(i.a)(m,2),v=j[0],O=j[1],h=null===o||void 0===o||null===(e=o.data())||void 0===e?void 0:e.isPrivate,g=Object(c.useState)(""),x=Object(i.a)(g,2),_=(x[0],x[1]),N="A86N0fmTCy8fTd4NS0Ne",y=Object(f.b)();return Object(c.useEffect)((function(){return r&&b.collection("room").doc(a).update({isPrivate:!h}).then((function(){_("<strong>public</strong>")})).catch((function(e){return alert(e.message)})),function(){u(!1)}}),[r]),Object(c.useEffect)((function(){return v&&b.collection("room").doc(a).delete().then((function(){y(T({isModalOpen:!1})),y(W({roomId:N}))})).catch((function(e){return alert(e.message)})),function(){O(!1)}}),[v]),a!==N?Object(he.jsxs)("div",{class:"tab-pane fade channel-details__setting",id:"setting",role:"tabpanel","aria-labelledby":"setting-tab",children:[Object(he.jsx)("div",{className:"c-tab-group",role:"button",onClick:function(){u(!0)},children:(null===o||void 0===o||null===(t=o.data())||void 0===t?void 0:t.isPrivate)?Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Kt.a,{}),Object(he.jsx)("span",{children:"Change to public channel"})]}):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)(Ye.a,{className:"type-icon"}),Object(he.jsx)("span",{children:"Change to private channel"})]})}),Object(he.jsx)("hr",{}),Object(he.jsxs)("div",{className:"c-tab-group button-delete","data-bs-dismiss":"modal","data-bs-target":"#removeAlertModal",role:"button",onClick:function(){O(!0)},children:[Object(he.jsx)(Gt.a,{className:"type-icon"}),Object(he.jsx)("span",{children:"Delete this channel"})]})]}):Object(he.jsx)("div",{class:"tab-pane fade channel-details__setting",id:"setting",role:"tabpanel","aria-labelledby":"setting-tab",children:Object(he.jsx)("div",{className:"c-tab-group",children:"This is the general room of the server so it cannot be modified"})})};var Zt=function(e){var t,a=e.id,c=e.roomDetails,s=e.directUser,n=e.onClick,o=Object(f.c)(ne),i=Object(f.c)(te),l=null===c||void 0===c?void 0:c.name,d=null===c||void 0===c?void 0:c.members,r=null===c||void 0===c?void 0:c.des,u=null===c||void 0===c||null===(t=c.roomOwner)||void 0===t?void 0:t.displayName,m=null===c||void 0===c?void 0:c.roomOwner,j=null===c||void 0===c?void 0:c.isPrivate,b=(null===s||void 0===s?void 0:s.displayName)?s.displayName:null===s||void 0===s?void 0:s.email,v=(null===s||void 0===s?void 0:s.photoURL)?s.photoURL:"default-avatar.jpg";return Object(he.jsx)("div",{className:"modal fade editChat",id:"a"+a,tabIndex:"-1","aria-hidden":"true",children:Object(he.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:Object(he.jsxs)("div",{className:"modal-content chat-details-modal",children:[Object(he.jsxs)("div",{className:"modal-header chat-details-modal__header c-modal__header",children:[Object(he.jsxs)("div",{className:"user-display",children:[!i&&Object(he.jsx)("div",{className:"user__avatar",style:{backgroundImage:"url(".concat(v,")")}}),Object(he.jsx)("h1",{children:i?l:b}),Object(he.jsx)("button",{className:"c-button-unstyled close-button","data-bs-dismiss":"modal","data-bs-target":a,children:Object(he.jsx)(Pe.a,{})})]}),Object(he.jsxs)("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(he.jsx)("li",{class:"nav-item",role:"presentation",children:Object(he.jsx)("span",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#about",type:"button",role:"tab","aria-controls":"about","aria-selected":"true",children:"About"})}),!o&&Object(he.jsx)("li",{class:"nav-item",role:"presentation",children:Object(he.jsx)("span",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#members",type:"button",role:"tab","aria-controls":"members","aria-selected":"false",children:"Members"})}),!o&&Object(he.jsx)("li",{class:"nav-item",role:"presentation",children:Object(he.jsx)("span",{class:"nav-link",id:"contact-tab","data-bs-toggle":"tab","data-bs-target":"#setting",type:"button",role:"tab","aria-controls":"setting","aria-selected":"false",children:"Setting"})})]})]}),Object(he.jsx)("div",{className:"modal-body chat-details-modal__tabs c-modal__content",children:Object(he.jsx)("div",{className:"c-modal__content__inner",children:Object(he.jsxs)("div",{class:"tab-content",id:"myTabContent",children:[Object(he.jsx)(qt,{roomName:l,roomDes:r,roomOwner:u,id:a,isPrivate:j,roomMembers:d}),!o&&Object(he.jsx)(zt,{onClick:n,roomMembers:null===c||void 0===c?void 0:c.members,roomOwner:m,id:a}),!o&&Object(he.jsx)(Qt,{})]})})}),Object(he.jsx)("div",{className:"modal-footer"})]})})})};a(157);var $t=function(){var e=Object(f.c)(ae),t=Object(p.a)(b.collection("users")),a=Object(i.a)(t,2),s=a[0],n=a[1],o=Object(p.a)(b.collection("room")),l=Object(i.a)(o,2),u=l[0],m=l[1],j=[];null===s||void 0===s||s.docs.map((function(e){return j.push(e.data().uid)}));var v=Object(c.useState)(!1),O=Object(i.a)(v,2),h=O[0],g=O[1],x=Object(c.useState)(!1),_=Object(i.a)(x,2),N=_[0],y=_[1],I=Object(c.useState)(""),w=Object(i.a)(I,2),S=w[0],R=w[1],k=Object(c.useState)(""),C=Object(i.a)(k,2),M=C[0],L=C[1],U=Object(c.useState)(""),T=Object(i.a)(U,2),D=T[0],E=T[1],P=Object(c.useState)(!1),F=Object(i.a)(P,2),B=F[0],W=F[1],q=Object(c.useState)(!1),A=Object(i.a)(q,2),V=A[0],H=A[1],z=function(){var t=Object(r.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}if(""!==S){t.next=4;break}return E("Please enter the channel name"),t.abrupt("return");case 4:V?E("Channel exist!"):b.collection("room").add({name:S,des:M,isPrivate:N,members:N?[e.uid]:j,roomOwner:e}).then((function(e){E("Room was created successfully"),W(!0)})).catch((function(e){E(e.message),W(!1)})),setTimeout((function(){return E("")}),3e3);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(!m){var e,t=null===u||void 0===u||null===(e=u.docs)||void 0===e?void 0:e.find((function(e){return e.data().name===S}));console.log(t),t&&H(!0)}return h&&z(),function(){h&&(R(""),L("")),H(!1),g(!1)}}),[m,S,h]),Object(he.jsx)("div",{className:"modal fade",id:"createChannel",tabIndex:"-1","aria-hidden":"true",children:Object(he.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:Object(he.jsx)("div",{className:"modal-content create-channel",children:n?Object(he.jsx)(st,{}):Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("div",{className:"create-channel__header c-modal__header",children:Object(he.jsx)("h1",{children:"Create a channel"})}),Object(he.jsxs)("div",{className:"create-channel__body",children:[Object(he.jsx)("div",{className:"overview c-gray-text",children:"Channels are where your team communicates. They\u2019re best when organized around a topic \u2014 #marketing, for example."}),Object(he.jsx)("br",{}),Object(he.jsx)(Ft,{fieldLabel:"Name",required:!0,hyphenized:!0,toggle:h,onChange:function(e){var t=e.target.value.replace(/\s/g,"-");R(t)},value:S}),Object(he.jsx)(Ft,{fieldLabel:"Description",toggle:h,onChange:function(e){var t=e.target.value;L(t)},value:M}),Object(he.jsx)("div",{className:"c-gray-text",children:Object(he.jsx)("small",{children:"What is this channel about(optional)"})}),Object(he.jsx)("br",{}),Object(he.jsxs)("div",{className:"channel-type form-check form-switch",children:[Object(he.jsxs)("label",{htmlFor:"switch-button",className:"channel-type-des form-check-label",children:[Object(he.jsx)("div",{className:"channel-type-des__title",children:Object(he.jsx)("strong",{children:"Make private"})}),Object(he.jsxs)("div",{className:"channel-type-des__body c-gray-text",children:[N&&Object(he.jsxs)(he.Fragment,{children:[Object(he.jsx)("strong",{children:"Private Channel cannot be accessed from outsiders"}),"."]}),!N&&"When a channel is set to private, it can only be viewed or joined by invitation."]})]}),Object(he.jsx)("div",{className:"switch-button",children:Object(he.jsx)("input",{type:"checkbox",name:"switch-button",role:"switch",className:"form-check-input",id:"switch-button",onChange:function(){y(!N)}})})]})]}),Object(he.jsx)("br",{}),Object(he.jsxs)("div",{className:"create-channel__footer",children:[Object(he.jsx)("button",{className:"btn btn-success c-button--medium",onClick:function(){g(!0)},children:"Create"}),B?Object(he.jsx)("div",{className:"notification badge bg-success",children:D}):Object(he.jsx)("div",{className:"notification badge bg-warning",children:D})]})]})})})})};a(158);var ea=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),o=Object(i.a)(n,2),l=o[0],u=o[1],m=Object(c.useState)(""),O=Object(i.a)(m,2),h=O[0],p=O[1],g=Object(c.useState)(!1),x=Object(i.a)(g,2),_=x[0],N=x[1],y=Object(c.useState)(!1),I=Object(i.a)(y,2),w=I[0],S=I[1],R=Object(c.useState)(""),k=Object(i.a)(R,2),C=k[0],M=k[1],L=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return c=j.ref(),s=c.child(a.name),N(!0),e.next=8,s.put(a);case 8:return e.t0=p,e.next=11,s.getDownloadURL();case 11:e.t1=e.sent,(0,e.t0)(e.t1),N(!1),console.log(h);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=Object(f.b)(),T=Object(f.c)(ae),D=Object(f.c)(ce),E=function(){var e=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("save changes"),e.next=3,b.collection("users");case 3:t=e.sent,console.log("users",T),D&&(t.doc(D).update({photoURL:h}).then((function(){return console.log("Clicked")})).catch((function(e){return alert(e.message)})),t.doc(D).update({displayName:a}).then((function(){U(q({user:{displayName:a,whatIDo:l,photoURL:h,uid:T.uid,email:T.email,emailVerified:T.emailVerified,isOnline:!0}}))})).catch((function(e){return alert(e.message)})),t.doc(D).update({whatIDo:l}).then((function(){U(q({user:{displayName:a,whatIDo:l,photoURL:h,uid:T.uid,email:T.email,emailVerified:T.emailVerified,isOnline:!0}}))})).catch((function(e){return alert(e.message)})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){if(w){if(""===a||""===l)return void M("You have to fill the information!");if(""===h)return void M("You have to upload an image!");E()}return function(){S(!1)}}),[w]);var P,F=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.signOut().then((function(){b.collection("users").doc(D).update({isOnline:!1})})).catch((function(e){return alert(e.message)}));case 2:U(V({initState:null}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(he.jsxs)("div",{className:"setup-page-container",children:[Object(he.jsx)("h2",{children:"Please enter your basic information"}),Object(he.jsxs)("div",{className:"setup-page__inner",children:[Object(he.jsxs)("div",{className:"setup-page__collumns",children:[Object(he.jsx)("div",{className:"collumn setup-page__collumn photo-column ",children:Object(he.jsxs)("div",{className:"form-group",children:[Object(he.jsx)("label",{htmlFor:"",className:"form-label",children:Object(he.jsx)("strong",{children:"Photo"})}),Object(he.jsx)("div",{className:"image-holder-container",children:Object(he.jsx)("div",{className:"image-holder",style:{backgroundImage:"url(".concat(h,")")},children:_&&Object(he.jsx)(st,{})})}),Object(he.jsx)("input",{ref:function(e){return P=e},type:"file",className:"form-control photo-input",accept:"img/*",onChange:L}),Object(he.jsxs)("span",{role:"button",className:"upload-button c-button--medium btn-success",onClick:function(){P.click()},children:["Upload an image"," "]})]})}),Object(he.jsxs)("div",{className:" collumn setup-page__collumn info-column",children:[Object(he.jsxs)("div",{className:"form-group",children:[Object(he.jsxs)("label",{className:"form-label",children:[Object(he.jsx)("strong",{children:"Display name"})," "]}),Object(he.jsx)("input",{value:a,onChange:function(e){s(e.target.value)},type:"text",className:"form-control"})]}),Object(he.jsx)("br",{}),Object(he.jsxs)("div",{className:"form-group",children:[Object(he.jsx)("label",{className:"form-label",children:Object(he.jsx)("strong",{children:"What you do"})}),Object(he.jsx)("input",{value:l,onChange:function(e){u(e.target.value)},type:"text",className:"form-control "})]}),Object(he.jsx)("br",{})]})]}),Object(he.jsx)("br",{}),Object(he.jsxs)("div",{className:"button-container",children:[Object(he.jsx)("button",{className:"btn btn-secondary",onClick:F,children:"Use another account"}),Object(he.jsx)("button",{className:"btn btn-success",onClick:function(){S(!0)},children:"Proceed to the server"})]}),Object(he.jsx)("div",{className:"notif-container",children:Object(he.jsx)("strong",{children:C})})]})]})},ta=a(91),aa=a.n(ta);a(159);var ca=function(){var e,t,a=Object(f.c)(de),s=(null===a||void 0===a||a.photoURL,null===a||void 0===a||a.displayName,null===a||void 0===a||a.isOnline,Object(f.c)(ie),Object(f.c)(te)),n=Object(f.c)(le),o=Object(f.c)(ae),l=(null===a||void 0===a||a.whatIDo,Object(f.c)(re),Object(c.useRef)(null)),u=Object(f.c)(ce),m=Object(c.useState)(""),j=Object(i.a)(m,2),v=j[0],O=(j[1],Object(c.useState)(!1)),h=Object(i.a)(O,2),g=h[0],x=(h[1],Object(c.useState)(null)),_=Object(i.a)(x,2),w=_[0],S=_[1],R=Object(p.a)(b.collection("users")),C=Object(i.a)(R,2),L=C[0],U=(C[1],Object(f.c)(ee)),T=Object(p.a)(b.collection("room")),D=Object(i.a)(T,1)[0],E=Object(f.b)(),P=Object(p.a)(s&&b.collection("room").doc(s).collection("messages")),F=Object(i.a)(P,1)[0],q=Object(p.a)(b.collection("directRooms")),A=Object(i.a)(q,1)[0],V=Object(p.a)(n&&b.collection("directRooms").doc(n).collection("messages")),H=Object(i.a)(V,1)[0];console.log(n);var Y=Object(p.a)(u&&b.collection("users").doc(u).collection("savedItems").orderBy("timestamp","desc")),se=Object(i.a)(Y,2),ne=se[0],oe=se[1];Object(c.useEffect)((function(){function e(e){l.current&&!l.current.contains(e.target)&&S(null)}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}));var ue=function(e){S(e),console.log(e)},me=Object(c.useState)(null),je=Object(i.a)(me,2),be=je[0],ve=je[1];Object(c.useEffect)(Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Toggle"),t=null===ne||void 0===ne?void 0:ne.docs.map(function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s,n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.data().messageId,c=t.data().roomId,s=t.data().roomDirectId,n=t.data().replyTo,o=null,n?(console.log("REPLY TO"),c?o=b.collection("room").doc(c).collection("messages").doc(n).get():s&&(o=b.collection("directRooms").doc(s).collection("messages").doc(n).get())):c?o=b.collection("room").doc(c).collection("messages").doc(a).get():s&&a&&(o=b.collection("directRooms").doc(s).collection("messages").doc(a).get()),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(t),[],t&&(Promise.all(t).then((function(e){return ve(e)})),console.log(be));case 5:case"end":return e.stop()}}),e)}))),[U,ne,F,H]);var Oe=function(e,t){var a=document.querySelector(".main-save__item__inner");if(console.log(t.target),t.target==a&&(console.log(t.target),e.savedMessageInfo)){E(N({onMainSave:null}));var c=e.savedMessageInfo.roomId,s=e.savedMessageInfo.roomDirectId;if(c){var n=null===D||void 0===D?void 0:D.docs.find((function(e){return e.id===c})).data().usersHaveRead;n||(n=[]),n.includes(o.uid)||n.push(o.uid),E(z({directMessageRoomId:null,directMessageUid:null})),E(W({roomId:c})),b.collection("room").doc(c).update({usersHaveRead:n})}else if(s){console.log("DIrect");var i=null===A||void 0===A?void 0:A.docs.find((function(e){return e.id===s})).data().usersHaveRead;i||(i=[]),i.includes(o.uid)||i.push(o.uid),E(W({roomId:null})),E(z({directMessageRoomId:s,directMessageUid:e.uid})),b.collection("directRooms").doc(s).update({usersHaveRead:i})}E(M({savedItemId:e.id}))}};console.log(s),Object(f.c)($);var fe=Object(f.c)(Z),pe=Object(f.c)(K),ge=Object(f.c)(Q),xe=Object(p.b)(fe&&(pe?b.collection("room").doc(pe).collection("messages").doc(fe):ge?b.collection("directRooms").doc(ge).collection("messages").doc(fe):void 0)),_e=Object(i.a)(xe,2),Ne=(_e[0],_e[1],Object(p.a)(fe&&(pe?b.collection("room").doc(pe).collection("messages").doc(fe).collection("subMessages").orderBy("timestamp","asc"):ge?b.collection("directRooms").doc(ge).collection("messages").doc(fe).collection("subMessages").orderBy("timestamp","asc"):void 0))),ye=(Object(i.a)(Ne,1)[0],Object(f.c)(J),Object(f.c)(G),Object(p.b)(fe&&(pe?b.collection("room").doc(pe):ge?b.collection("directRooms").doc(ge):void 0))),Ie=Object(i.a)(ye,1)[0],we=(fe&&(pe?null===Ie||void 0===Ie||Ie.data().name:ge&&(null===Ie||void 0===Ie||null===(e=Ie.data().users)||void 0===e||null===(t=e.find((function(e){return L[0]===L[1]?e.uid===o.uid:o.uid!==e.uid})))||void 0===t||t.displayName)),Object(f.c)(X),Object(f.c)(ie)),Se=Object(c.useState)(!0),Re=Object(i.a)(Se,2),ke=Re[0],Ce=Re[1];return Object(c.useEffect)((function(){console.log("On load");var e=document.querySelector(".main-save-container"),t=document.querySelector(".side-bar-container"),a=document.querySelector(".sidebar-toggle-button.c-button-unstyled"),c=document.querySelector(".secondary-view-container"),s=function(){var s=window.innerWidth,n=null===e||void 0===e?void 0:e.offsetWidth;n<400&&!(null===t||void 0===t?void 0:t.classList.contains("sidebar-collapse"))?(null===t||void 0===t||t.classList.add("sidebar-collapse"),Ce(!1),console.log("3"),s<706&&(null===t||void 0===t||t.classList.add("sidebar-collapse"),Ce(!1),null===e||void 0===e||e.classList.remove("collapse"),console.log("1"),s<=576&&we&&(null===e||void 0===e||e.classList.add("collapse"),null===c||void 0===c||c.classList.add("fill"),console.log("2")),we||(null===e||void 0===e||e.classList.remove("collapse"),console.log("3")))):n>=600&&(null===t||void 0===t?void 0:t.classList.contains("sidebar-collapse"))&&(null===t||void 0===t||t.classList.remove("sidebar-collapse"),console.log(a),Ce(!0),console.log("4"));var o=document.querySelector(".sidebar-collapse"),i=function(){null===o||void 0===o||o.classList.remove("sidebar-float")};null===e||void 0===e||e.addEventListener("click",i),null===c||void 0===c||c.addEventListener("click",i)};s(),window.addEventListener("resize",s)})),Object(he.jsxs)("div",{className:"main-save-container",children:[Object(he.jsx)("div",{className:"main-save__header",children:Object(he.jsxs)("div",{className:"main-save__header__text",children:[Object(he.jsxs)("div",{className:"main-save__header__title",children:[Object(he.jsx)("div",{onClick:function(){var e=document.querySelector(".side-bar-container");null===e||void 0===e||e.classList.add("sidebar-float")},className:ke?"sidebar-toggle-button c-button-unstyled chat__header__left__button collapse":"sidebar-toggle-button c-button-unstyled chat__header__left__button ",children:Object(he.jsx)("span",{children:Object(he.jsx)(Mt.a,{})})}),Object(he.jsx)("span",{children:"Saved items"})]}),Object(he.jsx)("div",{role:"button",className:"main-save__header__change-mode",onClick:function(){E(N({onMainSave:null})),E(B({isShowingSecondaryWorkspace:!0})),E(y({onSave:!0})),E(I({onOpenProfile:null})),E(k({onReplyInThread:null}))},children:Object(he.jsx)(aa.a,{})})]})}),Object(he.jsx)("div",{className:"main-save__body",children:oe?Object(he.jsx)(st,{}):Object(he.jsx)(he.Fragment,{children:null===be||void 0===be?void 0:be.map((function(e){var t=null===ne||void 0===ne?void 0:ne.docs.find((function(t){return t.data().replyTo?t.data().replyTo===e.id:t.data().messageId===e.id})),a="",c={};if((null===t||void 0===t?void 0:t.data().roomId)&&(a=null===D||void 0===D?void 0:D.docs.find((function(e){return e.id===t.data().roomId})).data().name,c.savedMessageInfo=t.data()),(null===t||void 0===t?void 0:t.data().roomDirectId)&&(a="Direct message",c.savedMessageInfo=t.data()),(null===t||void 0===t?void 0:t.data().replyTo)&&console.log("ALOOO ",a),e.data()){var s,n,o=null===(s=c.savedMessageInfo)||void 0===s?void 0:s.roomId,i=null===(n=c.savedMessageInfo)||void 0===n?void 0:n.roomDirectId,l=e.data(),d=l.message,r=l.timestamp,u=l.user,m=l.userImage,j=l.uid,b=l.savedBy,O=l.reactions;return console.log("Alo"),c.uid=j,c.id=e.id,Object(he.jsx)("div",{className:"main-save__item-container",children:Object(he.jsxs)("div",{className:"main-save__item__inner",role:"button",onClick:function(e){return Oe(c,e)},children:[Object(he.jsx)("div",{className:"saved-message__header",onClick:function(e){return Oe(c,e)},children:a}),Object(he.jsx)(yt,{emojiMartPosition:w,onClick:ue,message:d,timestamp:r,userName:u,userImage:m,uid:j,savedBy:b,emojiReact:v,reactToggle:g,label:"",id:e.id,reactions:O,inMainSave:!0,messageRoomId:o,messageRoomDirectId:i,infor:!0},e.id)]})},e.id)}}))})})]})};var sa=function(){var e=Object(h.a)(v),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(p.a)(b.collection("users")),o=Object(i.a)(n,2),l=o[0],d=(o[1],null===l||void 0===l?void 0:l.docs.find((function(e){return e.data().uid===(null===a||void 0===a?void 0:a.uid)}))),r=Object(c.useState)(!1),u=Object(i.a)(r,2),m=u[0],j=u[1];Object(c.useEffect)((function(){a&&d&&function(){var e,t;null===(e=b.collection("users"))||void 0===e||null===(t=e.doc(null===d||void 0===d?void 0:d.id))||void 0===t||t.update({isOnline:!0})}()}),[a,d]);var O=Object(c.useState)(200),g=Object(i.a)(O,2),x=g[0],_=g[1],N=Object(c.useState)(300),y=Object(i.a)(N,2),I=y[0],w=y[1],S=Object(f.c)(ue),R=Object(f.c)(te),k=Object(f.c)(le),C=R||k,M=Object(f.c)(me),L=Object(f.c)(de),U=Object(c.useState)(!1),T=Object(i.a)(U,2),D=T[0],E=T[1],P=function(){E(!D),console.log("Clicked")},F=Object(f.c)(ae),B=Object(f.c)(X),W=Object(c.useState)(!0),q=Object(i.a)(W,2),A=q[0],V=q[1];return Object(c.useEffect)((function(){document.addEventListener("visibilitychange",(function(){V(!A),console.log(A?"active":"inactive")}))}),[]),Object(he.jsx)("div",{className:"App",onresize:!0,children:s?Object(he.jsx)(Ut,{}):a?(null===F||void 0===F?void 0:F.displayName)&&(null===F||void 0===F?void 0:F.photoURL)?Object(he.jsx)(he.Fragment,{children:Object(he.jsxs)("div",{className:"App-inner",children:[Object(he.jsx)($t,{}),Object(he.jsx)(Zt,{id:C,roomDetails:S,directUser:M,onClick:P}),Object(he.jsx)(Dt,{}),Object(he.jsx)(Yt,{uid:null===L||void 0===L?void 0:L.uid}),Object(he.jsx)(Pt,{}),Object(he.jsx)(He,{user:a}),Object(he.jsxs)("div",{className:"work-space-body",children:[Object(he.jsx)(it,{width:x}),Object(he.jsx)(Et,{onMouseDown:function(e){var t=e.clientX;function a(e){var a=x+e.clientX-t;_(a<200?200:a>500?500:a)}window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e)}))}}),B?Object(he.jsx)(ca,{}):Object(he.jsx)(Lt,{width:I,onClick:P}),Object(he.jsx)(Et,{onMouseDown:function(e){j(!0);var t=e.clientX;document.body.offsetWidth;function a(e){var a=I-e.clientX+t;w(a<300?300:a>600?600:a)}window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e),j(!1)}))}}),Object(he.jsx)(St,{width:I,resize:m})]})]})}):Object(he.jsx)(ea,{}):Object(he.jsx)(ge,{})})},na=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,184)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,o=t.getTTFB;a(e),c(e),s(e),n(e),o(e)}))},oa=a(96),ia=a(92),la=a.n(ia),da=a(93),ra=a(94),ua=a.n(ra),ma={key:"root",storage:la.a,stateReconciler:ua.a},ja=Object(oa.a)(ma,Oe),ba=Object(g.a)({reducer:{app:ja}}),va=Object(da.a)(ba),Oa=a(95);o.a.render(Object(he.jsx)(s.a.StrictMode,{children:Object(he.jsx)(f.a,{store:ba,children:Object(he.jsx)(Oa.a,{loading:"null",persistor:va,children:Object(he.jsx)(sa,{})})})}),document.getElementById("root")),na()},67:function(e,t,a){}},[[163,1,2]]]);
//# sourceMappingURL=main.3ec6753a.chunk.js.map