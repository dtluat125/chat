(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},131:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(27),i=a.n(n),o=(a(81),a(5)),l=(a(82),a(14)),d=a.n(l),r=a(22),u=a(21),b=(a(89),u.a.initializeApp({apiKey:"AIzaSyCmzK2LdP7LkJNXNnQBJxSTX9EOvnIsV-k",authDomain:"chat-app-ba041.firebaseapp.com",projectId:"chat-app-ba041",storageBucket:"chat-app-ba041.appspot.com",messagingSenderId:"410871016552",appId:"1:410871016552:web:1ef1149c5824861da5dfdd",measurementId:"G-BCB1RKDQ3Q"})),j=b.storage(),m=b.firestore(),v=u.a.auth(),O=new u.a.auth.GoogleAuthProvider,h=a(28),p=a(6),f=a(9),x=a(40),g=Object(x.b)({name:"app",initialState:{roomId:null,user:null,docUserId:null,dataUpdated:null,userUid:null,directMessageUid:null,isShowingSecondaryWorkspace:null,directMessageRoomId:null,selectedUser:null,messageSend:!1,localTime:null,roomDetails:null,directUser:null,isModalOpen:null,moves:[]},reducers:{enterRoom:function(e,t){e.roomId=t.payload.roomId},saveUserInfo:function(e,t){e.user=t.payload.user},docUserId:function(e,t){e.docUserId=t.payload.docUserId},reset:function(e,t){e.roomId=t.payload.initState,e.user=t.payload.initState,e.dataUpdated=t.payload.initState,e.userUid=t.payload.initState,e.directMessageUid=t.payload.initState,e.isShowingSecondaryWorkspace=t.payload.initState,e.docUserId=t.payload.initState,e.directMessageRoomId=t.payload.initState,e.selectedUser=null,e.localTime=null,e.roomDetails=null,e.directUser=null,e.isModalOpen=null,e.moves=[]},getDataState:function(e,t){e.dataUpdated=t.payload.dataUpdated},enterDirectMessage:function(e,t){e.directMessageUid=t.payload.directMessageUid,e.directMessageRoomId=t.payload.directMessageRoomId},setUserProfileUid:function(e,t){e.userUid=t.payload.userUid},showSecondaryWorkspace:function(e,t){e.isShowingSecondaryWorkspace=t.payload.isShowingSecondaryWorkspace},setSelectedUser:function(e,t){e.selectedUser=t.payload.selectedUser},sendMessage:function(e,t){e.messageSend=t.payload.messageSend},setTime:function(e,t){e.localTime=t.payload.localTime},setRoomDetails:function(e,t){e.roomDetails=t.payload.roomDetails},setDirectUser:function(e,t){e.directUser=t.payload.directUser},setIsModalOpen:function(e,t){e.isModalOpen=t.payload.isModalOpen},setMoves:function(e,t){e.moves=t.payload.moves}}}),N=g.actions,_=N.setMoves,y=N.setIsModalOpen,w=N.setDirectUser,C=N.setRoomDetails,k=N.setTime,U=(N.sendMessage,N.setSelectedUser),S=N.showSecondaryWorkspace,I=N.enterRoom,R=N.saveUserInfo,L=N.docUserId,D=N.reset,M=N.getDataState,E=N.enterDirectMessage,P=N.setUserProfileUid,T=function(e){return e.app.roomId},F=function(e){return e.app.user},W=function(e){return e.app.docUserId},z=function(e){return e.app.dataUpdated},V=function(e){return e.app.directMessageUid},A=function(e){return e.app.userUid},q=function(e){return e.app.isShowingSecondaryWorkspace},H=function(e){return e.app.directMessageRoomId},B=function(e){return e.app.selectedUser},Y=function(e){return e.app.localTime},Q=function(e){return e.app.roomDetails},X=function(e){return e.app.directUser},G=function(e){return e.app.moves},J=g.reducer,K=a(0);var Z=function(e){return Object(K.jsxs)("div",{className:"login",children:[Object(K.jsx)("div",{className:"col-md-6 img-bg-container"}),Object(K.jsxs)("div",{className:"col-md-6 form-container",children:[Object(K.jsx)("span",{className:"form__title",children:"Login to continue"}),Object(K.jsxs)("form",{method:"post",children:[Object(K.jsxs)("div",{className:"form__input",children:[Object(K.jsx)("input",{name:"form__email",type:"text",className:"input-area",onChange:e.onEmailChange,value:e.email,required:!0}),Object(K.jsx)("span",{className:"label-span",children:"Email"})]}),Object(K.jsxs)("div",{className:"form__input",children:[Object(K.jsx)("input",{name:"form__password",type:"password",className:"input-area",onChange:e.onPassWordChange,value:e.password,required:!0}),Object(K.jsx)("span",{className:"label-span",children:"Password"})]}),Object(K.jsx)("button",{onClick:e.signInEmail,type:"submit",className:"form__button",children:"Sign in"})]}),Object(K.jsx)("div",{className:"change-form",children:Object(K.jsxs)("p",{children:[Object(K.jsx)("span",{onClick:e.onClick,children:"REGISTER"})," if you don't have any account"]})})]})]})};var $=function(e){return Object(K.jsxs)("div",{className:"login",children:[Object(K.jsx)("div",{className:"col-md-6 img-bg-container"}),Object(K.jsxs)("div",{className:"col-md-6 form-container",children:[Object(K.jsx)("span",{className:"form__title",children:"Register"}),Object(K.jsxs)("form",{method:"post",children:[Object(K.jsxs)("div",{className:"form__input",children:[Object(K.jsx)("input",{name:"form__email",type:"text",className:"input-area",value:e.email,onChange:function(t){return e.onEmailChange(t)},required:!0}),Object(K.jsx)("span",{className:"label-span",children:"Email"})]}),Object(K.jsxs)("div",{className:"form__input",children:[Object(K.jsx)("input",{name:"form__password",type:"password",className:"input-area",value:e.password,onChange:function(t){return e.onPassWordChange(t)},required:!0}),Object(K.jsx)("span",{className:"label-span",children:"Password"})]}),Object(K.jsxs)("div",{className:"form__input",children:[Object(K.jsx)("input",{name:"form__password",type:"password",className:"input-area",value:e.confirm,onChange:function(t){return e.onConfirmChange(t)},required:!0}),Object(K.jsx)("span",{className:"label-span",children:"Confirm Password"})]}),Object(K.jsx)("button",{type:"submit",onClick:e.register,className:"form__button",children:"Sign in"})]}),Object(K.jsx)("div",{className:"change-form",children:Object(K.jsxs)("p",{children:[Object(K.jsx)("span",{onClick:e.onClick,children:"Login"})," if you already have an account"]})})]})]})};var ee=function(e){var t=Object(c.useState)(!0),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(c.useState)(""),l=Object(o.a)(i,2),u=l[0],b=l[1],j=Object(c.useState)(""),x=Object(o.a)(j,2),g=x[0],N=x[1],_=Object(c.useState)(""),y=Object(o.a)(_,2),w=y[0],C=y[1],k=Object(p.b)(),U=Object(f.a)(m.collection("users")),S=Object(o.a)(U,2),I=S[0],D=S[1];function M(e){b(e.target.value)}Object(h.a)(v);var E=function(e){C(e.target.value)};return s?Object(K.jsx)(Z,{onClick:function(){n(!1)},signIn:function(e){e.preventDefault(),v.signInWithPopup(O).then((function(e){return console.log(e.data())})).catch((function(e){return alert(e.message)}))},password:u,email:w,onPassWordChange:M,onEmailChange:E,signInEmail:function(e){e.preventDefault(),v.signInWithEmailAndPassword(w,u).then(function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={displayName:t.user.displayName,email:t.user.email,emailVerified:t.user.emailVerified,uid:t.user.uid,photoURL:t.user.photoURL,isOnline:!0},!D&&I&&(c=null===I||void 0===I?void 0:I.docs.find((function(e){return e.data().uid===a.uid})),k(R({user:null===(s=c)||void 0===s?void 0:s.data()})),k(L({docUserId:null===(n=c)||void 0===n?void 0:n.id})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return alert(e.message)}))}}):Object(K.jsx)($,{onClick:function(){n(!0)},password:u,confirm:g,email:w,onPassWordChange:M,onConfirmChange:function(e){N(e.target.value)},onEmailChange:E,register:function(e){e.preventDefault(),u!==g?alert("You type different confirm password!"):v.createUserWithEmailAndPassword(w,u).then((function(e){console.log(e.user);var t={displayName:e.user.displayName,email:e.user.email,emailVerified:e.user.emailVerified,uid:e.user.uid,photoURL:e.user.photoURL,isOnline:!0};k(R({user:t})),m.collection("users").add(t).then((function(e){return k(L({docUserId:e.id}))}))})).catch((function(e){return alert(e.message)}))}})},te=(a(94),a(95),a(96),a(39)),ae=a.n(te),ce=a(32),se=a.n(ce),ne=a(58),ie=a.n(ne),oe=a(147),le=a(24),de=a.n(le);var re=function(e){var t=e.icon,a=e.name,c=e.photoURL,s=e.id,n=e.uid,i=e.filterText,l=Object(p.b)(),d=Object(p.c)(F),r=Object(f.a)(m.collection("directRooms")),u=Object(o.a)(r,2),b=u[0],j=u[1],v=null===d||void 0===d?void 0:d.uid,O=null===b||void 0===b?void 0:b.docs.find((function(e){return n===v?e.data().uids[0]===e.data().uids[1]&&e.data().uids.includes(v):e.data().uids.includes(v)&&e.data().uids.includes(n)})),h=c?i.slice(6):i.slice(9);return-1!=(null===a||void 0===a?void 0:a.indexOf(h))?Object(K.jsxs)("div",{className:"dropdown-item list-item",onClick:c?function(){l(I({roomId:null})),O||0!=j||(m.collection("directRooms").add({uids:[v,n]}),console.log("added!")),(null===O||void 0===O?void 0:O.id)&&(l(E({directMessageUid:n,directMessageRoomId:null===O||void 0===O?void 0:O.id})),l(U({selectedUser:null})))}:function(){s&&(l(E({directMessageUid:null})),l(I({roomId:s})))},children:[Object(K.jsx)("div",{style:c?{backgroundImage:"url(".concat(c,")")}:{},className:"list-item__icon",children:t||""}),Object(K.jsx)("div",{className:"list-item__name",children:a})]}):""},ue=a(33),be=a.n(ue);var je=function(){var e=Object(f.a)(m.collection("room")),t=Object(o.a)(e,3),a=t[0],s=(t[1],t[2],Object(f.a)(m.collection("users"))),n=Object(o.a)(s,1)[0],i=Object(c.useState)(!1),l=Object(o.a)(i,2),d=l[0],r=l[1],u=Object(c.useState)(!1),b=Object(o.a)(u,2),j=b[0],v=b[1],O=Object(c.useState)(""),h=Object(o.a)(O,2),x=h[0],g=h[1];Object(c.useEffect)((function(){var e=/^Channel:/.test(x),t=/^User:/.test(x);return e&&r(!0),t&&v(!0),function(){v(!1),r(!1)}}),[x]);var N=Object(p.c)(F),_=null===N||void 0===N?void 0:N.uid;return Object(K.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuSearchHeader",children:[Object(K.jsxs)("div",{className:"dropdown-item search-bar",disabled:!0,style:{padding:"4px 0px 4px 0px"},children:[Object(K.jsxs)("div",{className:"form-group",children:[Object(K.jsx)(se.a,{className:"search-icon"}),Object(K.jsx)("input",{value:x,onChange:function(e){g(e.target.value)},type:"text",className:"form-control"})]}),Object(K.jsxs)("div",{className:"badges-group",children:[Object(K.jsx)("div",{role:"button",onClick:function(){g("Channel: ")},className:"badge bg-primary",children:"Channel"}),Object(K.jsx)("div",{role:"button",onClick:function(){g("User: ")},className:"badge bg-primary",children:"User"})]})]}),d&&Object(K.jsx)(K.Fragment,{children:null===a||void 0===a?void 0:a.docs.map((function(e){var t=e.data().isPrivate,a=e.data().members;if((null===a||void 0===a?void 0:a.includes(_))&&t||!t)return Object(K.jsx)(re,{name:e.data().name,icon:t?Object(K.jsx)(be.a,{}):"#",id:e.id,filterText:x})}))}),j&&Object(K.jsx)(K.Fragment,{children:null===n||void 0===n?void 0:n.docs.map((function(e){return Object(K.jsx)(re,{name:e.data().displayName?e.data().displayName:e.data().email,photoURL:e.data().photoURL?e.data().photoURL:"default-avatar.jpg",uid:e.data().uid,filterText:x})}))})]})};var me=function(e){var t,a,c,s,n=e.id;console.log(n);var i=Object(f.a)(n&&m.collection("room").doc(n)),l=Object(o.a)(i,1)[0],d=Object(f.a)(n&&m.collection("directRooms").doc(n)),r=Object(o.a)(d,1)[0],u=l||r,b=null===u||void 0===u||null===(t=u.data())||void 0===t?void 0:t.name,j=Object(p.c)(F),v=null===r||void 0===r||null===(a=r.data())||void 0===a?void 0:a.uids,O=null===v||void 0===v?void 0:v.filter((function(e){return e!==j.uid})),h=(null===r||void 0===r||null===(c=r.data())||void 0===c?void 0:c.users)?null===r||void 0===r||null===(s=r.data())||void 0===s?void 0:s.users[1]:void 0,x=(null===h||void 0===h?void 0:h.photoURL)?null===h||void 0===h?void 0:h.photoURL:"default-avatar.jpg",g=Object(p.b)();return Object(K.jsxs)("div",{className:"dropdown-item moves-item",role:"button",onClick:function(){O?r&&(g(I({roomId:null})),g(E({directMessageRoomId:n,directMessageUid:v[1]}))):(g(E({directMessageUid:null,directMessageRoomId:null})),g(I({roomId:n})))},children:[Object(K.jsx)("div",{className:"move__symbol",style:O?{backgroundImage:"url(".concat(x,")")}:{},children:O?"":"#"}),Object(K.jsx)("span",{className:"move__name",children:O?null===h||void 0===h?void 0:h.displayName:b})]})};var ve=function(){var e=Object(p.c)(F),t=Object(f.a)(m.collection("users")),a=Object(o.a)(t,2),c=a[0],s=(a[1],null===c||void 0===c?void 0:c.docs.find((function(t){return t.data().uid===(null===e||void 0===e?void 0:e.uid)}))),n=Object(p.b)(),i=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.signOut().then((function(){m.collection("users").doc(null===s||void 0===s?void 0:s.id).update({isOnline:!1})})).catch((function(e){return alert(e.message)}));case 2:n(D({initState:null}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=null===s||void 0===s?void 0:s.data().email,u=null===s||void 0===s?void 0:s.data().displayName,b=null===s||void 0===s?void 0:s.data().photoURL,j=Object(p.c)(G);return Object(K.jsxs)("div",{className:"header-container",children:[Object(K.jsx)("div",{className:"header__left",children:Object(K.jsxs)(oe.a,{className:"history-dropdown dropdown",children:[Object(K.jsx)(oe.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(K.jsx)(ae.a,{className:"access-time-icon"})}),Object(K.jsxs)(oe.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",children:[Object(K.jsx)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:"Recent"}),null===j||void 0===j?void 0:j.map((function(e){return Object(K.jsx)(me,{id:e})}))]})]})}),Object(K.jsxs)("div",{className:"dropdown header__search",children:[Object(K.jsx)("div",{className:"header__search--inner",id:"dropdownMenuSearchHeader",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false","data-bs-auto-close":"outside",children:Object(K.jsx)(se.a,{})}),Object(K.jsx)(je,{})]}),Object(K.jsxs)("div",{className:"header__right",children:[Object(K.jsxs)(oe.a,{className:"history-dropdown dropdown",children:[Object(K.jsx)(oe.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(K.jsx)(ie.a,{})}),Object(K.jsx)(oe.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",children:Object(K.jsx)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:"This functionality is currently unavailable"})})]}),Object(K.jsx)("div",{className:"header__avatar",children:Object(K.jsxs)(oe.a,{className:"user-dropdown dropdown",children:[Object(K.jsx)(oe.a.Toggle,{className:"c-button-unstyled dropdown-toggle",id:"historyDropdown",variant:"success",children:Object(K.jsx)("div",{className:"user-avatar",style:{backgroundImage:"url(".concat(b||"default-avatar.jpg",")")}})}),Object(K.jsxs)(oe.a.Menu,{className:"dropdown-menu","aria-labelledby":"historyDropdown",children:[Object(K.jsxs)("div",{className:"dropdown-item main-menu__user",children:[Object(K.jsx)("div",{className:"main-menu__user__avatar",style:{backgroundImage:"url(".concat(b||"default-avatar.jpg",")")}}),Object(K.jsxs)("div",{className:"main-menu__user__details",children:[Object(K.jsx)("div",{className:"main-menu__user__name",children:u||l}),Object(K.jsxs)("span",{className:"main-menu__user__status",children:[Object(K.jsx)(de.a,{style:{fontSize:"small"}}),"Active"]})]})]}),Object(K.jsx)("div",{className:"dropdown-item",onClick:i,children:"Sign Out"}),Object(K.jsx)("div",{className:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#editProfile",children:"Edit profile"}),Object(K.jsx)("div",{className:"dropdown-item",onClick:function(){n(P({userUid:null===e||void 0===e?void 0:e.uid})),n(S({isShowingSecondaryWorkspace:!0}))},children:"View profile"})]})]})})]})]})};a(99);var Oe=function(e){var t=e.icon,a=e.title,s=e.photoURL,n=e.uid,i=e.id,l=e.email,u=e.isOnline,b=e.isUser,j=e.usersHaveReadRoom,v=e.isPrivate,O=e.members,h=Object(p.b)(),x=Object(p.c)(V),g=Object(p.c)(H),N=Object(p.c)(F),y=null===N||void 0===N?void 0:N.uid,w=Object(f.a)(m.collection("directRooms")),C=Object(o.a)(w,2),k=C[0],U=C[1],S=Object(f.a)(m.collection("users")),R=Object(o.a)(S,1)[0],L=Object(c.useState)(!1),D=Object(o.a)(L,2),M=(D[0],D[1]),P=null===k||void 0===k?void 0:k.docs.find((function(e){return n===y?e.data().uids[0]===e.data().uids[1]&&e.data().uids.includes(y):e.data().uids.includes(y)&&e.data().uids.includes(n)})),W=null===P||void 0===P?void 0:P.data().usersHaveRead,z=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P||!n||U){e.next=4;break}return e.next=3,m.collection("directRooms").add({uids:[y,n]}).then((function(e){var t,a;m.collection("directRooms").doc(e.id).update({users:[null===R||void 0===R||null===(t=R.docs.find((function(e){return e.data().uid===y})))||void 0===t?void 0:t.data(),null===R||void 0===R||null===(a=R.docs.find((function(e){return e.data().uid===n})))||void 0===a?void 0:a.data()]})}));case 3:console.log("added!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return z(),function(){M(!1)}}),[x,g,U]);var A=Object(p.c)(T),q=Object(p.c)(G);return Object(c.useEffect)((function(){!function(e){var t=null===q||void 0===q?void 0:q.filter((function(t){return t!=e}));t.unshift(e),h(_({moves:t}))}(A||g)}),[A,x]),(null===O||void 0===O?void 0:O.includes(N.uid))||b||"CcfrQCURBPLWpn6lj0k8"===i?Object(K.jsxs)("div",{className:A===i||x===n?"sidebar__option-container active":"sidebar__option-container",tabIndex:"1",role:"button",onClick:i&&!b?function(){i&&(h(E({directMessageUid:null})),h(I({roomId:i})),m.collection("room").doc(i).update({usersHaveRead:j?j.concat(N.uid):[y]}))}:b?function(){M(!0),h(I({roomId:null})),(null===P||void 0===P?void 0:P.id)&&(h(E({directMessageUid:n,directMessageRoomId:null===P||void 0===P?void 0:P.id})),m.collection("directRooms").doc(P.id).update({usersHaveRead:W?W.concat(N.uid):[y]}))}:function(){},children:[t&&Object(K.jsx)("div",{className:"sidebar__icon",children:t}),t?Object(K.jsx)("div",{className:"sidebar__option__title",children:a}):Object(K.jsxs)("div",{className:"sidebar__option__channel",children:[b?s?Object(K.jsx)("img",{src:s,alt:"avatar"}):Object(K.jsx)("img",{src:"default-avatar.jpg",alt:"avatar"}):v?Object(K.jsx)(be.a,{}):Object(K.jsx)("span",{children:"#"}),Object(K.jsx)(de.a,{className:b?u?"status online":"status offline":"no-status"}),a||l]}),!((null===W||void 0===W?void 0:W.includes(y))||(null===j||void 0===j?void 0:j.includes(y)))&&!t&&Object(K.jsx)("span",{class:"position-absolute  translate-middle p-1 bg-danger border border-light rounded-circle unread-notification",children:Object(K.jsx)("span",{class:"visually-hidden",children:"New alerts"})})]}):Object(K.jsx)("div",{})},he=a(63),pe=a.n(he),fe=a(61),xe=a.n(fe),ge=a(62),Ne=a.n(ge),_e=a(48),ye=a.n(_e),we=a(64),Ce=a.n(we);var ke=function(e){var t=!1;return Object(K.jsxs)("div",{className:"collapse-container",children:[Object(K.jsxs)("div",{className:"sidebar__option-container",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.id),"aria-expanded":"true","aria-controls":"".concat(e.id),onClick:function(){t=!t},children:[Object(K.jsx)("div",{className:t&&"Channels"===e.title?"item-icon arrow-rotate":"item-icon",children:e.icon}),Object(K.jsx)("div",{className:"item-title",children:e.title})]}),e.addIcon&&Object(K.jsx)("div",{className:"add-channel-button",role:"button","data-bs-toggle":"modal","data-bs-target":"#createChannel",children:e.addIcon}),Object(K.jsx)("div",{className:"collapse",id:"".concat(e.id),children:e.options&&e.options.map((function(e){return e}))})]})},Ue=a(59),Se=a.n(Ue),Ie=a(60),Re=a.n(Ie);var Le=function(){return Object(K.jsx)("div",{children:Object(K.jsx)("div",{className:"dropdown general-dropdown",children:Object(K.jsxs)("div",{className:"side-bar__header ",children:[Object(K.jsx)("div",{className:"side-bar__header__button dropdown-toggle",id:"fetchGeneralInfo","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(K.jsx)("div",{className:"side-bar__header__info ",children:Object(K.jsxs)("button",{className:"side-bar__header__team-name c-button-unstyled",children:[Object(K.jsx)("span",{children:"Fetch"}),Object(K.jsx)(Se.a,{})]})})}),Object(K.jsx)("button",{className:"c-button-unstyled send-button",children:Object(K.jsx)(Re.a,{style:{height:16}})}),Object(K.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"fetchGeneralInfo",children:[Object(K.jsxs)("div",{"aria-hidden":"true",className:"c-menu_item__header",children:[Object(K.jsx)("div",{className:"server-logo",children:Object(K.jsx)("big",{children:Object(K.jsx)("strong",{children:"F"})})}),Object(K.jsx)("span",{children:"Fetch"})]}),Object(K.jsx)("div",{className:"dropdown-item",role:"button","data-bs-toggle":"modal","data-bs-target":"#createChannel",children:"Create channel"})]})]})})})};a(50);var De=function(){return Object(K.jsx)("div",{className:"loader"})};var Me=function(e){var t=e.width,a=Object(f.a)(m.collection("room")),s=Object(o.a)(a,3),n=s[0],i=s[1],l=(s[2],Object(p.c)(F),Object(f.a)(m.collection("users"))),d=Object(o.a)(l,3),r=d[0],u=d[1],b=(d[2],Object(f.a)(m.collection("directRooms"))),j=(Object(o.a)(b,1)[0],[]);null===n||void 0===n||n.docs.map((function(e){return j.push(Object(K.jsx)(Oe,{title:e.data().name,id:e.id,isPrivate:e.data().isPrivate,usersHaveReadRoom:e.data().usersHaveRead,members:e.data().members},e.id))}));var v,O,h=[];null===r||void 0===r||r.docs.map((function(e){return h.push(Object(K.jsx)(Oe,{title:e.data().displayName,email:e.data().email,uid:e.data().uid,photoURL:e.data().photoURL,isOnline:e.data().isOnline,isUser:!0},e.id))}));var x=Object(p.c)(q);return Object(c.useEffect)((function(){var e=document.querySelector(".chat-container"),t=document.querySelector(".side-bar-container"),a=document.querySelector(".sidebar-toggle-button.c-button-unstyled"),c=function(){v=window.innerWidth,O=e.offsetWidth,v<706&&v>=576?(null===t||void 0===t||t.classList.add("sidebar-collapse"),null===a||void 0===a||a.classList.remove("collapse"),console.log("first condition"),null===e||void 0===e||e.classList.remove("collapse")):v<576&&x?null===e||void 0===e||e.classList.add("collapse"):v<576||O<400?(null===t||void 0===t||t.classList.add("sidebar-collapse"),null===a||void 0===a||a.classList.remove("collapse"),null===e||void 0===e||e.classList.remove("collapse")):(null===e||void 0===e||e.classList.remove("collapse"),null===a||void 0===a||a.classList.add("collapse"),null===t||void 0===t||t.classList.remove("sidebar-collapse"),null===t||void 0===t||t.classList.remove("sidebar-float"))};c(),window.addEventListener("resize",c)})),Object(c.useEffect)((function(){var e=document.querySelector(".sidebar-collapse"),t=document.querySelector(".chat-container"),a=document.querySelector(".secondary-view-container"),c=function(){null===e||void 0===e||e.classList.remove("sidebar-float")};null===t||void 0===t||t.addEventListener("click",c),null===a||void 0===a||a.addEventListener("click",c)})),Object(K.jsx)("div",{className:"side-bar-container",style:{width:t},children:i&&u?Object(K.jsx)(De,{}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Le,{}),Object(K.jsx)(ke,{options:[Object(K.jsx)(Oe,{title:"All Unreads",icon:Object(K.jsx)(xe.a,{}),isDropdown:!0}),Object(K.jsx)(Oe,{title:"Mentions & reactions",icon:Object(K.jsx)(Ne.a,{}),isDropdown:!0})],id:"browseslack",title:"Browse Slack",icon:Object(K.jsx)(pe.a,{})}),Object(K.jsx)(ke,{title:"Channels",icon:Object(K.jsx)(ye.a,{}),id:"channels",addIcon:Object(K.jsx)(Ce.a,{}),options:j}),Object(K.jsx)(ke,{title:"Direct Message",icon:Object(K.jsx)(ye.a,{}),id:"directmessage",options:h})]})})},Ee=(a(100),a(101),a(122),a(65)),Pe=a.n(Ee);var Te=function(e){var t,a=e.channelName,s=e.channelId,n=e.chatRef,i=e.isDirect,l=Object(p.c)(F),d=Object(c.useState)(""),r=Object(o.a)(d,2),b=r[0],j=r[1];return null===n||void 0===n||null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}),Object(K.jsx)("div",{className:"chat-input-container",children:Object(K.jsxs)("form",{children:[Object(K.jsx)("input",{value:b,type:"text",onChange:function(e){j(e.target.value)},placeholder:"Message #".concat(a)}),Object(K.jsx)("button",{onClick:function(e){return function(e){if(e.preventDefault(),""!=b){if(!s)return!1;i?(m.collection("directRooms").doc(s).collection("messages").add({message:b,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid}),m.collection("directRooms").doc(s).update({usersHaveRead:[l.uid]})):(m.collection("room").doc(s).collection("messages").add({message:b,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:l.displayName,userImage:l.photoURL,uid:l.uid}),m.collection("room").doc(s).update({usersHaveRead:[l.uid]})),j("")}}(e)},type:"submit",className:"c-button-unstyled send-button",children:Object(K.jsx)(Pe.a,{})})]})})};var Fe=function(e){var t=e.loading,a=Object(p.b)(),s=Object(p.c)(F),n=Object(p.c)(B),i=null===n||void 0===n?void 0:n.photoURL,o=null===n||void 0===n?void 0:n.displayName,l=null===n||void 0===n?void 0:n.uid,d=(null===n||void 0===n||n.email,null===n||void 0===n?void 0:n.isOnline),r=function(){a(S({isShowingSecondaryWorkspace:!0}))},u=Object(p.c)(Y),b=function(){var e=new Date,t=e.getHours(),c=e.getMinutes();c<10&&(c="0"+c),a(k({localTime:t+":"+c+" "}))};return Object(c.useEffect)((function(){setInterval(b,1e3)}),[u]),Object(K.jsx)("div",{id:"profileModal",className:"modal","aria-hidden":"true",tabIndex:"-1","aria-labelledby":"profileModal",children:Object(K.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(K.jsx)("div",{className:"modal-content profile-card",children:t?Object(K.jsx)(De,{}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{className:"profile-card__header",children:Object(K.jsx)("div",{role:"button","data-bs-dismiss":"modal",onClick:r,className:"profile-card__picture",style:{backgroundImage:"url(".concat(i,")")}})}),Object(K.jsxs)("div",{className:"profile-card__name",children:[Object(K.jsx)("div",{className:"profile-card__name__title",role:"button",onClick:r,"data-bs-dismiss":"modal",children:o}),Object(K.jsx)("div",{className:d?"profile-card__name__status online":"profile-card__name__status",children:Object(K.jsx)(de.a,{className:"status"})})]}),Object(K.jsx)("div",{className:"profile-card__link",role:"button",onClick:r,"data-bs-dismiss":"modal","data-bs-target":".editChat",children:"View full profile"}),Object(K.jsxs)("div",{className:"profile-card__time-field",children:[Object(K.jsx)("div",{className:"profile-card__time-field__label",children:"Local time"}),Object(K.jsx)("div",{className:"profile-card__time-field__value",children:u})]}),Object(K.jsxs)("div",{className:"profile-card__buttons",children:[Object(K.jsx)("button",{className:"c-button--medium c-button",onClick:function(){console.log("?"),a(E({directMessageUid:l}))},"data-bs-dismiss":"modal",children:"Message"}),(null===s||void 0===s?void 0:s.uid)===l&&Object(K.jsx)("button",{className:"c-button--medium c-button","data-bs-toggle":"modal","data-bs-dismiss":"modal","data-bs-target":"#editProfile",children:"Edit Profile"})]})]})})})})};var We=function(e){var t=e.userName,a=e.userImage,s=e.message,n=e.timestamp,i=e.uid,l=e.description,d=Object(p.c)(F),r=(null===d||void 0===d?void 0:d.uid)===i?"You":t,u=Object(c.useState)(!1),b=Object(o.a)(u,2),j=b[0],v=b[1],O=(Object(p.c)(T),Object(f.a)(m.collection("users"))),h=Object(o.a)(O,2),x=h[0],g=h[1],N=Object(p.c)(A),_=null===x||void 0===x?void 0:x.docs.find((function(e){return e.data().uid===N})),y=(null===_||void 0===_?void 0:_.data().photoURL)?_.data().photoURL:"default-avatar.jpg",w=null===_||void 0===_?void 0:_.data().isOnline,C=new Date(null===n||void 0===n?void 0:n.toDate()),k=(C.getDate(),C.getMonth(),C.getHours()),S=C.getMinutes();S<10&&(S="0"+S);var I=k+":"+S+" ",R=Object(p.b)(),L=function(){g||(R(P({userUid:i})),console.log("dispatched"))};Object(c.useEffect)((function(){R(U({selectedUser:{displayName:null===_||void 0===_?void 0:_.data().displayName,email:null===_||void 0===_?void 0:_.data().email,uid:N,photoURL:y,isOnline:w,whatIDo:null===_||void 0===_?void 0:_.data().whatIDo}}))}),[g,N,d]);var D=function(){};return Object(K.jsx)("div",{className:j?"message-container active":"message-container",onMouseOver:function(){v(!0)},onMouseOut:function(){v(!1)},children:(n||l)&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{style:{backgroundImage:"url(".concat(a,")")},alt:"",role:"button",onClick:i?L:D,"data-bs-toggle":i?"modal":"false","data-bs-target":"#profileModal",className:"message__avatar"}),Object(K.jsxs)("div",{className:"message__info",children:[Object(K.jsxs)("div",{className:"status",children:[Object(K.jsx)("a",{role:"button",onClick:i?L:D,"data-bs-toggle":i?"modal":"false","data-bs-target":"#profileModal",children:l?t:r})," ",Object(K.jsx)("span",{children:l?"":I})]}),Object(K.jsx)("p",{className:"message",children:s})]})]})})};var ze=function(e){var t=e.time,a=e.messages,c=e.uid,s=e.timestamp;return Object(K.jsxs)("div",{className:"day-block-messages__container",children:[(s||!c)&&Object(K.jsxs)("div",{className:"day-block-messages__divider",children:[Object(K.jsx)("div",{className:"day-block-messages__divider-line"}),Object(K.jsx)("div",{className:"day-block-messages__label",children:t.date+"/"+t.month+"/"+t.year})]}),null===a||void 0===a?void 0:a.map((function(e){return e}))]})},Ve=a(66),Ae=a.n(Ve);var qe=function(){var e,t,a,s,n,i,l,d,r,b,j,v,O=Object(p.b)(),h=Object(c.useRef)(null),x=Object(p.c)(F),g=Object(p.c)(T),N=Object(p.c)(V);g||N||O(I({roomId:"CcfrQCURBPLWpn6lj0k8"}));var _=Object(f.a)(g&&m.collection("room").doc(g)),y=Object(o.a)(_,2),k=y[0],U=y[1],S=Object(f.a)(g&&m.collection("room").doc(g).collection("messages").orderBy("timestamp","asc")),R=Object(o.a)(S,2),L=R[0],D=R[1],M=Object(p.c)(H),E=Object(f.a)(m.collection("users")),P=Object(o.a)(E,2),W=P[0],z=P[1],A=null===W||void 0===W?void 0:W.docs.find((function(e){return e.data().uid===N})),q=Object(f.a)(M&&m.collection("directRooms").doc(M).collection("messages").orderBy("timestamp","asc")),B=Object(o.a)(q,2),Y=B[0],Q=B[1],X=(null===A||void 0===A||null===(e=A.data())||void 0===e?void 0:e.displayName)?null===A||void 0===A?void 0:A.data().displayName:null===A||void 0===A?void 0:A.data().email,G=null===A||void 0===A||null===(t=A.data())||void 0===t?void 0:t.photoURL,J=null===A||void 0===A||null===(a=A.data())||void 0===a?void 0:a.isOnline;Object(c.useEffect)((function(){var e;null===h||void 0===h||null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[g,D,Q]);var Z={};g?null===L||void 0===L||L.docs.map((function(e){var t=e.data(),a=t.message,c=t.timestamp,s=t.user,n=t.userImage,i=t.uid,o=new Date(null===c||void 0===c?void 0:c.toDate()),l=o.getDate(),d=o.getFullYear(),r=o.getMonth(),u=l+":"+r+":"+d,b=(o.getHours(),o.getMinutes());b<10&&(b="0"+b),Z[u]||(Z[u]=[]),Z[u].time||(Z[u].time={date:l,year:d,month:r}),Z[u].timestamp=c,Z[u].push(Object(K.jsx)(We,{message:a,timestamp:c,userName:s,userImage:n,uid:i,isDirect:!1},e.id))})):null===Y||void 0===Y||Y.docs.map((function(e){var t=e.data(),a=t.message,c=t.timestamp,s=t.user,n=t.userImage,i=t.uid,o=new Date(null===c||void 0===c?void 0:c.toDate()),l=o.getDate(),d=o.getFullYear(),r=o.getMonth(),u=l+":"+r+":"+d,b=(o.getHours(),o.getMinutes());b<10&&(b="0"+b),Z[u]||(Z[u]=[]),Z[u].time||(Z[u].time={date:l,year:d,month:r}),Z[u].timestamp=c,Z[u].push(Object(K.jsx)(We,{message:a,timestamp:c,userName:s,userImage:n,uid:i,isDirect:!0},e.id))}));var $=Object.entries(Z);Object(c.useEffect)((function(){U||O(C({roomDetails:null===k||void 0===k?void 0:k.data()}))}),[g,k]),Object(c.useEffect)((function(){z||O(w({directUser:null===A||void 0===A?void 0:A.data()}))}),[M]);var ee=null===k||void 0===k||null===(s=k.data())||void 0===s?void 0:s.members,te=(null===ee||void 0===ee||ee.slice(),Object(c.useState)(!1)),ae=Object(o.a)(te,2),ce=ae[0],se=ae[1];return Object(c.useEffect)((function(){if(ce&&!U){var e=null===ee||void 0===ee?void 0:ee.slice();e||(e=[]),e.push(x.uid),console.log(e),m.collection("room").doc(g).update({members:e}).then((function(){var e="joined #".concat(k.data().name,".");m.collection("room").doc(g).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:x.displayName,userImage:x.photoURL,uid:x.uid})}))}return function(){se(!1)}}),[ce,U]),Object(K.jsx)("div",{className:"chat-container",children:D||Q||z?Object(K.jsx)(De,{}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"chat__header",children:[Object(K.jsxs)("div",{className:"chat__header__left",children:[Object(K.jsx)("div",{onClick:function(){var e=document.querySelector(".side-bar-container");null===e||void 0===e||e.classList.add("sidebar-float")},className:"sidebar-toggle-button c-button-unstyled chat__header__left__button",children:Object(K.jsx)("span",{children:Object(K.jsx)(Ae.a,{})})}),g?Object(K.jsx)("div",{role:"button","data-bs-toggle":"modal","data-bs-target":"#a"+g,className:"chat__header__left__button",children:Object(K.jsxs)("span",{children:["#",null===k||void 0===k||null===(n=k.data())||void 0===n?void 0:n.name]})}):Object(K.jsxs)("div",{role:"button","data-bs-toggle":"modal","data-bs-target":"#a"+M,className:"chat__header__left__button",children:[Object(K.jsx)("div",{className:"chat__header__avatar",style:{backgroundImage:"url(".concat(G,")")},children:Object(K.jsx)(de.a,{className:J?"status active":"status"})}),Object(K.jsx)("span",{children:X})]})]}),Object(K.jsx)("div",{className:"chat__header__right","data-bs-toggle":g?"modal":"","data-bs-target":g?"#a"+g:"",children:Object(K.jsx)("span",{role:"button",children:"Details"})})]}),Object(K.jsxs)("div",{className:"chat-messages",children:[Object(K.jsx)(We,{userImage:"https://icon-library.com/images/comment-bubble-icon-png/comment-bubble-icon-png-3.jpg",userName:g?((null===k||void 0===k||null===(i=k.data())||void 0===i?void 0:i.roomOwner)?null===k||void 0===k||null===(l=k.data())||void 0===l?void 0:l.roomOwner.displayName:"...")+" founded the #".concat(null===k||void 0===k||null===(d=k.data())||void 0===d?void 0:d.name," channel,"):"This conversation is just between the two of you",message:g?(null===k||void 0===k||null===(r=k.data())||void 0===r?void 0:r.des)?null===k||void 0===k||null===(b=k.data())||void 0===b?void 0:b.des:"":"Here you can send messages and share files with @".concat(null===A||void 0===A?void 0:A.data().displayName,"."),description:!0}),null===$||void 0===$?void 0:$.map((function(e){var t,a=e[1].time,c=e[1].timestamp,s=null===(t=e[1][0])||void 0===t?void 0:t.props.uid;return Object(K.jsx)(ze,{uid:s,loading:Q||D,time:a,messages:e[1],timestamp:c},a.date+a.month+a.year)})),Object(K.jsx)("div",{className:"chat-bottom",ref:h})]}),Object(K.jsxs)("div",{className:"chat__footer",children:[(null===ee||void 0===ee?void 0:ee.includes(x.uid))&&g||!g?Object(K.jsx)(Te,{chatRef:h,channelId:g||M,channelName:g?null===k||void 0===k||null===(j=k.data())||void 0===j?void 0:j.name:X,isDirect:!g}):Object(K.jsxs)("div",{className:"chat__input-preview",children:[Object(K.jsxs)("div",{className:"text--normal",children:["You are viewing ",Object(K.jsxs)("strong",{children:["#",null===k||void 0===k||null===(v=k.data())||void 0===v?void 0:v.name]})]}),Object(K.jsxs)("div",{className:"buttons-group",children:[Object(K.jsx)("button",{className:"btn btn-primary",onClick:function(){se(!0)},children:"Join chat"}),Object(K.jsx)("button",{className:"btn btn-secondary","data-bs-toggle":"modal","data-bs-target":"#a"+g,children:"See more details"})]})]}),Object(K.jsx)("div",{className:"space"})]})]})})};var He=function(){var e=Object(h.a)(v),t=Object(o.a)(e,2),a=(t[0],t[1]),s=Object(c.useState)(!1),n=Object(o.a)(s,2),i=n[0],l=n[1];function d(){setTimeout((function(){l(!i)}),1e3)}return Object(c.useEffect)((function(){return d(),function(){}}),[a]),d(),Object(K.jsxs)("div",{className:"loading-container",children:[Object(K.jsxs)("div",{className:"loading__content",children:[Object(K.jsx)("h1",{children:"Loading"}),Object(K.jsxs)("div",{className:"dots",children:[Object(K.jsx)("div",{className:i?"dot z animate":"dot z"}),Object(K.jsx)("div",{className:i?"dot f animate":"dot f"}),Object(K.jsx)("div",{className:i?"dot s animate":"dot s"}),Object(K.jsx)("div",{className:i?"dot t animate":"dot t"}),Object(K.jsx)("div",{className:i?"dot l animate":"dot l"})]})]}),Object(K.jsx)("script",{})]})};a(123);var Be=function(e){var t,a=Object(p.c)(F),s="displayName"===e.name?(null===a||void 0===a?void 0:a.displayName)?a.displayName:"":"whatIDo"===e.name&&(null===a||void 0===a?void 0:a.whatIDo)?a.whatIDo:"",n=Object(c.useState)(s),i=Object(o.a)(n,2),l=i[0],u=i[1],b=Object(c.useState)(null===a||void 0===a?void 0:a.photoURL),v=Object(o.a)(b,2),O=v[0],h=v[1],x=Object(p.b)(),g=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return c=j.ref(),s=c.child(a.name),e.next=7,s.put(a);case 7:return e.t0=h,e.next=10,s.getDownloadURL();case 10:e.t1=e.sent,(0,e.t0)(e.t1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=Object(f.a)(m.collection("users")),_=Object(o.a)(N,2),y=_[0],w=_[1],C=null===y||void 0===y?void 0:y.docs.find((function(e){return e.data().uid===(null===a||void 0===a?void 0:a.uid)})),k=null===C||void 0===C?void 0:C.id,U=function(){var t=Object(r.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=m.collection("users"),w||!k||!a){t.next=18;break}if(!e.saveChange){t.next=18;break}if("photo"!==e.type){t.next=8;break}return t.next=6,a.doc(k).update({photoURL:O}).catch((function(e){return alert(e.message)}));case 6:t.next=17;break;case 8:if("text"!==e.type){t.next=17;break}if("displayName"!==e.name){t.next=14;break}return t.next=12,a.doc(k).update({displayName:l}).catch((function(e){return alert(e.message)}));case 12:t.next=17;break;case 14:if("whatIDo"!==e.name){t.next=17;break}return t.next=17,a.doc(k).update({whatIDo:l}).catch((function(e){return alert(e.message)}));case 17:x(M({dataUpdated:!0}));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){return U(),function(){x(M({dataUpdated:null}))}}),[e.toggle]),Object(K.jsxs)("div",{className:"input-container",children:[Object(K.jsx)("label",{htmlFor:"",className:"form-label",children:e.label}),"photo"===e.type?Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{src:O,alt:"",style:{width:"100%"}}),Object(K.jsx)("input",{ref:function(e){return t=e},type:"file",onChange:g,className:"photo-input"}),Object(K.jsxs)("span",{role:"button",className:"upload-button c-button--medium",onClick:function(){t.click()},children:["Upload an image"," "]})]}):Object(K.jsx)("input",{type:"text",className:"form-control",value:l,onChange:function(e){u(e.target.value)}})]})};var Ye=function(){var e=!0,t=Object(p.c)(F),a=Object(c.useState)(!1),s=Object(o.a)(a,2),n=s[0],i=s[1],l=Object(p.c)(z),u=Object(c.useState)(!1),b=Object(o.a)(u,2),j=b[0],v=b[1],O=Object(f.a)(m.collection("users")),h=Object(o.a)(O,2),x=h[0],g=(h[1],null===x||void 0===x?void 0:x.docs.find((function(e){return e.data().uid===(null===t||void 0===t?void 0:t.uid)}))),N=null===g||void 0===g?void 0:g.data(),_=Object(p.b)(),y=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N?(_(R({user:N})),console.log("dispatched "+N.whatIDo)):console.log("No dispatch");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){l&&y()}),[l]),Object(K.jsx)("div",{className:"modal fade",id:"editProfile",tabIndex:"-1","aria-labelledby":"editProfile","aria-hidden":"true",children:Object(K.jsx)("div",{className:"modal-dialog modal-dialog-scrollable c-modal-dialog modal-dialog-centered",children:Object(K.jsxs)("div",{className:"modal-content c-modal-content",children:[Object(K.jsxs)("div",{className:"c-modal__header",children:[Object(K.jsx)("div",{className:"c-modal__header__title",children:Object(K.jsx)("h1",{children:Object(K.jsx)("div",{className:"text",children:"Edit your propfile"})})}),!0===n&&Object(K.jsx)("div",{className:"notification badge bg-success",children:"Your info was successfully updated!"})]}),Object(K.jsx)("div",{className:"c-modal__body",children:Object(K.jsx)("div",{className:"c-modal__body__section",style:{width:700},children:Object(K.jsxs)("div",{className:"c-modal__body__columns",children:[Object(K.jsxs)("div",{className:"col-sm-8 c-input-field",children:[Object(K.jsx)(Be,{label:"Display name",name:"displayName",type:"text",saveChange:e,toggle:j}),Object(K.jsx)(Be,{label:"What I do",name:"whatIDo",type:"text",saveChange:e,toggle:j})]}),Object(K.jsx)("div",{className:"col-sm-4 c-profile-photo-field",children:Object(K.jsx)(Be,{label:"Profile photo",type:"photo",saveChange:e,toggle:j})})]})})}),Object(K.jsxs)("div",{className:"c-modal__footer",children:[Object(K.jsx)("button",{className:"btn btn-light cancel-button c-button--medium","data-bs-dismiss":"modal",children:"Cancel"}),Object(K.jsx)("button",{className:"btn btn-success save-button c-button--medium",onClick:function(e){e.preventDefault(),v(!j),i(!0),setTimeout((function(){i(!1)}),1e3)},children:"Save Changes"})]})]})})})};var Qe=function(e){return Object(K.jsx)("div",{className:"chat-side-bar-resizer resizer",onMouseDown:e.onMouseDown})};a(124);var Xe=function(e){var t=e.width,a=(e.resize,Object(p.c)(B)),c=null===a||void 0===a?void 0:a.photoURL,s=null===a||void 0===a?void 0:a.displayName,n=null===a||void 0===a?void 0:a.isOnline,i=Object(p.c)(q),o=Object(p.b)(),l=Object(p.c)(Y);return Object(K.jsxs)("div",{className:i?"secondary-view-container active":"secondary-view-container",style:{width:t},children:[Object(K.jsxs)("div",{className:"secondary-view__header",children:[Object(K.jsx)("div",{className:"secondary-view__header__left",children:Object(K.jsx)("span",{children:"Profile"})}),Object(K.jsx)("div",{className:"secondary-view__header__right",children:Object(K.jsx)("button",{className:"c-button-unstyled",onClick:function(){o(S({isShowingSecondaryWorkspace:!1})),console.log("close")},children:"X"})})]}),Object(K.jsxs)("div",{className:"secondary-view__body",children:[Object(K.jsx)("div",{className:"member-profile__avatar-container",children:Object(K.jsx)("img",{src:c,alt:""})}),Object(K.jsxs)("div",{className:"member-profile__name",children:[Object(K.jsx)("div",{className:"member-profile__name-title",children:s}),Object(K.jsx)("div",{className:"member-profile__status",children:Object(K.jsx)(de.a,{className:n?"status online":"status offline"})})]}),Object(K.jsxs)("div",{className:"member-profile__fields",children:[Object(K.jsxs)("div",{className:"member-profile__field",children:[Object(K.jsx)("div",{className:"member-profile__field__label",children:"Display name"}),Object(K.jsx)("div",{className:"member-profile__field__value",children:null===a||void 0===a?void 0:a.displayName})]}),Object(K.jsxs)("div",{className:"member-profile__field",children:[Object(K.jsx)("div",{className:"member-profile__field__label",children:"What I do"}),Object(K.jsx)("div",{className:"member-profile__field__value",children:null===a||void 0===a?void 0:a.whatIDo})]}),Object(K.jsxs)("div",{className:"member-profile__field",children:[Object(K.jsx)("div",{className:"member-profile__field__label",children:"Local time"}),Object(K.jsx)("div",{className:"member-profile__field__value",children:l})]}),Object(K.jsxs)("div",{className:"member-profile__field",children:[Object(K.jsx)("div",{className:"member-profile__field__label",children:"Email address"}),Object(K.jsx)("div",{className:"member-profile__field__value",children:null===a||void 0===a?void 0:a.email})]})]})]})]})};a(125);var Ge=function(e){var t=e.fieldLabel,a=e.required,c=(e.hyphenized,e.onChange),s=e.value,n=e.disabled;return Object(K.jsxs)("div",{className:"input-field form-group",children:[Object(K.jsx)("label",{htmlFor:"name-input",className:"form-label",children:Object(K.jsx)("strong",{children:t})}),Object(K.jsx)("input",{disabled:n,value:s,onChange:c,type:"text",className:"form-control",required:a||""})]})},Je=a(67),Ke=a.n(Je);var Ze=function(e){var t=e.roomName,a=e.roomDes,s=e.roomOwner,n=e.id,i=e.isPrivate,l=e.roomMembers,d=Object(p.b)(),r=Object(c.useState)(t),b=Object(o.a)(r,2),j=b[0],v=b[1],O=Object(c.useState)(a||""),h=Object(o.a)(O,2),f=h[0],x=h[1];Object(c.useEffect)((function(){v(t),x(a||"")}),[t,a]);var g=Object(c.useState)(""),N=Object(o.a)(g,2),_=N[0],w=N[1],C=Object(c.useState)(!1),k=Object(o.a)(C,2),I=k[0],R=k[1],L=Object(p.c)(F),D=Object(c.useState)(!1),M=Object(o.a)(D,2),E=M[0],P=M[1],W=Object(c.useState)(!1),z=Object(o.a)(W,2),V=z[0],A=z[1],q=Object(c.useState)(!1),B=Object(o.a)(q,2),Q=(B[0],B[1],Object(p.c)(T)),G=null===l||void 0===l?void 0:l.slice(),J=null===G||void 0===G?void 0:G.indexOf(L.uid);null===G||void 0===G||G.splice(J,1),Object(c.useEffect)((function(){if(V){m.collection("room").doc(Q).update({members:G||[]}).then((function(){d(y({isModalOpen:!1}))})).catch((function(e){return E(e.message)}));var e="Leave #".concat(t,".");m.collection("room").doc(Q).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:L.displayName,userImage:L.photoURL,uid:L.uid})}}),[V]);var Z=Object(p.c)(H),$=Object(p.c)(X),ee=Object(p.c)(Y);return Object(K.jsxs)("div",{class:"tab-pane fade show active channel-details__about",id:"about",role:"tabpanel","aria-labelledby":"about-tab",children:[Z&&Object(K.jsx)(K.Fragment,{children:Object(K.jsx)("div",{className:"c-tab-group",children:Object(K.jsxs)("div",{className:"c-tab-group__inner",children:[Object(K.jsxs)("div",{className:"text-line",children:[Object(K.jsx)("div",{className:"text-line__icon",children:Object(K.jsx)(ae.a,{})}),Object(K.jsxs)("div",{className:"text-line__content",children:[ee," Local time"]})]}),Object(K.jsxs)("div",{className:"text-line",children:[Object(K.jsx)("div",{className:"text-line__icon",children:Object(K.jsx)(Ke.a,{})}),Object(K.jsx)("div",{className:"text-line__content",children:null===$||void 0===$?void 0:$.email})]}),Object(K.jsx)("button",{onClick:function(){d(S({isShowingSecondaryWorkspace:!0})),d(U({selectedUser:$}))},"data-bs-dismiss":"modal","data-bs-target":"a"+n,className:"c-button-unstyled",children:"View full profile"})]})})}),Q&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"input-group c-tab-group",children:[Object(K.jsx)(Ge,{fieldLabel:"Name",required:!0,hyphenized:!0,onChange:function(e){var t=e.target.value.replace(/\s/g,"-");v(t)},value:j,disabled:"CcfrQCURBPLWpn6lj0k8"===n}),Object(K.jsx)(Ge,{fieldLabel:"Description",onChange:function(e){var t=e.target.value;x(t)},value:f}),Object(K.jsx)("br",{}),Object(K.jsxs)("div",{className:"input-group__footer",children:[Object(K.jsx)("button",{className:"btn btn-success c-button--medium",onClick:function(){if(""===j)return w("Name must not be left empty!, try again"),R(!1),void v(t);m.collection("room").doc(n).update({name:j,des:f}).then((function(){R(!0),w("Channel was updated successfully!"),setTimeout((function(){w("")}),2e3)})).catch((function(e){return _(e.message)}))},children:"Save"}),I?Object(K.jsx)("div",{className:"notification badge bg-success",children:_}):Object(K.jsx)("div",{className:"notification badge bg-warning",children:_})]})]}),Object(K.jsxs)("div",{className:"text-group c-tab-group",children:[Object(K.jsxs)("div",{className:"text-field",children:[Object(K.jsx)("div",{className:"text-field__title",children:"Created by"}),Object(K.jsx)("div",{className:"text-field__content",children:s||"..."})]}),Object(K.jsx)("div",{className:"text-field leave-button",role:"button",children:Object(K.jsx)("div",{className:"text-field__title",onClick:function(){P(!0)},children:"Leave Channel"})})]})]}),E&&Object(K.jsxs)("div",{className:"c-tab-group alert",children:[Object(K.jsxs)("span",{children:["Do you want to leave channel?"," ",i&&Object(K.jsxs)(K.Fragment,{children:["This is a ",Object(K.jsx)("strong",{children:"private"})," channel so it cannot be accessed by outsiders."]})]}),Object(K.jsxs)("div",{className:"buttons-group",children:[Object(K.jsx)("button",{className:"btn btn-secondary",onClick:function(){P(!1)},children:"Cancel"}),Object(K.jsx)("button",{className:"btn btn-danger","data-bs-dismiss":"modal","data-bs-target":"a"+n,onClick:function(){A(!0),P(!1)},children:"Leave"})]})]})]})};var $e=function(e){var t=e.user,a=e.roomOwner,c=e.addUser,s=e.dropdownItem,n=e.filterText,i=Object(p.b)(),o=Object(p.c)(F),l=(null===t||void 0===t?void 0:t.photoURL)?t.photoURL:"default-avatar.jpg",d=(null===t||void 0===t?void 0:t.displayName)?t.displayName:t.email,r=null===t||void 0===t?void 0:t.isOnline;return-1!==d.toLowerCase().indexOf(n)||""===n?Object(K.jsx)("div",{className:"member",role:"button","data-bs-toggle":s?"false":"modal","data-bs-target":"#profileModal",onClick:s?function(){}:function(){i(U({selectedUser:t}))},children:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"member__info",children:[Object(K.jsx)("div",{className:"member__avatar",style:{backgroundImage:"url(".concat(l,")")}}),Object(K.jsx)("div",{className:"member__name",children:Object(K.jsxs)("strong",{children:[d," ",(null===t||void 0===t?void 0:t.uid)===o.uid?"(You)":""]})}),Object(K.jsx)("div",{className:"member__status",children:Object(K.jsx)(de.a,{className:r?"status active":"status"})})]}),(null===o||void 0===o?void 0:o.uid)===(null===a||void 0===a?void 0:a.uid)&&Object(K.jsx)("div",{className:"interact-button",children:Object(K.jsx)("span",{role:"button","data-bs-toggle":"modal","data-bs-target":"#removeAlertModal",children:Object(K.jsx)("strong",{children:"Remove"})})}),s&&Object(K.jsx)("div",{className:"interact-button",children:Object(K.jsx)("span",{role:"button",onClick:c,children:Object(K.jsx)("strong",{children:"Add"})})})]})}):Object(K.jsx)("div",{})},et=a(68),tt=a.n(et);var at=function(e){var t=e.roomMembers,a=e.roomOwner,s=e.id,n=Object(f.a)(m.collection("users")),i=Object(o.a)(n,2),l=i[0],d=(i[1],Object(p.c)(F)),r=[];null===l||void 0===l||l.docs.map((function(e){(null===t||void 0===t?void 0:t.includes(e.data().uid))&&r.push(e.data())}));var b=Object(c.useState)(!1),j=Object(o.a)(b,2),v=(j[0],j[1]),O=null===t||void 0===t?void 0:t.slice(),h=function(e){e&&t&&!O.includes(null===e||void 0===e?void 0:e.uid)&&(O.push(e.uid),m.collection("room").doc(s).update({members:O}).then((function(t){var a="is added by ".concat(null===d||void 0===d?void 0:d.displayName,".");m.collection("room").doc(s).collection("messages").add({message:a,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:e.displayName,userImage:e.photoURL,uid:e.uid}),v(!0)})))},x=Object(c.useState)(""),g=Object(o.a)(x,2),N=g[0],_=g[1],y=Object(c.useState)(""),w=Object(o.a)(y,2),C=w[0],k=w[1];return Object(K.jsxs)("div",{class:"tab-pane fade channel-details__members",id:"members",role:"tabpanel","aria-labelledby":"members-tab",children:[Object(K.jsx)("div",{className:"channel-details__members__header",children:Object(K.jsxs)("div",{className:"form-group",children:[Object(K.jsx)(se.a,{className:"search-icon"}),Object(K.jsx)("input",{onChange:function(e){_(e.target.value)},type:"text",className:"form-control",placeholder:"Find members",value:N})]})}),Object(K.jsxs)("div",{className:"channel-details__members__list",children:[Object(K.jsxs)("div",{className:"dropdown",children:[Object(K.jsx)("div",{className:"member dropdown-toggle",role:"button","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false",id:"addUsers",children:Object(K.jsxs)("div",{className:"member__info",children:[Object(K.jsx)("div",{className:"member__avatar",children:Object(K.jsx)(tt.a,{})}),Object(K.jsx)("div",{className:"member__name",children:Object(K.jsx)("strong",{children:"Add people"})})]})}),Object(K.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"addUsers",style:{maxHeight:300,maxWidth:"100%",width:"100%"},children:[Object(K.jsxs)("div",{className:"form-group",style:{padding:"10px 25px"},children:[Object(K.jsx)("label",{htmlFor:"",className:"form-label",children:"Find user"}),Object(K.jsx)("input",{onChange:function(e){k(e.target.value)},type:"text",className:"form-control"})]}),Object(K.jsx)("button",{className:"c-button-unstyled c-button--medium c-button",style:{marginLeft:25},onClick:function(){l&&t&&(null===l||void 0===l||l.docs.map((function(e){h(e.data())})))},role:"button",children:Object(K.jsx)("strong",{children:"Add all user"})}),null===l||void 0===l?void 0:l.docs.map((function(e){var t=e.data();if(!r.find((function(e){return e.uid===t.uid})))return Object(K.jsx)($e,{filterText:C.toLowerCase(),user:t,className:"dropdown-item",dropdownItem:!0,addUser:function(){return h(t)}})}))]})]}),r.map((function(e){return Object(K.jsx)($e,{filterText:N.toLowerCase(),user:e,roomOwner:a})}))]})]})},ct=a(31),st=a.n(ct);var nt=function(e){var t=e.uid,a=Object(p.c)(F),s=Object(p.c)(Q),n=Object(p.c)(B),i=Object(p.c)(T),l=null===s||void 0===s?void 0:s.members,d=null===l||void 0===l?void 0:l.slice(),r=Object(f.a)(m.collection("users")),b=Object(o.a)(r,2),j=b[0],v=(b[1],null===j||void 0===j?void 0:j.docs.find((function(e){return e.data().uid===t}))),O=(null===v||void 0===v?void 0:v.data().displayName)?null===v||void 0===v?void 0:v.data().displayName:null===v||void 0===v?void 0:v.data().email,h=Object(c.useState)(!0),x=Object(o.a)(h,2),g=x[0],N=x[1];return Object(c.useEffect)((function(){return function(){N(!0)}}),[g]),Object(K.jsx)("div",{className:"modal fade",id:"removeAlertModal",tabIndex:"-1","aria-hidden":"true",children:Object(K.jsx)("div",{className:"modal-dialog",children:Object(K.jsxs)("div",{className:"modal-content remove-alert-modal",children:[Object(K.jsx)("div",{className:"c-modal__header",children:Object(K.jsx)("h1",{children:"Remove member"})}),Object(K.jsxs)("div",{className:"c-modal__content",children:["Are you sure you want to remove ",O," from #",null===s||void 0===s?void 0:s.name]}),Object(K.jsx)("div",{className:"c-modal__footer",children:Object(K.jsxs)("div",{className:"footer__buttons",children:[Object(K.jsx)("button",{className:"c-button-unstyled c-button--medium","data-bs-dismiss":"modal",children:"Cancel"}),Object(K.jsx)("button",{className:"c-button-unstyled c-button--medium danger","data-bs-dismiss":"modal",onClick:function(){var e=l.indexOf(n.uid);-1!==e&&(null===d||void 0===d||d.splice(e,1),m.collection("room").doc(i).update({members:d}).then((function(){N(!0);var e="was removed by ".concat(null===a||void 0===a?void 0:a.displayName,".");m.collection("room").doc(i).collection("messages").add({message:e,timestamp:u.a.firestore.FieldValue.serverTimestamp(),user:null===v||void 0===v?void 0:v.data().displayName,userImage:null===v||void 0===v?void 0:v.data().photoURL,uid:null===v||void 0===v?void 0:v.data().uid})})))},children:"Remove"})]})})]})})})},it=a(70),ot=a.n(it),lt=a(69),dt=a.n(lt);var rt=function(){var e,t,a=Object(p.c)(T),s=Object(f.a)(a&&m.collection("room").doc(a)),n=Object(o.a)(s,2),i=n[0],l=(n[1],Object(c.useState)(!1)),d=Object(o.a)(l,2),r=d[0],u=d[1],b=Object(c.useState)(!1),j=Object(o.a)(b,2),v=j[0],O=j[1],h=null===i||void 0===i||null===(e=i.data())||void 0===e?void 0:e.isPrivate,x=Object(c.useState)(""),g=Object(o.a)(x,2),N=(g[0],g[1]),_="CcfrQCURBPLWpn6lj0k8",w=Object(p.b)();return Object(c.useEffect)((function(){return r&&m.collection("room").doc(a).update({isPrivate:!h}).then((function(){N("<strong>public</strong>")})).catch((function(e){return alert(e.message)})),function(){u(!1)}}),[r]),console.log("Delete channel: "+v),Object(c.useEffect)((function(){return v&&m.collection("room").doc(a).delete().then((function(){w(y({isModalOpen:!1})),w(I({roomId:_}))})).catch((function(e){return alert(e.message)})),function(){O(!1)}}),[v]),a!==_?Object(K.jsxs)("div",{class:"tab-pane fade channel-details__setting",id:"setting",role:"tabpanel","aria-labelledby":"setting-tab",children:[Object(K.jsx)("div",{className:"c-tab-group",role:"button",onClick:function(){u(!0)},children:(null===i||void 0===i||null===(t=i.data())||void 0===t?void 0:t.isPrivate)?Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(dt.a,{}),Object(K.jsx)("span",{children:"Change to public channel"})]}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(be.a,{className:"type-icon"}),Object(K.jsx)("span",{children:"Change to private channel"})]})}),Object(K.jsx)("hr",{}),Object(K.jsxs)("div",{className:"c-tab-group button-delete","data-bs-dismiss":"modal","data-bs-target":"#removeAlertModal",role:"button",onClick:function(){O(!0)},children:[Object(K.jsx)(ot.a,{className:"type-icon"}),Object(K.jsx)("span",{children:"Delete this channel"})]})]}):Object(K.jsx)("div",{class:"tab-pane fade channel-details__setting",id:"setting",role:"tabpanel","aria-labelledby":"setting-tab",children:Object(K.jsx)("div",{className:"c-tab-group",children:"This is the general room of the server so it cannot be modified"})})};var ut=function(e){var t,a=e.id,c=e.roomDetails,s=e.directUser,n=e.onClick,i=Object(p.c)(V),o=Object(p.c)(T),l=null===c||void 0===c?void 0:c.name,d=null===c||void 0===c?void 0:c.members,r=null===c||void 0===c?void 0:c.des,u=null===c||void 0===c||null===(t=c.roomOwner)||void 0===t?void 0:t.displayName,b=null===c||void 0===c?void 0:c.roomOwner,j=null===c||void 0===c?void 0:c.isPrivate,m=(null===s||void 0===s?void 0:s.displayName)?s.displayName:null===s||void 0===s?void 0:s.email,v=(null===s||void 0===s?void 0:s.photoURL)?s.photoURL:"default-avatar.jpg";return Object(K.jsx)("div",{className:"modal fade editChat",id:"a"+a,tabIndex:"-1","aria-hidden":"true",children:Object(K.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:Object(K.jsxs)("div",{className:"modal-content chat-details-modal",children:[Object(K.jsxs)("div",{className:"modal-header chat-details-modal__header c-modal__header",children:[Object(K.jsxs)("div",{className:"user-display",children:[!o&&Object(K.jsx)("div",{className:"user__avatar",style:{backgroundImage:"url(".concat(v,")")}}),Object(K.jsx)("h1",{children:o?l:m})]}),Object(K.jsxs)("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(K.jsx)("li",{class:"nav-item",role:"presentation",children:Object(K.jsx)("span",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#about",type:"button",role:"tab","aria-controls":"about","aria-selected":"true",children:"About"})}),!i&&Object(K.jsx)("li",{class:"nav-item",role:"presentation",children:Object(K.jsx)("span",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#members",type:"button",role:"tab","aria-controls":"members","aria-selected":"false",children:"Members"})}),!i&&Object(K.jsx)("li",{class:"nav-item",role:"presentation",children:Object(K.jsx)("span",{class:"nav-link",id:"contact-tab","data-bs-toggle":"tab","data-bs-target":"#setting",type:"button",role:"tab","aria-controls":"setting","aria-selected":"false",children:"Setting"})})]})]}),Object(K.jsx)("div",{className:"modal-body chat-details-modal__tabs c-modal__content",children:Object(K.jsx)("div",{className:"c-modal__content__inner",children:Object(K.jsxs)("div",{class:"tab-content",id:"myTabContent",children:[Object(K.jsx)(Ze,{roomName:l,roomDes:r,roomOwner:u,id:a,isPrivate:j,roomMembers:d}),!i&&Object(K.jsx)(at,{onClick:n,roomMembers:null===c||void 0===c?void 0:c.members,roomOwner:b,id:a}),!i&&Object(K.jsx)(rt,{})]})})}),Object(K.jsx)("div",{className:"modal-footer"})]})})})};a(126);var bt=function(){var e=Object(p.c)(F),t=Object(f.a)(m.collection("users")),a=Object(o.a)(t,2),s=a[0],n=a[1],i=Object(f.a)(m.collection("room")),l=Object(o.a)(i,2),u=l[0],b=l[1],j=[];null===s||void 0===s||s.docs.map((function(e){return j.push(e.data().uid)}));var v=Object(c.useState)(!1),O=Object(o.a)(v,2),h=O[0],x=O[1],g=Object(c.useState)(!1),N=Object(o.a)(g,2),_=N[0],y=N[1],w=Object(c.useState)(""),C=Object(o.a)(w,2),k=C[0],U=C[1],S=Object(c.useState)(""),I=Object(o.a)(S,2),R=I[0],L=I[1],D=Object(c.useState)(""),M=Object(o.a)(D,2),E=M[0],P=M[1],T=Object(c.useState)(!1),W=Object(o.a)(T,2),z=W[0],V=W[1],A=Object(c.useState)(!1),q=Object(o.a)(A,2),H=q[0],B=q[1],Y=function(){var t=Object(r.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}if(""!==k){t.next=4;break}return P("Please enter the channel name"),t.abrupt("return");case 4:H?P("Channel exist!"):m.collection("room").add({name:k,des:R,isPrivate:_,members:_?[e.uid]:j,roomOwner:e}).then((function(e){P("Room was created successfully"),V(!0)})).catch((function(e){P(e.message),V(!1)})),setTimeout((function(){return P("")}),3e3);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(!b){var e,t=null===u||void 0===u||null===(e=u.docs)||void 0===e?void 0:e.find((function(e){return e.data().name===k}));console.log(t),t&&B(!0)}return h&&Y(),function(){h&&(U(""),L("")),B(!1),x(!1)}}),[b,k,h]),Object(K.jsx)("div",{className:"modal fade",id:"createChannel",tabIndex:"-1","aria-hidden":"true",children:Object(K.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",children:Object(K.jsx)("div",{className:"modal-content create-channel",children:n?Object(K.jsx)(De,{}):Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("div",{className:"create-channel__header c-modal__header",children:Object(K.jsx)("h1",{children:"Create a channel"})}),Object(K.jsxs)("div",{className:"create-channel__body",children:[Object(K.jsx)("div",{className:"overview c-gray-text",children:"Channels are where your team communicates. They\u2019re best when organized around a topic \u2014 #marketing, for example."}),Object(K.jsx)("br",{}),Object(K.jsx)(Ge,{fieldLabel:"Name",required:!0,hyphenized:!0,toggle:h,onChange:function(e){var t=e.target.value.replace(/\s/g,"-");U(t)},value:k}),Object(K.jsx)(Ge,{fieldLabel:"Description",toggle:h,onChange:function(e){var t=e.target.value;L(t)},value:R}),Object(K.jsx)("div",{className:"c-gray-text",children:Object(K.jsx)("small",{children:"What is this channel about(optional)"})}),Object(K.jsx)("br",{}),Object(K.jsxs)("div",{className:"channel-type form-check form-switch",children:[Object(K.jsxs)("label",{htmlFor:"switch-button",className:"channel-type-des form-check-label",children:[Object(K.jsx)("div",{className:"channel-type-des__title",children:Object(K.jsx)("strong",{children:"Make private"})}),Object(K.jsxs)("div",{className:"channel-type-des__body c-gray-text",children:[_&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("strong",{children:"Private Channel cannot be accessed from outsiders"}),"."]}),!_&&"When a channel is set to private, it can only be viewed or joined by invitation."]})]}),Object(K.jsx)("div",{className:"switch-button",children:Object(K.jsx)("input",{type:"checkbox",name:"switch-button",role:"switch",className:"form-check-input",id:"switch-button",onChange:function(){y(!_)}})})]})]}),Object(K.jsx)("br",{}),Object(K.jsxs)("div",{className:"create-channel__footer",children:[Object(K.jsx)("button",{className:"btn btn-success c-button--medium",onClick:function(){x(!0)},children:"Create"}),z?Object(K.jsx)("div",{className:"notification badge bg-success",children:E}):Object(K.jsx)("div",{className:"notification badge bg-warning",children:E})]})]})})})})};a(127);var jt=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(""),i=Object(o.a)(n,2),l=i[0],u=i[1],b=Object(c.useState)(""),O=Object(o.a)(b,2),h=O[0],f=O[1],x=Object(c.useState)(!1),g=Object(o.a)(x,2),N=g[0],_=g[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),C=w[0],k=w[1],U=Object(c.useState)(""),S=Object(o.a)(U,2),I=S[0],L=S[1],M=function(){var e=Object(r.a)(d.a.mark((function e(t){var a,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files[0]){e.next=3;break}return e.abrupt("return");case 3:return c=j.ref(),s=c.child(a.name),_(!0),e.next=8,s.put(a);case 8:return e.t0=f,e.next=11,s.getDownloadURL();case 11:e.t1=e.sent,(0,e.t0)(e.t1),_(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(p.b)(),P=Object(p.c)(F),T=Object(p.c)(W),z=function(){var e=Object(r.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.collection("users");case 2:t=e.sent,T&&(t.doc(T).update({photoURL:h}).then((function(){return console.log("Clicked")})).catch((function(e){return alert(e.message)})),t.doc(T).update({displayName:a}).then((function(){E(R({user:{displayName:a,WhatIDo:l,photoURL:h,uid:P.uid,email:P.email,emailVerified:P.emailVerified,isOnline:!0}}))})).catch((function(e){return alert(e.message)})),t.doc(T).update({whatIDo:l}).catch((function(e){return alert(e.message)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){return C&&(z(),""!==a&&""!==l||L("You have to fill the information!"),""===h&&L("You have to upload an image!")),function(){k(!1),L("")}}),[C]);var V,A=function(){var e=Object(r.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.signOut().then((function(){m.collection("users").doc(T).update({isOnline:!1})})).catch((function(e){return alert(e.message)}));case 2:E(D({initState:null}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(K.jsxs)("div",{className:"setup-page-container",children:[Object(K.jsx)("h2",{children:"Please enter your basic information"}),Object(K.jsxs)("div",{className:"setup-page__inner",children:[Object(K.jsxs)("div",{className:"setup-page__collumns",children:[Object(K.jsx)("div",{className:"collumn setup-page__collumn photo-column ",children:Object(K.jsxs)("div",{className:"form-group",children:[Object(K.jsx)("label",{htmlFor:"",className:"form-label",children:Object(K.jsx)("strong",{children:"Photo"})}),Object(K.jsx)("div",{className:"image-holder-container",children:Object(K.jsx)("div",{className:"image-holder",style:{backgroundImage:"url(".concat(h,")")},children:N&&Object(K.jsx)(De,{})})}),Object(K.jsx)("input",{ref:function(e){return V=e},type:"file",className:"form-control photo-input",accept:"img/*",onChange:M}),Object(K.jsxs)("span",{role:"button",className:"upload-button c-button--medium btn-success",onClick:function(){V.click()},children:["Upload an image"," "]})]})}),Object(K.jsxs)("div",{className:" collumn setup-page__collumn info-column",children:[Object(K.jsxs)("div",{className:"form-group",children:[Object(K.jsxs)("label",{className:"form-label",children:[Object(K.jsx)("strong",{children:"Display name"})," "]}),Object(K.jsx)("input",{value:a,onChange:function(e){s(e.target.value)},type:"text",className:"form-control"})]}),Object(K.jsx)("br",{}),Object(K.jsxs)("div",{className:"form-group",children:[Object(K.jsx)("label",{className:"form-label",children:Object(K.jsx)("strong",{children:"What you do"})}),Object(K.jsx)("input",{value:l,onChange:function(e){u(e.target.value)},type:"text",className:"form-control "})]}),Object(K.jsx)("br",{})]})]}),Object(K.jsx)("br",{}),Object(K.jsxs)("div",{className:"button-container",children:[Object(K.jsx)("button",{className:"btn btn-secondary",onClick:A,children:"Use another account"}),Object(K.jsx)("button",{className:"btn btn-success",onClick:function(){k(!0)},children:"Proceed to the server"})]}),Object(K.jsx)("div",{className:"notif-container",children:Object(K.jsx)("strong",{children:I})})]})]})};var mt=function(){var e=Object(h.a)(v),t=Object(o.a)(e,2),a=t[0],s=t[1],n=Object(f.a)(m.collection("users")),i=Object(o.a)(n,2),l=i[0],d=(i[1],null===l||void 0===l?void 0:l.docs.find((function(e){return e.data().uid===(null===a||void 0===a?void 0:a.uid)}))),r=Object(c.useState)(!1),u=Object(o.a)(r,2),b=u[0],j=u[1];Object(c.useEffect)((function(){a&&d&&function(){var e,t;null===(e=m.collection("users"))||void 0===e||null===(t=e.doc(null===d||void 0===d?void 0:d.id))||void 0===t||t.update({isOnline:!0})}()}),[a,d]);var O=Object(c.useState)(200),x=Object(o.a)(O,2),g=x[0],N=x[1],_=Object(c.useState)(300),y=Object(o.a)(_,2),w=y[0],C=y[1],k=Object(p.c)(Q),U=Object(p.c)(T),S=Object(p.c)(H),I=U||S,R=Object(p.c)(X),L=Object(p.c)(B),D=Object(c.useState)(!1),M=Object(o.a)(D,2),E=M[0],P=M[1],W=function(){P(!E),console.log("Clicked")};Object(c.useEffect)((function(){console.log(E),console.log(st()(".modal:visible")),st()(document).on("shown.bs.modal",".modal",(function(){console.log("Added!!!1");var e=1040+20*st()(".modal:visible").length;st()(this).css("z-index",e),setTimeout((function(){st()(".modal-backdrop").not(".modal-stack").css("z-index",e-1+"!important").addClass("modal-stack")}),0)}))}),[E]);var z=Object(p.c)(F);return Object(K.jsx)("div",{className:"App",onresize:!0,children:s?Object(K.jsx)(He,{}):a?(null===z||void 0===z?void 0:z.displayName)&&(null===z||void 0===z?void 0:z.photoURL)?Object(K.jsx)(K.Fragment,{children:Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(bt,{}),Object(K.jsx)(ut,{id:I,roomDetails:k,directUser:R,onClick:W}),Object(K.jsx)(Ye,{}),Object(K.jsx)(nt,{uid:null===L||void 0===L?void 0:L.uid}),Object(K.jsx)(Fe,{}),Object(K.jsx)(ve,{user:a}),Object(K.jsxs)("div",{className:"work-space-body",children:[Object(K.jsx)(Me,{width:g}),Object(K.jsx)(Qe,{onMouseDown:function(e){var t=e.clientX;function a(e){var a=g+e.clientX-t;N(a<200?200:a>500?500:a)}window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e)}))}}),Object(K.jsx)(qe,{onClick:W}),Object(K.jsx)(Qe,{onMouseDown:function(e){j(!0);var t=e.clientX;document.body.offsetWidth;function a(e){var a=w-e.clientX+t;C(a<300?300:a>600?600:a)}window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",e),j(!1)}))}}),Object(K.jsx)(Xe,{width:w,resize:b})]})]})}):Object(K.jsx)(jt,{}):Object(K.jsx)(ee,{})})},vt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,148)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))},Ot=a(75),ht=a(71),pt=a.n(ht),ft=a(72),xt=a(73),gt=a.n(xt),Nt={key:"root",storage:pt.a,stateReconciler:gt.a},_t=Object(Ot.a)(Nt,J),yt=Object(x.a)({reducer:{app:_t}}),wt=Object(ft.a)(yt),Ct=a(74);i.a.render(Object(K.jsx)(s.a.StrictMode,{children:Object(K.jsx)(p.a,{store:yt,children:Object(K.jsx)(Ct.a,{loading:"null",persistor:wt,children:Object(K.jsx)(mt,{})})})}),document.getElementById("root")),vt()},50:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},99:function(e,t,a){}},[[131,1,2]]]);
//# sourceMappingURL=main.1dde3818.chunk.js.map